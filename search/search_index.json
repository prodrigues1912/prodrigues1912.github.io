{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bem-vindo","text":"<p>Sou Paulo Rodrigues, desenvolvedor de software e engenheiro de dados.</p>"},{"location":"#sobre-este-blog","title":"Sobre este blog","text":"<p>Aqui voc\u00ea vai encontrar notas e tutoriais que escrevo principalmente para minha pr\u00f3pria consulta. Os temas s\u00e3o variados - tecnologia na maior parte, mas tamb\u00e9m outros assuntos que me interessam.</p>"},{"location":"#o-que-esperar","title":"O que esperar","text":"<ul> <li>Tutoriais t\u00e9cnicos - Programa\u00e7\u00e3o, engenharia de dados, cloud, DevOps e ferramentas em geral</li> <li>Notas de estudo - Resumos e anota\u00e7\u00f5es sobre o que estou aprendendo</li> <li>Outros temas - Assuntos variados que considero \u00fatil registrar e para eventual consulta</li> </ul>"},{"location":"#contato","title":"Contato","text":"<ul> <li>LinkedIn</li> <li>X</li> <li>GitHub</li> </ul>"},{"location":"ora%C3%A7%C3%B5es/angelus/","title":"Anjo do Senhor","text":"<p>V. O anjo do Senhor anunciou a Maria.</p> <p>R. E Ela concebeu do Esp\u00edrito Santo.</p> <p>Ave Maria.</p> <p>V. Eis aqui a escrava do Senhor.</p> <p>R. Fa\u00e7a-se em mim segundo a vossa palavra.</p> <p>Ave Maria.</p> <p>V. E o Verbo divino se fez carne.</p> <p>R. E habitou entre n\u00f3s.</p> <p>Ave Maria.</p> <p>V. Rogai por n\u00f3s Santa M\u00e3e de Deus.</p> <p>R. Para que sejamos dignos das gra\u00e7as de Cristo.</p> <p>Oremos. Infundi, Senhor, n\u00f3s Vos pedimos, em nossas almas a vossa gra\u00e7a, para que n\u00f3s, que conhecemos pela Anuncia\u00e7\u00e3o do Anjo a Encarna\u00e7\u00e3o de Jesus Cristo, vosso Filho, cheguemos por sua Paix\u00e3o e sua Cruz \u00e0 gl\u00f3ria da Ressurrei\u00e7\u00e3o. Pelo mesmo Jesus Cristo, Senhor nosso.</p> <p>R. Am\u00e9m.</p>"},{"location":"ora%C3%A7%C3%B5es/credo/","title":"Credo Niceno-Constantinopolitano","text":"<p>Creio em um s\u00f3 Deus, Pai todo-poderoso, Criador do c\u00e9u e da terra, de todas as coisas vis\u00edveis e invis\u00edveis.</p> <p>Creio em um s\u00f3 Senhor, Jesus Cristo, Filho Unig\u00eanito de Deus, nascido do Pai antes de todos os s\u00e9culos: Deus de Deus, luz da luz, Deus verdadeiro de Deus verdadeiro; gerado, n\u00e3o criado, consubstancial ao Pai. Por Ele todas as coisas foram feitas.</p> <p>E por n\u00f3s, homens, e para nossa salva\u00e7\u00e3o desceu dos c\u00e9us. E encarnou pelo Esp\u00edrito Santo, no seio da Virgem Maria, e se fez homem.</p> <p>Tamb\u00e9m por n\u00f3s foi crucificado sob P\u00f4ncio Pilatos; padeceu e foi sepultado.</p> <p>Ressuscitou ao terceiro dia, conforme as Escrituras; e subiu aos c\u00e9us, onde est\u00e1 sentado \u00e0 direita do Pai.</p> <p>De novo h\u00e1 de vir, em sua gl\u00f3ria, para julgar os vivos e os mortos; e o seu reino n\u00e3o ter\u00e1 fim.</p> <p>Creio no Esp\u00edrito Santo, Senhor que d\u00e1 a vida, e procede do Pai e do Filho; e com o Pai e o Filho \u00e9 adorado e glorificado: Ele que falou pelos profetas.</p> <p>Creio na Igreja una, santa, cat\u00f3lica e apost\u00f3lica.</p> <p>Professo um s\u00f3 batismo para remiss\u00e3o dos pecados.</p> <p>E espero a ressurrei\u00e7\u00e3o dos mortos e a vida do mundo que h\u00e1 de vir.</p> <p>Am\u00e9m.</p>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/","title":"Apache Airflow: refer\u00eancia","text":"<p>Orquestrador de workflows para pipelines de dados. Permite definir, agendar e monitorar DAGs (Directed Acyclic Graphs) de tarefas.</p>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#o-que-e","title":"O que \u00e9","text":"<p>Apache Airflow \u00e9 uma plataforma para criar, agendar e monitorar workflows programaticamente. Criado pelo Airbnb em 2014, hoje \u00e9 um projeto Apache.</p>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#que-problemas-resolve","title":"Que problemas resolve","text":"<ul> <li>Agendamento de pipelines: executar tarefas em hor\u00e1rios espec\u00edficos ou intervalos</li> <li>Depend\u00eancias entre tarefas: garantir que task B s\u00f3 execute ap\u00f3s task A</li> <li>Retry autom\u00e1tico: reexecutar tarefas que falharam</li> <li>Monitoramento: visualizar status, logs e hist\u00f3rico de execu\u00e7\u00f5es</li> <li>Alertas: notificar falhas via email, Slack, etc.</li> <li>Backfill: executar pipelines para datas passadas</li> </ul>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#conceitos-principais","title":"Conceitos principais","text":""},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#dag-directed-acyclic-graph","title":"DAG (Directed Acyclic Graph)","text":"<p>Define o pipeline completo: quais tarefas executar e em que ordem.</p> <pre><code>from airflow import DAG\nfrom datetime import datetime\n\nwith DAG(\n    dag_id=\"etl_vendas\",\n    start_date=datetime(2025, 1, 1),\n    schedule=\"@daily\",  # ou \"0 2 * * *\" (cron)\n    catchup=False,\n) as dag:\n    # tasks aqui\n</code></pre> <p>Par\u00e2metros importantes:</p> Par\u00e2metro Descri\u00e7\u00e3o <code>dag_id</code> Identificador \u00fanico <code>start_date</code> Quando come\u00e7ar a agendar <code>schedule</code> Frequ\u00eancia de execu\u00e7\u00e3o <code>catchup</code> Se True, executa runs passados <code>default_args</code> Args padr\u00e3o para todas as tasks"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#task","title":"Task","text":"<p>Unidade de trabalho dentro de uma DAG.</p> <pre><code>from airflow.operators.python import PythonOperator\nfrom airflow.operators.bash import BashOperator\n\nextract = BashOperator(\n    task_id=\"extract\",\n    bash_command=\"python extract.py\",\n)\n\ntransform = PythonOperator(\n    task_id=\"transform\",\n    python_callable=transform_data,\n)\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#operator","title":"Operator","text":"<p>Tipo de task. Airflow vem com muitos built-in e providers adicionais.</p> <pre><code># Python\nfrom airflow.operators.python import PythonOperator\n\n# Bash\nfrom airflow.operators.bash import BashOperator\n\n# SQL\nfrom airflow.providers.common.sql.operators.sql import SQLExecuteQueryOperator\n\n# AWS\nfrom airflow.providers.amazon.aws.operators.s3 import S3CreateBucketOperator\n\n# GCP\nfrom airflow.providers.google.cloud.operators.bigquery import BigQueryInsertJobOperator\n\n# Docker\nfrom airflow.providers.docker.operators.docker import DockerOperator\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#sensor","title":"Sensor","text":"<p>Task que espera por uma condi\u00e7\u00e3o antes de prosseguir.</p> <pre><code>from airflow.sensors.filesystem import FileSensor\nfrom airflow.providers.amazon.aws.sensors.s3 import S3KeySensor\n\n# Esperar arquivo local\nwait_file = FileSensor(\n    task_id=\"wait_file\",\n    filepath=\"/data/input.csv\",\n    poke_interval=60,  # verifica a cada 60s\n    timeout=3600,      # timeout ap\u00f3s 1h\n)\n\n# Esperar arquivo no S3\nwait_s3 = S3KeySensor(\n    task_id=\"wait_s3\",\n    bucket_name=\"meu-bucket\",\n    bucket_key=\"data/{{ ds }}/file.parquet\",\n)\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#dependencias","title":"Depend\u00eancias","text":"<p>Definir ordem de execu\u00e7\u00e3o:</p> <pre><code># Sequencial\nextract &gt;&gt; transform &gt;&gt; load\n\n# M\u00faltiplas depend\u00eancias\n[extract_a, extract_b] &gt;&gt; transform &gt;&gt; [load_dwh, load_lake]\n\n# M\u00e9todo set_downstream/set_upstream\nextract.set_downstream(transform)\ntransform.set_upstream(extract)  # equivalente\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#taskflow-api","title":"TaskFlow API","text":"<p>Sintaxe moderna usando decorators (Airflow 2.0+):</p> <pre><code>from airflow.decorators import dag, task\nfrom datetime import datetime\n\n@dag(\n    dag_id=\"etl_taskflow\",\n    start_date=datetime(2025, 1, 1),\n    schedule=\"@daily\",\n    catchup=False,\n)\ndef etl_pipeline():\n\n    @task\n    def extract():\n        return {\"data\": [1, 2, 3, 4, 5]}\n\n    @task\n    def transform(raw_data):\n        return [x * 2 for x in raw_data[\"data\"]]\n\n    @task\n    def load(processed_data):\n        print(f\"Carregando {len(processed_data)} registros\")\n\n    # Depend\u00eancias impl\u00edcitas pelo fluxo de dados\n    raw = extract()\n    processed = transform(raw)\n    load(processed)\n\netl_pipeline()\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#xcom","title":"XCom","text":"<p>Comunica\u00e7\u00e3o entre tasks. Usado automaticamente pelo TaskFlow API.</p> <pre><code># Push manual\ndef push_data(**context):\n    context[\"ti\"].xcom_push(key=\"result\", value={\"count\": 100})\n\n# Pull manual\ndef pull_data(**context):\n    result = context[\"ti\"].xcom_pull(task_ids=\"push_task\", key=\"result\")\n    print(result)  # {\"count\": 100}\n</code></pre> <p>XCom \u00e9 para dados pequenos (metadados, contagens). Para dados grandes, usar storage externo (S3, GCS).</p>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#templating-jinja","title":"Templating (Jinja)","text":"<p>Vari\u00e1veis din\u00e2micas em par\u00e2metros:</p> <pre><code>BashOperator(\n    task_id=\"process\",\n    bash_command=\"python process.py --date {{ ds }} --env {{ var.value.environment }}\",\n)\n</code></pre> <p>Vari\u00e1veis dispon\u00edveis:</p> Vari\u00e1vel Descri\u00e7\u00e3o Exemplo <code>{{ ds }}</code> Data de execu\u00e7\u00e3o (YYYY-MM-DD) 2025-01-15 <code>{{ ds_nodash }}</code> Data sem tra\u00e7os 20250115 <code>{{ execution_date }}</code> Datetime completo 2025-01-15T00:00:00 <code>{{ prev_ds }}</code> Data anterior 2025-01-14 <code>{{ next_ds }}</code> Pr\u00f3xima data 2025-01-16 <code>{{ var.value.key }}</code> Vari\u00e1vel do Airflow - <code>{{ conn.conn_id }}</code> Conex\u00e3o -"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#connections","title":"Connections","text":"<p>Credenciais armazenadas no Airflow (via UI ou CLI):</p> <pre><code># Criar via CLI\nairflow connections add 'postgres_dwh' \\\n    --conn-type 'postgres' \\\n    --conn-host 'localhost' \\\n    --conn-schema 'dwh' \\\n    --conn-login 'user' \\\n    --conn-password 'pass' \\\n    --conn-port 5432\n</code></pre> <p>Usar em operators:</p> <pre><code>from airflow.providers.postgres.operators.postgres import PostgresOperator\n\nPostgresOperator(\n    task_id=\"create_table\",\n    postgres_conn_id=\"postgres_dwh\",  # referencia a connection\n    sql=\"CREATE TABLE IF NOT EXISTS ...\",\n)\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#variables","title":"Variables","text":"<p>Configura\u00e7\u00f5es globais:</p> <pre><code>from airflow.models import Variable\n\n# Ler\nenv = Variable.get(\"environment\")\nconfig = Variable.get(\"config\", deserialize_json=True)\n\n# Em templates Jinja: var.value.environment ou var.json.config.key\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#hooks","title":"Hooks","text":"<p>Camada de abstra\u00e7\u00e3o para conex\u00f5es:</p> <pre><code>from airflow.providers.postgres.hooks.postgres import PostgresHook\nfrom airflow.providers.amazon.aws.hooks.s3 import S3Hook\n\ndef query_postgres():\n    hook = PostgresHook(postgres_conn_id=\"postgres_dwh\")\n    df = hook.get_pandas_df(\"SELECT * FROM tabela\")\n    return df\n\ndef upload_to_s3():\n    hook = S3Hook(aws_conn_id=\"aws_default\")\n    hook.load_file(\n        filename=\"/tmp/data.parquet\",\n        key=\"data/file.parquet\",\n        bucket_name=\"meu-bucket\",\n    )\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#branching","title":"Branching","text":"<p>Execu\u00e7\u00e3o condicional:</p> <pre><code>from airflow.operators.python import BranchPythonOperator\n\ndef choose_branch(**context):\n    if context[\"ds_nodash\"] == \"20250101\":\n        return \"task_new_year\"\n    return \"task_normal\"\n\nbranch = BranchPythonOperator(\n    task_id=\"branch\",\n    python_callable=choose_branch,\n)\n\nbranch &gt;&gt; [task_new_year, task_normal]\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#trigger-rules","title":"Trigger Rules","text":"<p>Quando uma task deve executar:</p> <pre><code>from airflow.utils.trigger_rule import TriggerRule\n\ntask = PythonOperator(\n    task_id=\"always_run\",\n    python_callable=cleanup,\n    trigger_rule=TriggerRule.ALL_DONE,  # executa mesmo se upstream falhou\n)\n</code></pre> Regra Descri\u00e7\u00e3o <code>all_success</code> Todas upstream ok (padr\u00e3o) <code>all_failed</code> Todas upstream falharam <code>all_done</code> Todas upstream terminaram <code>one_success</code> Pelo menos uma ok <code>one_failed</code> Pelo menos uma falhou <code>none_failed</code> Nenhuma falhou (pode ter skipped)"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#subdags-e-taskgroups","title":"SubDAGs e TaskGroups","text":"<p>Organizar tasks relacionadas:</p> <pre><code>from airflow.utils.task_group import TaskGroup\n\nwith DAG(...) as dag:\n\n    with TaskGroup(\"extract\") as extract_group:\n        extract_orders = PythonOperator(...)\n        extract_customers = PythonOperator(...)\n\n    with TaskGroup(\"transform\") as transform_group:\n        transform_orders = PythonOperator(...)\n        transform_customers = PythonOperator(...)\n\n    extract_group &gt;&gt; transform_group\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#dynamic-tasks","title":"Dynamic Tasks","text":"<p>Criar tasks dinamicamente:</p> <pre><code># Mapeamento din\u00e2mico (Airflow 2.3+)\n@task\ndef get_files():\n    return [\"file1.csv\", \"file2.csv\", \"file3.csv\"]\n\n@task\ndef process_file(filename):\n    print(f\"Processando {filename}\")\n\n@dag(...)\ndef dynamic_pipeline():\n    files = get_files()\n    process_file.expand(filename=files)  # cria 3 tasks\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#pools","title":"Pools","text":"<p>Limitar execu\u00e7\u00f5es paralelas:</p> <pre><code># Criar pool via UI ou CLI\n# Nome: \"database_pool\", Slots: 2\n\ntask = PythonOperator(\n    task_id=\"query_db\",\n    python_callable=query,\n    pool=\"database_pool\",  # m\u00e1ximo 2 tasks simult\u00e2neas neste pool\n)\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#retry-e-timeout","title":"Retry e Timeout","text":"<pre><code>from datetime import timedelta\n\ntask = PythonOperator(\n    task_id=\"flaky_task\",\n    python_callable=might_fail,\n    retries=3,\n    retry_delay=timedelta(minutes=5),\n    retry_exponential_backoff=True,\n    max_retry_delay=timedelta(hours=1),\n    execution_timeout=timedelta(hours=2),\n)\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#callbacks","title":"Callbacks","text":"<p>Executar c\u00f3digo em eventos:</p> <pre><code>def on_failure(context):\n    # Enviar alerta\n    send_slack_alert(f\"Task {context['task_instance'].task_id} falhou\")\n\ndef on_success(context):\n    print(\"Sucesso!\")\n\ntask = PythonOperator(\n    task_id=\"task_with_callbacks\",\n    python_callable=do_something,\n    on_failure_callback=on_failure,\n    on_success_callback=on_success,\n)\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#estrutura-de-projeto","title":"Estrutura de projeto","text":"<pre><code>airflow/\n\u251c\u2500\u2500 dags/\n\u2502   \u251c\u2500\u2500 etl_vendas.py\n\u2502   \u251c\u2500\u2500 etl_clientes.py\n\u2502   \u2514\u2500\u2500 utils/\n\u2502       \u2514\u2500\u2500 helpers.py\n\u251c\u2500\u2500 plugins/\n\u2502   \u2514\u2500\u2500 custom_operators.py\n\u251c\u2500\u2500 include/\n\u2502   \u2514\u2500\u2500 sql/\n\u2502       \u2514\u2500\u2500 queries.sql\n\u251c\u2500\u2500 tests/\n\u2502   \u2514\u2500\u2500 test_dags.py\n\u251c\u2500\u2500 docker-compose.yaml\n\u2514\u2500\u2500 requirements.txt\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#testes","title":"Testes","text":"<pre><code>import pytest\nfrom airflow.models import DagBag\n\n@pytest.fixture\ndef dag_bag():\n    return DagBag(include_examples=False)\n\ndef test_dag_loaded(dag_bag):\n    assert \"etl_vendas\" in dag_bag.dags\n    assert dag_bag.import_errors == {}\n\ndef test_dag_structure(dag_bag):\n    dag = dag_bag.dags[\"etl_vendas\"]\n    assert len(dag.tasks) == 3\n    assert \"extract\" in [t.task_id for t in dag.tasks]\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#cli-util","title":"CLI \u00fatil","text":"<pre><code># Listar DAGs\nairflow dags list\n\n# Testar task\nairflow tasks test dag_id task_id 2025-01-01\n\n# Executar DAG\nairflow dags trigger dag_id\n\n# Backfill\nairflow dags backfill dag_id --start-date 2025-01-01 --end-date 2025-01-31\n\n# Pausar/despausar\nairflow dags pause dag_id\nairflow dags unpause dag_id\n\n# Ver logs\nairflow tasks logs dag_id task_id 2025-01-01\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#docker-compose-desenvolvimento","title":"Docker Compose (desenvolvimento)","text":"<pre><code>version: '3'\nservices:\n  postgres:\n    image: postgres:15\n    environment:\n      POSTGRES_USER: airflow\n      POSTGRES_PASSWORD: airflow\n      POSTGRES_DB: airflow\n\n  airflow-webserver:\n    image: apache/airflow:2.8.0\n    depends_on:\n      - postgres\n    environment:\n      AIRFLOW__CORE__EXECUTOR: LocalExecutor\n      AIRFLOW__DATABASE__SQL_ALCHEMY_CONN: postgresql+psycopg2://airflow:airflow@postgres/airflow\n    volumes:\n      - ./dags:/opt/airflow/dags\n    ports:\n      - \"8080:8080\"\n    command: webserver\n\n  airflow-scheduler:\n    image: apache/airflow:2.8.0\n    depends_on:\n      - postgres\n    environment:\n      AIRFLOW__CORE__EXECUTOR: LocalExecutor\n      AIRFLOW__DATABASE__SQL_ALCHEMY_CONN: postgresql+psycopg2://airflow:airflow@postgres/airflow\n    volumes:\n      - ./dags:/opt/airflow/dags\n    command: scheduler\n</code></pre>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#executors","title":"Executors","text":"Executor Uso <code>SequentialExecutor</code> Desenvolvimento (1 task por vez) <code>LocalExecutor</code> Produ\u00e7\u00e3o pequena (multiprocess) <code>CeleryExecutor</code> Produ\u00e7\u00e3o distribu\u00edda (workers) <code>KubernetesExecutor</code> Kubernetes (pod por task)"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#managed-services","title":"Managed services","text":"<ul> <li>AWS MWAA: Amazon Managed Workflows for Apache Airflow</li> <li>GCP Cloud Composer: Airflow gerenciado no Google Cloud</li> <li>Astronomer: Plataforma Airflow gerenciada</li> </ul>"},{"location":"2025/08/24/apache-airflow-refer%C3%AAncia/#links","title":"Links","text":"<ul> <li>Airflow Docs</li> <li>Providers</li> <li>Best Practices</li> </ul>"},{"location":"2025/12/10/c-refer%C3%AAncia/","title":"C: refer\u00eancia","text":"<p>Fundamentos da linguagem C para iniciantes.</p>"},{"location":"2025/12/10/c-refer%C3%AAncia/#compilacao","title":"Compila\u00e7\u00e3o","text":"<pre><code># Compilar\ngcc programa.c -o programa\n\n# Compilar com warnings\ngcc -Wall -Wextra programa.c -o programa\n\n# Compilar para debug\ngcc -g programa.c -o programa\n\n# Executar\n./programa\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#estrutura-basica","title":"Estrutura b\u00e1sica","text":"<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    printf(\"Hello, World!\\n\");\n    return 0;\n}\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#tipos-de-dados","title":"Tipos de dados","text":"<pre><code>// Inteiros\nchar c = 'A';           // 1 byte (-128 a 127)\nshort s = 32767;        // 2 bytes\nint i = 2147483647;     // 4 bytes\nlong l = 9223372036854775807L;  // 8 bytes\n\n// Sem sinal\nunsigned char uc = 255;\nunsigned int ui = 4294967295;\n\n// Decimais\nfloat f = 3.14f;        // 4 bytes, 6-7 d\u00edgitos\ndouble d = 3.14159265;  // 8 bytes, 15-16 d\u00edgitos\n\n// Tamanho dos tipos\nprintf(\"int: %zu bytes\\n\", sizeof(int));\nprintf(\"double: %zu bytes\\n\", sizeof(double));\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#variaveis-e-constantes","title":"Vari\u00e1veis e constantes","text":"<pre><code>// Declara\u00e7\u00e3o\nint idade;\nint x, y, z;\n\n// Inicializa\u00e7\u00e3o\nint contador = 0;\nfloat preco = 19.99f;\n\n// Constantes\nconst int MAX = 100;\n#define PI 3.14159\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#operadores","title":"Operadores","text":"<pre><code>// Aritm\u00e9ticos\nint soma = a + b;\nint sub = a - b;\nint mult = a * b;\nint div = a / b;      // divis\u00e3o inteira se ambos int\nint resto = a % b;    // m\u00f3dulo\n\n// Incremento/Decremento\ni++;    // i = i + 1\ni--;    // i = i - 1\n++i;    // incrementa antes de usar\n--i;    // decrementa antes de usar\n\n// Atribui\u00e7\u00e3o composta\nx += 5;   // x = x + 5\nx -= 3;   // x = x - 3\nx *= 2;   // x = x * 2\nx /= 4;   // x = x / 4\n\n// Compara\u00e7\u00e3o\na == b    // igual\na != b    // diferente\na &gt; b     // maior\na &lt; b     // menor\na &gt;= b    // maior ou igual\na &lt;= b    // menor ou igual\n\n// L\u00f3gicos\na &amp;&amp; b    // AND\na || b    // OR\n!a        // NOT\n\n// Bitwise\na &amp; b     // AND bit a bit\na | b     // OR bit a bit\na ^ b     // XOR\n~a        // NOT (complemento)\na &lt;&lt; 2    // shift left\na &gt;&gt; 2    // shift right\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#entrada-e-saida","title":"Entrada e sa\u00edda","text":"<pre><code>#include &lt;stdio.h&gt;\n\n// Sa\u00edda\nprintf(\"Texto simples\\n\");\nprintf(\"Inteiro: %d\\n\", 42);\nprintf(\"Float: %.2f\\n\", 3.14159);\nprintf(\"Char: %c\\n\", 'A');\nprintf(\"String: %s\\n\", \"texto\");\nprintf(\"M\u00faltiplos: %d e %s\\n\", 10, \"dez\");\n\n// Entrada\nint idade;\nprintf(\"Digite sua idade: \");\nscanf(\"%d\", &amp;idade);  // &amp; pega o endere\u00e7o\n\nchar nome[50];\nprintf(\"Digite seu nome: \");\nscanf(\"%s\", nome);    // sem &amp; para arrays\n\n// Ler linha inteira (com espa\u00e7os)\nchar linha[100];\nfgets(linha, sizeof(linha), stdin);\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#especificadores-de-formato","title":"Especificadores de formato","text":"Formato Tipo <code>%d</code> int <code>%ld</code> long <code>%u</code> unsigned int <code>%f</code> float/double <code>%.2f</code> float com 2 casas <code>%c</code> char <code>%s</code> string <code>%p</code> ponteiro <code>%x</code> hexadecimal <code>%%</code> literal %"},{"location":"2025/12/10/c-refer%C3%AAncia/#condicionais","title":"Condicionais","text":"<pre><code>// if-else\nif (idade &gt;= 18) {\n    printf(\"Maior de idade\\n\");\n} else if (idade &gt;= 12) {\n    printf(\"Adolescente\\n\");\n} else {\n    printf(\"Crian\u00e7a\\n\");\n}\n\n// Tern\u00e1rio\nint max = (a &gt; b) ? a : b;\n\n// switch\nswitch (opcao) {\n    case 1:\n        printf(\"Op\u00e7\u00e3o 1\\n\");\n        break;\n    case 2:\n        printf(\"Op\u00e7\u00e3o 2\\n\");\n        break;\n    default:\n        printf(\"Op\u00e7\u00e3o inv\u00e1lida\\n\");\n}\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#loops","title":"Loops","text":"<pre><code>// for\nfor (int i = 0; i &lt; 10; i++) {\n    printf(\"%d\\n\", i);\n}\n\n// while\nint i = 0;\nwhile (i &lt; 10) {\n    printf(\"%d\\n\", i);\n    i++;\n}\n\n// do-while (executa pelo menos uma vez)\nint j = 0;\ndo {\n    printf(\"%d\\n\", j);\n    j++;\n} while (j &lt; 10);\n\n// Controle de fluxo\nfor (int i = 0; i &lt; 10; i++) {\n    if (i == 3) continue;  // pula itera\u00e7\u00e3o\n    if (i == 7) break;     // sai do loop\n    printf(\"%d\\n\", i);\n}\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#arrays","title":"Arrays","text":"<pre><code>// Declara\u00e7\u00e3o e inicializa\u00e7\u00e3o\nint numeros[5];                      // n\u00e3o inicializado\nint valores[5] = {1, 2, 3, 4, 5};    // inicializado\nint zeros[5] = {0};                  // todos zeros\nint parcial[5] = {1, 2};             // resto \u00e9 zero\n\n// Tamanho inferido\nint arr[] = {1, 2, 3, 4, 5};  // tamanho = 5\n\n// Acesso\narr[0] = 10;           // primeiro elemento\narr[4] = 50;           // \u00faltimo elemento\nint tamanho = sizeof(arr) / sizeof(arr[0]);\n\n// Percorrer\nfor (int i = 0; i &lt; 5; i++) {\n    printf(\"%d\\n\", arr[i]);\n}\n\n// Array multidimensional\nint matriz[3][3] = {\n    {1, 2, 3},\n    {4, 5, 6},\n    {7, 8, 9}\n};\nprintf(\"%d\\n\", matriz[1][2]);  // 6\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#strings","title":"Strings","text":"<pre><code>#include &lt;string.h&gt;\n\n// Strings s\u00e3o arrays de char terminados em '\\0'\nchar nome[20] = \"Jo\u00e3o\";\nchar outro[] = \"Maria\";  // tamanho = 6 (5 + '\\0')\n\n// Fun\u00e7\u00f5es de string\nstrlen(str);              // tamanho (sem '\\0')\nstrcpy(dest, src);        // copia src para dest\nstrncpy(dest, src, n);    // copia at\u00e9 n chars\nstrcat(dest, src);        // concatena\nstrncat(dest, src, n);    // concatena at\u00e9 n\nstrcmp(s1, s2);           // compara (0 se iguais)\nstrncmp(s1, s2, n);       // compara n chars\nstrchr(str, c);           // busca char\nstrstr(str, substr);      // busca substring\n\n// Exemplo\nchar saudacao[50];\nstrcpy(saudacao, \"Ol\u00e1, \");\nstrcat(saudacao, nome);\nstrcat(saudacao, \"!\");\nprintf(\"%s\\n\", saudacao);  // \"Ol\u00e1, Jo\u00e3o!\"\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#funcoes","title":"Fun\u00e7\u00f5es","text":"<pre><code>// Declara\u00e7\u00e3o (prot\u00f3tipo)\nint soma(int a, int b);\nvoid imprime(char *msg);\n\n// Defini\u00e7\u00e3o\nint soma(int a, int b) {\n    return a + b;\n}\n\nvoid imprime(char *msg) {\n    printf(\"%s\\n\", msg);\n}\n\n// Chamada\nint resultado = soma(3, 5);\nimprime(\"Hello\");\n\n// Passagem por valor (c\u00f3pia)\nvoid dobra(int x) {\n    x = x * 2;  // n\u00e3o afeta o original\n}\n\n// Passagem por refer\u00eancia (ponteiro)\nvoid dobra_ref(int *x) {\n    *x = *x * 2;  // afeta o original\n}\n\nint num = 10;\ndobra(num);       // num ainda \u00e9 10\ndobra_ref(&amp;num);  // num agora \u00e9 20\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#ponteiros","title":"Ponteiros","text":"<pre><code>int x = 10;\nint *ptr;       // declara ponteiro para int\n\nptr = &amp;x;       // ptr recebe endere\u00e7o de x\n\nprintf(\"%d\\n\", x);      // 10 (valor)\nprintf(\"%p\\n\", &amp;x);     // endere\u00e7o de x\nprintf(\"%p\\n\", ptr);    // mesmo endere\u00e7o\nprintf(\"%d\\n\", *ptr);   // 10 (valor apontado)\n\n*ptr = 20;      // altera x atrav\u00e9s do ponteiro\nprintf(\"%d\\n\", x);  // 20\n\n// Ponteiro e arrays\nint arr[] = {1, 2, 3, 4, 5};\nint *p = arr;   // aponta para primeiro elemento\n\nprintf(\"%d\\n\", *p);       // 1\nprintf(\"%d\\n\", *(p + 1)); // 2\nprintf(\"%d\\n\", p[2]);     // 3 (nota\u00e7\u00e3o de array)\n\n// Aritm\u00e9tica de ponteiros\np++;            // avan\u00e7a para pr\u00f3ximo int\nprintf(\"%d\\n\", *p);  // 2\n\n// Ponteiro nulo\nint *nulo = NULL;\nif (nulo == NULL) {\n    printf(\"Ponteiro nulo\\n\");\n}\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#structs","title":"Structs","text":"<pre><code>// Defini\u00e7\u00e3o\nstruct Pessoa {\n    char nome[50];\n    int idade;\n    float altura;\n};\n\n// Uso\nstruct Pessoa p1;\nstrcpy(p1.nome, \"Jo\u00e3o\");\np1.idade = 30;\np1.altura = 1.75;\n\n// Inicializa\u00e7\u00e3o direta\nstruct Pessoa p2 = {\"Maria\", 25, 1.65};\n\n// Com typedef\ntypedef struct {\n    int x;\n    int y;\n} Ponto;\n\nPonto origem = {0, 0};\nprintf(\"(%d, %d)\\n\", origem.x, origem.y);\n\n// Ponteiro para struct\nstruct Pessoa *ptr = &amp;p1;\nprintf(\"%s\\n\", ptr-&gt;nome);    // operador -&gt;\nprintf(\"%d\\n\", (*ptr).idade); // equivalente\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#alocacao-dinamica","title":"Aloca\u00e7\u00e3o din\u00e2mica","text":"<pre><code>#include &lt;stdlib.h&gt;\n\n// malloc - aloca mem\u00f3ria (n\u00e3o inicializa)\nint *ptr = (int *)malloc(sizeof(int));\nif (ptr == NULL) {\n    printf(\"Erro de aloca\u00e7\u00e3o\\n\");\n    return 1;\n}\n*ptr = 42;\n\n// calloc - aloca e inicializa com zeros\nint *arr = (int *)calloc(10, sizeof(int));\n\n// realloc - redimensiona\narr = (int *)realloc(arr, 20 * sizeof(int));\n\n// free - libera mem\u00f3ria\nfree(ptr);\nfree(arr);\nptr = NULL;  // boa pr\u00e1tica\narr = NULL;\n\n// Array din\u00e2mico\nint n = 5;\nint *numeros = (int *)malloc(n * sizeof(int));\nfor (int i = 0; i &lt; n; i++) {\n    numeros[i] = i * 10;\n}\nfree(numeros);\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#arquivos","title":"Arquivos","text":"<pre><code>#include &lt;stdio.h&gt;\n\n// Abrir arquivo\nFILE *fp = fopen(\"dados.txt\", \"r\");  // leitura\nFILE *fp = fopen(\"dados.txt\", \"w\");  // escrita (sobrescreve)\nFILE *fp = fopen(\"dados.txt\", \"a\");  // append\nFILE *fp = fopen(\"dados.txt\", \"r+\"); // leitura e escrita\n\nif (fp == NULL) {\n    printf(\"Erro ao abrir arquivo\\n\");\n    return 1;\n}\n\n// Escrever\nfprintf(fp, \"Linha %d\\n\", 1);\nfputs(\"Outra linha\\n\", fp);\nfputc('A', fp);\n\n// Ler\nchar linha[100];\nwhile (fgets(linha, sizeof(linha), fp) != NULL) {\n    printf(\"%s\", linha);\n}\n\nint num;\nfscanf(fp, \"%d\", &amp;num);\n\nint c;\nwhile ((c = fgetc(fp)) != EOF) {\n    putchar(c);\n}\n\n// Fechar\nfclose(fp);\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#pre-processador","title":"Pr\u00e9-processador","text":"<pre><code>// Include\n#include &lt;stdio.h&gt;    // biblioteca padr\u00e3o\n#include \"meuheader.h\" // arquivo local\n\n// Define\n#define PI 3.14159\n#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))\n#define QUADRADO(x) ((x) * (x))\n\n// Condicional\n#define DEBUG 1\n\n#ifdef DEBUG\n    printf(\"Debug: x = %d\\n\", x);\n#endif\n\n#ifndef HEADER_H\n#define HEADER_H\n// conte\u00fado do header\n#endif\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#erros-comuns","title":"Erros comuns","text":"<pre><code>// Array fora dos limites\nint arr[5];\narr[5] = 10;  // \u00edndice 5 n\u00e3o existe!\n\n// Usar ponteiro n\u00e3o inicializado\nint *ptr;\n*ptr = 10;  // segfault!\n\n// Esquecer de liberar mem\u00f3ria\nint *p = malloc(sizeof(int));\n// ... usar p ...\n// esqueceu free(p) = memory leak\n\n// Usar depois de free\nfree(ptr);\n*ptr = 10;  // comportamento indefinido!\n\n// Buffer overflow em strings\nchar nome[5];\nstrcpy(nome, \"Jo\u00e3o da Silva\");  // estoura o buffer!\n\n// Usar strncpy\nstrncpy(nome, \"Jo\u00e3o da Silva\", sizeof(nome) - 1);\nnome[sizeof(nome) - 1] = '\\0';\n</code></pre>"},{"location":"2025/12/10/c-refer%C3%AAncia/#links","title":"Links","text":"<ul> <li>C Reference</li> <li>Learn C</li> <li>Beej's Guide to C</li> </ul>"},{"location":"2025/12/15/ponteiros-em-c/","title":"Ponteiros em C","text":"<p>Explica\u00e7\u00e3o detalhada de ponteiros, um dos conceitos mais importantes da linguagem C.</p> <p>Pr\u00e9-requisito</p> <p>Este post assume conhecimento b\u00e1sico de C. Veja a refer\u00eancia de C para revisar o b\u00e1sico.</p>"},{"location":"2025/12/15/ponteiros-em-c/#o-que-e-um-ponteiro","title":"O que \u00e9 um ponteiro?","text":"<p>Um ponteiro \u00e9 uma vari\u00e1vel que armazena um endere\u00e7o de mem\u00f3ria. Em vez de guardar um valor diretamente (como <code>int x = 10</code>), o ponteiro guarda a localiza\u00e7\u00e3o onde esse valor est\u00e1 armazenado.</p> <pre><code>int x = 10;      // x guarda o valor 10\nint *ptr = &amp;x;   // ptr guarda o endere\u00e7o onde x est\u00e1 na mem\u00f3ria\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#por-que-usar-ponteiros","title":"Por que usar ponteiros?","text":"<ol> <li>Passar dados por refer\u00eancia - modificar vari\u00e1veis dentro de fun\u00e7\u00f5es</li> <li>Aloca\u00e7\u00e3o din\u00e2mica - criar estruturas de tamanho vari\u00e1vel em tempo de execu\u00e7\u00e3o</li> <li>Estruturas de dados - listas ligadas, \u00e1rvores, grafos</li> <li>Performance - evitar c\u00f3pia de grandes estruturas</li> <li>Arrays e strings - em C, s\u00e3o essencialmente ponteiros</li> </ol>"},{"location":"2025/12/15/ponteiros-em-c/#declaracao-e-operadores","title":"Declara\u00e7\u00e3o e operadores","text":"<pre><code>int x = 42;\nint *ptr;     // declara ponteiro para int (ainda n\u00e3o aponta para nada)\n\nptr = &amp;x;     // &amp; = \"endere\u00e7o de\" - ptr agora aponta para x\n\nprintf(\"%d\\n\", *ptr);  // * = \"valor apontado por\" - imprime 42\n</code></pre> <p>Dois operadores fundamentais:</p> Operador Nome Significado <code>&amp;</code> Endere\u00e7o de Retorna o endere\u00e7o de mem\u00f3ria de uma vari\u00e1vel <code>*</code> Desrefer\u00eancia Acessa o valor no endere\u00e7o apontado"},{"location":"2025/12/15/ponteiros-em-c/#visualizando-na-memoria","title":"Visualizando na mem\u00f3ria","text":"<pre><code>Mem\u00f3ria:\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  ...    \u2502   42    \u2502  ...    \u2502  0x100  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2191 x                  \u2191 ptr\n          0x100                0x200\n\nx est\u00e1 no endere\u00e7o 0x100 e cont\u00e9m 42\nptr est\u00e1 no endere\u00e7o 0x200 e cont\u00e9m 0x100 (o endere\u00e7o de x)\n</code></pre> <pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int x = 42;\n    int *ptr = &amp;x;\n\n    printf(\"Valor de x: %d\\n\", x);           // 42\n    printf(\"Endere\u00e7o de x: %p\\n\", &amp;x);       // 0x7fff... (varia)\n    printf(\"Valor de ptr: %p\\n\", ptr);       // mesmo endere\u00e7o\n    printf(\"Valor apontado: %d\\n\", *ptr);    // 42\n\n    return 0;\n}\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#modificando-valores-atraves-de-ponteiros","title":"Modificando valores atrav\u00e9s de ponteiros","text":"<pre><code>int x = 10;\nint *ptr = &amp;x;\n\n*ptr = 20;  // modifica x atrav\u00e9s do ponteiro\n\nprintf(\"%d\\n\", x);  // 20\n</code></pre> <p>Isso \u00e9 \u00fatil para modificar vari\u00e1veis dentro de fun\u00e7\u00f5es:</p> <pre><code>// Sem ponteiro - n\u00e3o funciona\nvoid incrementa(int n) {\n    n = n + 1;  // modifica apenas a c\u00f3pia local\n}\n\n// Com ponteiro - funciona\nvoid incrementa_ptr(int *n) {\n    *n = *n + 1;  // modifica o valor original\n}\n\nint main(void) {\n    int x = 10;\n\n    incrementa(x);\n    printf(\"%d\\n\", x);  // ainda 10\n\n    incrementa_ptr(&amp;x);\n    printf(\"%d\\n\", x);  // agora 11\n\n    return 0;\n}\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#ponteiros-e-arrays","title":"Ponteiros e arrays","text":"<p>Em C, o nome de um array \u00e9 um ponteiro para seu primeiro elemento:</p> <pre><code>int arr[] = {10, 20, 30, 40, 50};\nint *ptr = arr;  // equivalente a: int *ptr = &amp;arr[0];\n\nprintf(\"%d\\n\", *ptr);        // 10 (primeiro elemento)\nprintf(\"%d\\n\", *(ptr + 1));  // 20 (segundo elemento)\nprintf(\"%d\\n\", *(ptr + 2));  // 30 (terceiro elemento)\n\n// Nota\u00e7\u00e3o de array tamb\u00e9m funciona com ponteiros\nprintf(\"%d\\n\", ptr[0]);  // 10\nprintf(\"%d\\n\", ptr[1]);  // 20\nprintf(\"%d\\n\", ptr[2]);  // 30\n</code></pre> <p>Visualiza\u00e7\u00e3o:</p> <pre><code>arr:  [10] [20] [30] [40] [50]\n        \u2191\n       ptr\n      ptr+0  ptr+1  ptr+2  ptr+3  ptr+4\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#aritmetica-de-ponteiros","title":"Aritm\u00e9tica de ponteiros","text":"<p>Quando voc\u00ea soma 1 a um ponteiro, ele avan\u00e7a para o pr\u00f3ximo elemento do tipo, n\u00e3o para o pr\u00f3ximo byte:</p> <pre><code>int arr[] = {10, 20, 30};\nint *ptr = arr;\n\nprintf(\"%p\\n\", ptr);      // 0x100 (exemplo)\nprintf(\"%p\\n\", ptr + 1);  // 0x104 (avan\u00e7a 4 bytes, tamanho de int)\nprintf(\"%p\\n\", ptr + 2);  // 0x108\n\n// Diferen\u00e7a entre ponteiros\nint *inicio = &amp;arr[0];\nint *fim = &amp;arr[2];\nprintf(\"%ld\\n\", fim - inicio);  // 2 (elementos, n\u00e3o bytes)\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#ponteiros-para-ponteiros","title":"Ponteiros para ponteiros","text":"<p>Um ponteiro pode apontar para outro ponteiro:</p> <pre><code>int x = 10;\nint *ptr = &amp;x;      // ponteiro para int\nint **pptr = &amp;ptr;  // ponteiro para ponteiro para int\n\nprintf(\"%d\\n\", x);       // 10\nprintf(\"%d\\n\", *ptr);    // 10\nprintf(\"%d\\n\", **pptr);  // 10\n\n**pptr = 20;  // modifica x\nprintf(\"%d\\n\", x);  // 20\n</code></pre> <p>Visualiza\u00e7\u00e3o:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 10  \u2502 \u2190\u2500\u2500 \u25020x100\u2502 \u2190\u2500\u2500 \u25020x200\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2518\n   x          ptr         pptr\n 0x100       0x200       0x300\n</code></pre> <p>Uso comum: modificar um ponteiro dentro de uma fun\u00e7\u00e3o:</p> <pre><code>void aloca(int **ptr) {\n    *ptr = malloc(sizeof(int));\n    **ptr = 42;\n}\n\nint main(void) {\n    int *p = NULL;\n    aloca(&amp;p);\n    printf(\"%d\\n\", *p);  // 42\n    free(p);\n    return 0;\n}\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#ponteiros-e-strings","title":"Ponteiros e strings","text":"<p>Strings em C s\u00e3o arrays de <code>char</code> terminados em <code>\\0</code>. Podem ser manipuladas com ponteiros:</p> <pre><code>char str[] = \"Hello\";\nchar *ptr = str;\n\nwhile (*ptr != '\\0') {\n    printf(\"%c\", *ptr);\n    ptr++;\n}\n// Imprime: Hello\n</code></pre> <p>Diferen\u00e7a importante:</p> <pre><code>char arr[] = \"Hello\";   // array - pode modificar\nchar *ptr = \"Hello\";    // ponteiro para literal - N\u00c3O modifique\n\narr[0] = 'J';  // OK: arr agora \u00e9 \"Jello\"\nptr[0] = 'J';  // ERRADO: comportamento indefinido (literal \u00e9 read-only)\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#ponteiros-para-funcoes","title":"Ponteiros para fun\u00e7\u00f5es","text":"<p>Fun\u00e7\u00f5es tamb\u00e9m t\u00eam endere\u00e7os. Ponteiros para fun\u00e7\u00f5es permitem passar fun\u00e7\u00f5es como argumentos:</p> <pre><code>#include &lt;stdio.h&gt;\n\nint soma(int a, int b) { return a + b; }\nint mult(int a, int b) { return a * b; }\n\n// Fun\u00e7\u00e3o que recebe ponteiro para fun\u00e7\u00e3o\nint opera(int x, int y, int (*func)(int, int)) {\n    return func(x, y);\n}\n\nint main(void) {\n    int (*ptr)(int, int);  // declara ponteiro para fun\u00e7\u00e3o\n\n    ptr = soma;\n    printf(\"%d\\n\", ptr(3, 4));  // 7\n\n    ptr = mult;\n    printf(\"%d\\n\", ptr(3, 4));  // 12\n\n    // Usando a fun\u00e7\u00e3o opera\n    printf(\"%d\\n\", opera(5, 3, soma));  // 8\n    printf(\"%d\\n\", opera(5, 3, mult));  // 15\n\n    return 0;\n}\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#ponteiros-e-structs","title":"Ponteiros e structs","text":"<p>Acessar membros de struct atrav\u00e9s de ponteiro:</p> <pre><code>struct Pessoa {\n    char nome[50];\n    int idade;\n};\n\nstruct Pessoa p = {\"Maria\", 25};\nstruct Pessoa *ptr = &amp;p;\n\n// Duas formas equivalentes de acessar membros:\nprintf(\"%s\\n\", (*ptr).nome);  // Maria\nprintf(\"%s\\n\", ptr-&gt;nome);    // Maria (mais comum)\n\nptr-&gt;idade = 26;  // modifica p.idade\n</code></pre> <p>O operador <code>-&gt;</code> \u00e9 a\u00e7\u00facar sint\u00e1tico para <code>(*ptr).membro</code>.</p>"},{"location":"2025/12/15/ponteiros-em-c/#ponteiro-nulo-e-ponteiro-void","title":"Ponteiro nulo e ponteiro void","text":"<pre><code>// Ponteiro nulo - n\u00e3o aponta para nada\nint *ptr = NULL;\n\nif (ptr == NULL) {\n    printf(\"Ponteiro nulo\\n\");\n}\n\n// Sempre verifique antes de desreferenciar\nif (ptr != NULL) {\n    printf(\"%d\\n\", *ptr);\n}\n</code></pre> <pre><code>// Ponteiro void - ponteiro gen\u00e9rico\nvoid *generic;\nint x = 10;\nfloat f = 3.14;\n\ngeneric = &amp;x;\nprintf(\"%d\\n\", *(int *)generic);  // cast necess\u00e1rio\n\ngeneric = &amp;f;\nprintf(\"%.2f\\n\", *(float *)generic);\n</code></pre> <p><code>void *</code> \u00e9 usado em fun\u00e7\u00f5es gen\u00e9ricas como <code>malloc</code>, <code>qsort</code>, <code>bsearch</code>.</p>"},{"location":"2025/12/15/ponteiros-em-c/#alocacao-dinamica","title":"Aloca\u00e7\u00e3o din\u00e2mica","text":"<p>Ponteiros s\u00e3o essenciais para alocar mem\u00f3ria em tempo de execu\u00e7\u00e3o:</p> <pre><code>#include &lt;stdlib.h&gt;\n\n// Alocar um int\nint *ptr = malloc(sizeof(int));\nif (ptr == NULL) {\n    // erro de aloca\u00e7\u00e3o\n    return 1;\n}\n*ptr = 42;\nfree(ptr);\n\n// Alocar array de 10 ints\nint *arr = malloc(10 * sizeof(int));\nfor (int i = 0; i &lt; 10; i++) {\n    arr[i] = i * 10;\n}\nfree(arr);\n\n// calloc - aloca e zera a mem\u00f3ria\nint *zeros = calloc(10, sizeof(int));  // 10 ints, todos 0\nfree(zeros);\n\n// realloc - redimensiona\nint *nums = malloc(5 * sizeof(int));\nnums = realloc(nums, 10 * sizeof(int));  // agora tem espa\u00e7o para 10\nfree(nums);\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#erros-comuns","title":"Erros comuns","text":""},{"location":"2025/12/15/ponteiros-em-c/#desreferenciar-ponteiro-nao-inicializado","title":"Desreferenciar ponteiro n\u00e3o inicializado","text":"<pre><code>int *ptr;      // aponta para lixo\n*ptr = 10;     // ERRO: segmentation fault\n</code></pre> <p>Solu\u00e7\u00e3o: sempre inicialize ponteiros:</p> <pre><code>int *ptr = NULL;  // ou aponte para algo v\u00e1lido\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#usar-depois-de-free-use-after-free","title":"Usar depois de free (use-after-free)","text":"<pre><code>int *ptr = malloc(sizeof(int));\n*ptr = 42;\nfree(ptr);\n*ptr = 10;     // ERRO: mem\u00f3ria j\u00e1 foi liberada\n</code></pre> <p>Solu\u00e7\u00e3o: atribua NULL ap\u00f3s free:</p> <pre><code>free(ptr);\nptr = NULL;\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#vazamento-de-memoria-memory-leak","title":"Vazamento de mem\u00f3ria (memory leak)","text":"<pre><code>void funcao(void) {\n    int *ptr = malloc(sizeof(int));\n    // esqueceu de chamar free(ptr)\n}  // ptr sai de escopo, mem\u00f3ria vazou\n</code></pre> <p>Solu\u00e7\u00e3o: sempre libere mem\u00f3ria alocada:</p> <pre><code>void funcao(void) {\n    int *ptr = malloc(sizeof(int));\n    // usar ptr...\n    free(ptr);\n}\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#retornar-ponteiro-para-variavel-local","title":"Retornar ponteiro para vari\u00e1vel local","text":"<pre><code>int *funcao(void) {\n    int x = 10;\n    return &amp;x;  // ERRO: x n\u00e3o existe mais ap\u00f3s a fun\u00e7\u00e3o retornar\n}\n</code></pre> <p>Solu\u00e7\u00e3o: use aloca\u00e7\u00e3o din\u00e2mica ou vari\u00e1vel est\u00e1tica:</p> <pre><code>int *funcao(void) {\n    int *ptr = malloc(sizeof(int));\n    *ptr = 10;\n    return ptr;  // OK, mas quem chamar deve dar free\n}\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#exemplo-lista-ligada-simples","title":"Exemplo: lista ligada simples","text":"<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Node {\n    int valor;\n    struct Node *proximo;\n};\n\n// Inserir no in\u00edcio\nvoid inserir(struct Node **cabeca, int valor) {\n    struct Node *novo = malloc(sizeof(struct Node));\n    novo-&gt;valor = valor;\n    novo-&gt;proximo = *cabeca;\n    *cabeca = novo;\n}\n\n// Imprimir lista\nvoid imprimir(struct Node *cabeca) {\n    struct Node *atual = cabeca;\n    while (atual != NULL) {\n        printf(\"%d -&gt; \", atual-&gt;valor);\n        atual = atual-&gt;proximo;\n    }\n    printf(\"NULL\\n\");\n}\n\n// Liberar lista\nvoid liberar(struct Node *cabeca) {\n    struct Node *atual = cabeca;\n    while (atual != NULL) {\n        struct Node *temp = atual;\n        atual = atual-&gt;proximo;\n        free(temp);\n    }\n}\n\nint main(void) {\n    struct Node *lista = NULL;\n\n    inserir(&amp;lista, 30);\n    inserir(&amp;lista, 20);\n    inserir(&amp;lista, 10);\n\n    imprimir(lista);  // 10 -&gt; 20 -&gt; 30 -&gt; NULL\n\n    liberar(lista);\n    return 0;\n}\n</code></pre>"},{"location":"2025/12/15/ponteiros-em-c/#resumo","title":"Resumo","text":"Conceito Sintaxe Significado Declarar ponteiro <code>int *ptr;</code> Ponteiro para int Endere\u00e7o de <code>&amp;x</code> Obt\u00e9m endere\u00e7o de x Desrefer\u00eancia <code>*ptr</code> Valor apontado por ptr Ponteiro nulo <code>NULL</code> N\u00e3o aponta para nada Ponteiro para ponteiro <code>int **pptr;</code> Ponteiro para ponteiro Membro via ponteiro <code>ptr-&gt;membro</code> Acessa membro de struct Aritm\u00e9tica <code>ptr + n</code> Avan\u00e7a n elementos"},{"location":"2025/12/15/ponteiros-em-c/#links","title":"Links","text":"<ul> <li>C Reference - Pointers</li> <li>Beej's Guide - Pointers</li> </ul>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/","title":"C# 10: refer\u00eancia","text":"<p>Sintaxe e padr\u00f5es modernos do C# 10 (.NET 6+).</p>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#tipos-basicos","title":"Tipos b\u00e1sicos","text":"<pre><code>// Inteiros\nbyte b = 255;              // 0 a 255\nshort s = 32767;           // -32k a 32k\nint i = 2147483647;        // -2bi a 2bi\nlong l = 9223372036854775807L;\n\n// Decimais\nfloat f = 3.14f;           // 7 d\u00edgitos\ndouble d = 3.14159265359;  // 15-16 d\u00edgitos\ndecimal m = 19.99m;        // 28-29 d\u00edgitos (dinheiro)\n\n// Outros\nbool flag = true;\nchar c = 'A';\nstring texto = \"Hello\";\n\n// Nullable\nint? nullable = null;\nstring? nullableStr = null;\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#strings","title":"Strings","text":"<pre><code>// Interpola\u00e7\u00e3o\nstring nome = \"Jo\u00e3o\";\nstring msg = $\"Ol\u00e1, {nome}!\";\n\n// Verbatim (escapa \\ automaticamente)\nstring path = @\"C:\\Users\\Jo\u00e3o\";\n\n// Raw string literals (C# 11+)\nstring json = \"\"\"\n    {\n        \"nome\": \"Jo\u00e3o\",\n        \"idade\": 30\n    }\n    \"\"\";\n\n// M\u00e9todos \u00fateis\nstr.ToUpper();\nstr.ToLower();\nstr.Trim();\nstr.Split(',');\nstr.Contains(\"texto\");\nstr.StartsWith(\"pre\");\nstr.Replace(\"old\", \"new\");\nstring.IsNullOrEmpty(str);\nstring.IsNullOrWhiteSpace(str);\nstring.Join(\", \", lista);\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#file-scoped-namespace","title":"File-scoped namespace","text":"<pre><code>// Antes (C# 9)\nnamespace MeuProjeto.Services\n{\n    public class UserService\n    {\n        // ...\n    }\n}\n\n// C# 10+\nnamespace MeuProjeto.Services;\n\npublic class UserService\n{\n    // ...\n}\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#global-usings","title":"Global usings","text":"<pre><code>// GlobalUsings.cs (ou qualquer arquivo)\nglobal using System;\nglobal using System.Collections.Generic;\nglobal using System.Linq;\nglobal using System.Threading.Tasks;\nglobal using MeuProjeto.Models;\n\n// Agora dispon\u00edvel em todos os arquivos do projeto\n</code></pre> <p>Implicit usings</p> <p>No .NET 6+, habilite <code>&lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;</code> no <code>.csproj</code> para usings autom\u00e1ticos.</p>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#records","title":"Records","text":"<pre><code>// Record class (refer\u00eancia, imut\u00e1vel por padr\u00e3o)\npublic record Person(string Name, int Age);\n\n// Uso\nvar pessoa = new Person(\"Jo\u00e3o\", 30);\nvar outra = pessoa with { Age = 31 };  // cria c\u00f3pia modificada\n\n// Igualdade por valor\nvar p1 = new Person(\"Jo\u00e3o\", 30);\nvar p2 = new Person(\"Jo\u00e3o\", 30);\nConsole.WriteLine(p1 == p2);  // true\n\n// Record struct (C# 10)\npublic readonly record struct Point(int X, int Y);\n\n// Record com corpo\npublic record Person(string Name, int Age)\n{\n    public string Greeting =&gt; $\"Ol\u00e1, {Name}!\";\n}\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#classes-e-structs","title":"Classes e structs","text":"<pre><code>public class User\n{\n    // Propriedades\n    public int Id { get; set; }\n    public string Name { get; set; } = \"\";\n    public string? Email { get; set; }\n\n    // Init-only (imut\u00e1vel ap\u00f3s constru\u00e7\u00e3o)\n    public DateTime CreatedAt { get; init; }\n\n    // Computed property\n    public bool HasEmail =&gt; !string.IsNullOrEmpty(Email);\n\n    // Construtor\n    public User(int id, string name)\n    {\n        Id = id;\n        Name = name;\n        CreatedAt = DateTime.UtcNow;\n    }\n\n    // M\u00e9todos\n    public void UpdateEmail(string email) =&gt; Email = email;\n}\n\n// Struct\npublic struct Coordinate\n{\n    public double Lat { get; init; }\n    public double Lon { get; init; }\n}\n\n// Readonly struct (totalmente imut\u00e1vel)\npublic readonly struct Money\n{\n    public decimal Amount { get; }\n    public string Currency { get; }\n\n    public Money(decimal amount, string currency)\n    {\n        Amount = amount;\n        Currency = currency;\n    }\n}\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#pattern-matching","title":"Pattern matching","text":"<pre><code>// is pattern\nif (obj is string s)\n{\n    Console.WriteLine(s.ToUpper());\n}\n\n// switch expression\nstring GetStatus(int code) =&gt; code switch\n{\n    200 =&gt; \"OK\",\n    201 =&gt; \"Created\",\n    400 =&gt; \"Bad Request\",\n    404 =&gt; \"Not Found\",\n    &gt;= 500 and &lt; 600 =&gt; \"Server Error\",\n    _ =&gt; \"Unknown\"\n};\n\n// Property pattern\nstring GetDiscount(User user) =&gt; user switch\n{\n    { Age: &lt; 18 } =&gt; \"10%\",\n    { Age: &gt;= 65 } =&gt; \"15%\",\n    { IsPremium: true } =&gt; \"20%\",\n    _ =&gt; \"0%\"\n};\n\n// Tuple pattern\nstring GetQuadrant(int x, int y) =&gt; (x, y) switch\n{\n    ( &gt; 0, &gt; 0) =&gt; \"Q1\",\n    ( &lt; 0, &gt; 0) =&gt; \"Q2\",\n    ( &lt; 0, &lt; 0) =&gt; \"Q3\",\n    ( &gt; 0, &lt; 0) =&gt; \"Q4\",\n    _ =&gt; \"Origin or Axis\"\n};\n\n// List patterns (C# 11+)\nint[] numbers = { 1, 2, 3 };\nif (numbers is [1, 2, 3])\n{\n    Console.WriteLine(\"Match!\");\n}\n\nif (numbers is [var first, .., var last])\n{\n    Console.WriteLine($\"First: {first}, Last: {last}\");\n}\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#null-handling","title":"Null handling","text":"<pre><code>// Null-conditional\nstring? nome = pessoa?.Nome;\nint? tamanho = lista?.Count;\n\n// Null-coalescing\nstring valor = texto ?? \"default\";\nlista ??= new List&lt;string&gt;();  // atribui se null\n\n// Null-forgiving (quando voc\u00ea sabe que n\u00e3o \u00e9 null)\nstring nome = pessoa!.Nome;\n\n// Required (C# 11+)\npublic class User\n{\n    public required string Name { get; set; }\n}\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#collections","title":"Collections","text":"<pre><code>// List\nvar lista = new List&lt;int&gt; { 1, 2, 3 };\nlista.Add(4);\nlista.Remove(2);\nlista.Contains(3);\n\n// Dictionary\nvar dict = new Dictionary&lt;string, int&gt;\n{\n    [\"um\"] = 1,\n    [\"dois\"] = 2\n};\ndict.TryGetValue(\"um\", out var valor);\n\n// HashSet\nvar set = new HashSet&lt;string&gt; { \"a\", \"b\" };\nset.Add(\"c\");\nset.Contains(\"a\");\n\n// Array\nint[] arr = { 1, 2, 3 };\nint[] arr2 = new int[10];\nvar span = arr.AsSpan();\n\n// Range e Index\nint[] nums = { 0, 1, 2, 3, 4, 5 };\nvar last = nums[^1];       // 5 (\u00faltimo)\nvar slice = nums[1..4];    // { 1, 2, 3 }\nvar fromEnd = nums[^3..];  // { 3, 4, 5 }\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#linq","title":"LINQ","text":"<pre><code>var users = new List&lt;User&gt;();\n\n// Query syntax\nvar adults = from u in users\n             where u.Age &gt;= 18\n             orderby u.Name\n             select u;\n\n// Method syntax (preferido)\nvar adults = users\n    .Where(u =&gt; u.Age &gt;= 18)\n    .OrderBy(u =&gt; u.Name)\n    .ToList();\n\n// M\u00e9todos comuns\nusers.Where(u =&gt; u.Active);\nusers.Select(u =&gt; u.Name);\nusers.OrderBy(u =&gt; u.Name);\nusers.OrderByDescending(u =&gt; u.Age);\nusers.First();\nusers.FirstOrDefault();\nusers.Single();\nusers.SingleOrDefault();\nusers.Any(u =&gt; u.Admin);\nusers.All(u =&gt; u.Active);\nusers.Count();\nusers.Sum(u =&gt; u.Score);\nusers.Average(u =&gt; u.Age);\nusers.Max(u =&gt; u.Age);\nusers.Min(u =&gt; u.Age);\nusers.GroupBy(u =&gt; u.Department);\nusers.Distinct();\nusers.Take(10);\nusers.Skip(5);\nusers.ToList();\nusers.ToArray();\nusers.ToDictionary(u =&gt; u.Id);\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#asyncawait","title":"Async/Await","text":"<pre><code>// M\u00e9todo async\npublic async Task&lt;User&gt; GetUserAsync(int id)\n{\n    var response = await httpClient.GetAsync($\"/users/{id}\");\n    response.EnsureSuccessStatusCode();\n    return await response.Content.ReadFromJsonAsync&lt;User&gt;();\n}\n\n// Async void (apenas para event handlers)\nprivate async void Button_Click(object sender, EventArgs e)\n{\n    await DoSomethingAsync();\n}\n\n// Task.WhenAll (paralelo)\nvar tasks = ids.Select(id =&gt; GetUserAsync(id));\nvar users = await Task.WhenAll(tasks);\n\n// Task.WhenAny (primeiro a completar)\nvar first = await Task.WhenAny(task1, task2);\n\n// ConfigureAwait (libraries)\nawait SomeAsync().ConfigureAwait(false);\n\n// Cancelamento\npublic async Task DoWork(CancellationToken ct)\n{\n    while (!ct.IsCancellationRequested)\n    {\n        await Task.Delay(1000, ct);\n    }\n}\n\n// ValueTask (performance)\npublic ValueTask&lt;int&gt; GetCachedValueAsync()\n{\n    if (_cache.TryGetValue(key, out var value))\n        return ValueTask.FromResult(value);\n\n    return new ValueTask&lt;int&gt;(FetchValueAsync());\n}\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#lambdas-e-delegates","title":"Lambdas e delegates","text":"<pre><code>// Lambda\nFunc&lt;int, int&gt; dobro = x =&gt; x * 2;\nFunc&lt;int, int, int&gt; soma = (a, b) =&gt; a + b;\nAction&lt;string&gt; print = msg =&gt; Console.WriteLine(msg);\n\n// Lambda com tipo expl\u00edcito (C# 10)\nvar parse = (string s) =&gt; int.Parse(s);\n\n// Lambda com atributos (C# 10)\nvar validate = [Required] (string s) =&gt; s.Length &gt; 0;\n\n// Delegate\npublic delegate void Callback(string message);\nCallback cb = msg =&gt; Console.WriteLine(msg);\n\n// Events\npublic event EventHandler&lt;UserEventArgs&gt;? UserCreated;\nUserCreated?.Invoke(this, new UserEventArgs(user));\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#generics","title":"Generics","text":"<pre><code>// Classe gen\u00e9rica\npublic class Repository&lt;T&gt; where T : class\n{\n    private readonly List&lt;T&gt; _items = new();\n\n    public void Add(T item) =&gt; _items.Add(item);\n    public T? GetById(int id) =&gt; _items.FirstOrDefault();\n}\n\n// M\u00e9todo gen\u00e9rico\npublic T Parse&lt;T&gt;(string json) where T : new()\n{\n    return JsonSerializer.Deserialize&lt;T&gt;(json) ?? new T();\n}\n\n// Constraints\nwhere T : class          // tipo refer\u00eancia\nwhere T : struct         // tipo valor\nwhere T : new()          // construtor sem par\u00e2metros\nwhere T : BaseClass      // herda de\nwhere T : IInterface     // implementa\nwhere T : notnull        // n\u00e3o-nulo\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#interfaces","title":"Interfaces","text":"<pre><code>public interface IRepository&lt;T&gt;\n{\n    Task&lt;T?&gt; GetByIdAsync(int id);\n    Task&lt;IEnumerable&lt;T&gt;&gt; GetAllAsync();\n    Task AddAsync(T entity);\n    Task UpdateAsync(T entity);\n    Task DeleteAsync(int id);\n}\n\n// Default interface methods (C# 8+)\npublic interface ILogger\n{\n    void Log(string message);\n\n    void LogError(string message) =&gt; Log($\"ERROR: {message}\");\n    void LogWarning(string message) =&gt; Log($\"WARN: {message}\");\n}\n\n// Implementa\u00e7\u00e3o\npublic class UserRepository : IRepository&lt;User&gt;\n{\n    public async Task&lt;User?&gt; GetByIdAsync(int id)\n    {\n        // implementa\u00e7\u00e3o\n    }\n    // ...\n}\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#exception-handling","title":"Exception handling","text":"<pre><code>try\n{\n    var result = await ProcessAsync();\n}\ncatch (HttpRequestException ex) when (ex.StatusCode == HttpStatusCode.NotFound)\n{\n    // 404 espec\u00edfico\n}\ncatch (HttpRequestException ex)\n{\n    logger.LogError(ex, \"HTTP error\");\n    throw;  // re-throw mantendo stack trace\n}\ncatch (Exception ex)\n{\n    logger.LogError(ex, \"Unexpected error\");\n    throw new ApplicationException(\"Failed to process\", ex);\n}\nfinally\n{\n    // sempre executa\n}\n\n// Throw expression\nvar user = await GetUserAsync(id) ?? throw new NotFoundException();\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#dependency-injection","title":"Dependency Injection","text":"<pre><code>// Program.cs (.NET 6+)\nvar builder = WebApplication.CreateBuilder(args);\n\n// Registrar servi\u00e7os\nbuilder.Services.AddScoped&lt;IUserService, UserService&gt;();\nbuilder.Services.AddSingleton&lt;ICacheService, CacheService&gt;();\nbuilder.Services.AddTransient&lt;IEmailService, EmailService&gt;();\n\n// Com factory\nbuilder.Services.AddScoped&lt;IDbConnection&gt;(sp =&gt;\n    new SqlConnection(builder.Configuration.GetConnectionString(\"Default\")));\n\nvar app = builder.Build();\n\n// Inje\u00e7\u00e3o via construtor\npublic class UserController\n{\n    private readonly IUserService _userService;\n\n    public UserController(IUserService userService)\n    {\n        _userService = userService;\n    }\n}\n\n// Primary constructor (C# 12+)\npublic class UserController(IUserService userService)\n{\n    public async Task&lt;User&gt; Get(int id) =&gt; await userService.GetAsync(id);\n}\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#minimal-api-net-6","title":"Minimal API (.NET 6+)","text":"<pre><code>var builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\napp.MapGet(\"/\", () =&gt; \"Hello World!\");\n\napp.MapGet(\"/users/{id}\", async (int id, IUserService service) =&gt;\n{\n    var user = await service.GetByIdAsync(id);\n    return user is not null ? Results.Ok(user) : Results.NotFound();\n});\n\napp.MapPost(\"/users\", async (User user, IUserService service) =&gt;\n{\n    await service.CreateAsync(user);\n    return Results.Created($\"/users/{user.Id}\", user);\n});\n\napp.MapPut(\"/users/{id}\", async (int id, User user, IUserService service) =&gt;\n{\n    await service.UpdateAsync(id, user);\n    return Results.NoContent();\n});\n\napp.MapDelete(\"/users/{id}\", async (int id, IUserService service) =&gt;\n{\n    await service.DeleteAsync(id);\n    return Results.NoContent();\n});\n\napp.Run();\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#entity-framework-core","title":"Entity Framework Core","text":"<pre><code>// DbContext\npublic class AppDbContext : DbContext\n{\n    public DbSet&lt;User&gt; Users =&gt; Set&lt;User&gt;();\n    public DbSet&lt;Order&gt; Orders =&gt; Set&lt;Order&gt;();\n\n    public AppDbContext(DbContextOptions&lt;AppDbContext&gt; options)\n        : base(options) { }\n\n    protected override void OnModelCreating(ModelBuilder modelBuilder)\n    {\n        modelBuilder.Entity&lt;User&gt;(e =&gt;\n        {\n            e.HasKey(u =&gt; u.Id);\n            e.Property(u =&gt; u.Name).IsRequired().HasMaxLength(100);\n            e.HasMany(u =&gt; u.Orders).WithOne(o =&gt; o.User);\n        });\n    }\n}\n\n// Queries\nvar users = await context.Users\n    .Where(u =&gt; u.Active)\n    .Include(u =&gt; u.Orders)\n    .OrderBy(u =&gt; u.Name)\n    .ToListAsync();\n\nvar user = await context.Users.FindAsync(id);\n\n// Insert\ncontext.Users.Add(new User { Name = \"Jo\u00e3o\" });\nawait context.SaveChangesAsync();\n\n// Update\nuser.Name = \"Jo\u00e3o Silva\";\nawait context.SaveChangesAsync();\n\n// Delete\ncontext.Users.Remove(user);\nawait context.SaveChangesAsync();\n\n// Raw SQL\nvar users = await context.Users\n    .FromSqlRaw(\"SELECT * FROM Users WHERE Active = 1\")\n    .ToListAsync();\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#configuracao","title":"Configura\u00e7\u00e3o","text":"<pre><code>// appsettings.json\n{\n    \"ConnectionStrings\": {\n        \"Default\": \"Server=localhost;Database=App;...\"\n    },\n    \"AppSettings\": {\n        \"ApiKey\": \"xxx\",\n        \"MaxRetries\": 3\n    }\n}\n\n// Classe de configura\u00e7\u00e3o\npublic class AppSettings\n{\n    public string ApiKey { get; set; } = \"\";\n    public int MaxRetries { get; set; }\n}\n\n// Program.cs\nbuilder.Services.Configure&lt;AppSettings&gt;(\n    builder.Configuration.GetSection(\"AppSettings\"));\n\n// Uso\npublic class MyService\n{\n    private readonly AppSettings _settings;\n\n    public MyService(IOptions&lt;AppSettings&gt; options)\n    {\n        _settings = options.Value;\n    }\n}\n\n// Direto\nvar connectionString = builder.Configuration.GetConnectionString(\"Default\");\nvar apiKey = builder.Configuration[\"AppSettings:ApiKey\"];\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#testes-xunit","title":"Testes (xUnit)","text":"<pre><code>public class UserServiceTests\n{\n    private readonly Mock&lt;IUserRepository&gt; _repoMock;\n    private readonly UserService _service;\n\n    public UserServiceTests()\n    {\n        _repoMock = new Mock&lt;IUserRepository&gt;();\n        _service = new UserService(_repoMock.Object);\n    }\n\n    [Fact]\n    public async Task GetById_ReturnsUser_WhenExists()\n    {\n        // Arrange\n        var user = new User { Id = 1, Name = \"Jo\u00e3o\" };\n        _repoMock.Setup(r =&gt; r.GetByIdAsync(1))\n            .ReturnsAsync(user);\n\n        // Act\n        var result = await _service.GetByIdAsync(1);\n\n        // Assert\n        Assert.NotNull(result);\n        Assert.Equal(\"Jo\u00e3o\", result.Name);\n    }\n\n    [Theory]\n    [InlineData(1, true)]\n    [InlineData(0, false)]\n    [InlineData(-1, false)]\n    public void IsValidId_ReturnsExpected(int id, bool expected)\n    {\n        var result = _service.IsValidId(id);\n        Assert.Equal(expected, result);\n    }\n}\n</code></pre>"},{"location":"2026/01/18/c-10-refer%C3%AAncia/#links","title":"Links","text":"<ul> <li>C# Docs</li> <li>.NET API Browser</li> <li>C# Cheatsheet</li> </ul>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/","title":"dbt: refer\u00eancia","text":"<p>Ferramenta de transforma\u00e7\u00e3o de dados usando SQL. Faz o T do ELT, assumindo que os dados j\u00e1 est\u00e3o no warehouse.</p>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#o-que-e","title":"O que \u00e9","text":"<p>dbt (data build tool) transforma dados no warehouse usando SQL SELECT. Gerencia depend\u00eancias entre modelos, testa qualidade dos dados e gera documenta\u00e7\u00e3o automaticamente.</p>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#que-problemas-resolve","title":"Que problemas resolve","text":"<ul> <li>Modularidade: SQL organizado em modelos reutiliz\u00e1veis</li> <li>Depend\u00eancias: ordem de execu\u00e7\u00e3o autom\u00e1tica baseada em <code>ref()</code></li> <li>Testes: validar qualidade dos dados (unique, not_null, etc.)</li> <li>Documenta\u00e7\u00e3o: gerada a partir dos schemas YAML</li> <li>Versionamento: tudo no Git, CI/CD padr\u00e3o</li> <li>Materializa\u00e7\u00e3o: views, tables, incremental sem c\u00f3digo extra</li> </ul>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#instalacao","title":"Instala\u00e7\u00e3o","text":"<pre><code># Com uv\nuv add dbt-core\n\n# Com pip\npip install dbt-core\n</code></pre> <p>Adapters dispon\u00edveis: <code>dbt-bigquery</code>, <code>dbt-snowflake</code>, <code>dbt-redshift</code>, <code>dbt-postgres</code>, <code>dbt-databricks</code>, <code>dbt-duckdb</code>.</p>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#estrutura-de-projeto","title":"Estrutura de projeto","text":"<pre><code>dbt init meu_projeto\n</code></pre> <pre><code>meu_projeto/\n\u251c\u2500\u2500 dbt_project.yml      # Configura\u00e7\u00e3o do projeto\n\u251c\u2500\u2500 profiles.yml         # Conex\u00f5es (normalmente em ~/.dbt/)\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 staging/         # Limpeza inicial\n\u2502   \u2502   \u251c\u2500\u2500 _sources.yml\n\u2502   \u2502   \u251c\u2500\u2500 _schema.yml\n\u2502   \u2502   \u2514\u2500\u2500 stg_orders.sql\n\u2502   \u2514\u2500\u2500 marts/           # Modelos finais\n\u2502       \u251c\u2500\u2500 _schema.yml\n\u2502       \u2514\u2500\u2500 dim_customers.sql\n\u251c\u2500\u2500 tests/               # Testes customizados\n\u251c\u2500\u2500 macros/              # Fun\u00e7\u00f5es SQL reutiliz\u00e1veis\n\u251c\u2500\u2500 seeds/               # CSVs para carregar\n\u2514\u2500\u2500 snapshots/           # SCD Type 2\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#dbt_projectyml","title":"dbt_project.yml","text":"<pre><code>name: 'meu_projeto'\nversion: '1.0.0'\nprofile: 'meu_projeto'\n\nmodel-paths: [\"models\"]\ntest-paths: [\"tests\"]\nmacro-paths: [\"macros\"]\nseed-paths: [\"seeds\"]\nsnapshot-paths: [\"snapshots\"]\n\nmodels:\n  meu_projeto:\n    staging:\n      +materialized: view\n      +schema: staging\n    marts:\n      +materialized: table\n      +schema: analytics\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#profilesyml","title":"profiles.yml","text":"<pre><code># ~/.dbt/profiles.yml\nmeu_projeto:\n  target: dev\n  outputs:\n    dev:\n      type: bigquery\n      method: oauth\n      project: meu-projeto-gcp\n      dataset: dbt_dev\n      threads: 4\n    prod:\n      type: bigquery\n      method: service-account\n      project: meu-projeto-gcp\n      dataset: analytics\n      keyfile: /path/to/keyfile.json\n      threads: 8\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#sources","title":"Sources","text":"<p>Definir fontes de dados raw:</p> <pre><code># models/staging/_sources.yml\nversion: 2\n\nsources:\n  - name: raw\n    database: meu_projeto\n    schema: raw_data\n    freshness:\n      warn_after: {count: 12, period: hour}\n      error_after: {count: 24, period: hour}\n    tables:\n      - name: orders\n        loaded_at_field: _loaded_at\n        description: Pedidos brutos do sistema\n        columns:\n          - name: id\n            description: ID do pedido\n      - name: customers\n</code></pre> <p>Uso: <code>{{ source('raw', 'orders') }}</code></p>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#modelos","title":"Modelos","text":""},{"location":"2025/08/20/dbt-refer%C3%AAncia/#staging","title":"Staging","text":"<p>Limpeza e padroniza\u00e7\u00e3o:</p> <pre><code>-- models/staging/stg_orders.sql\nselect\n    id as order_id,\n    user_id as customer_id,\n    cast(created_at as timestamp) as ordered_at,\n    lower(status) as status,\n    total_cents / 100.0 as total_amount\nfrom {{ source('raw', 'orders') }}\nwhere id is not null\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#marts","title":"Marts","text":"<p>Modelos anal\u00edticos finais:</p> <pre><code>-- models/marts/dim_customers.sql\nwith customers as (\n    select * from {{ ref('stg_customers') }}\n),\n\norders as (\n    select * from {{ ref('stg_orders') }}\n),\n\ncustomer_orders as (\n    select\n        customer_id,\n        count(*) as total_orders,\n        sum(total_amount) as lifetime_value,\n        min(ordered_at) as first_order_at,\n        max(ordered_at) as last_order_at\n    from orders\n    group by 1\n)\n\nselect\n    c.customer_id,\n    c.name,\n    c.email,\n    c.created_at,\n    coalesce(co.total_orders, 0) as total_orders,\n    coalesce(co.lifetime_value, 0) as lifetime_value,\n    co.first_order_at,\n    co.last_order_at\nfrom customers c\nleft join customer_orders co using (customer_id)\n</code></pre> <p><code>{{ ref('model_name') }}</code> cria depend\u00eancia autom\u00e1tica.</p>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#materializations","title":"Materializations","text":"<pre><code>-- View (padr\u00e3o)\n{{ config(materialized='view') }}\n\n-- Tabela\n{{ config(materialized='table') }}\n\n-- Ephemeral (CTE, n\u00e3o cria objeto)\n{{ config(materialized='ephemeral') }}\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#incremental","title":"Incremental","text":"<p>Processa apenas dados novos:</p> <pre><code>{{ config(\n    materialized='incremental',\n    unique_key='order_id',\n    incremental_strategy='merge'  -- ou delete+insert\n) }}\n\nselect\n    order_id,\n    customer_id,\n    ordered_at,\n    total_amount,\n    updated_at\nfrom {{ source('raw', 'orders') }}\n\n{% if is_incremental() %}\nwhere updated_at &gt; (select max(updated_at) from {{ this }})\n{% endif %}\n</code></pre> <p>Estrat\u00e9gias: <code>merge</code>, <code>delete+insert</code>, <code>insert_overwrite</code>, <code>append</code>.</p>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#testes","title":"Testes","text":""},{"location":"2025/08/20/dbt-refer%C3%AAncia/#schema-tests-genericos","title":"Schema tests (gen\u00e9ricos)","text":"<pre><code># models/staging/_schema.yml\nversion: 2\n\nmodels:\n  - name: stg_orders\n    columns:\n      - name: order_id\n        tests:\n          - unique\n          - not_null\n      - name: status\n        tests:\n          - accepted_values:\n              values: ['pending', 'completed', 'cancelled']\n      - name: customer_id\n        tests:\n          - not_null\n          - relationships:\n              to: ref('stg_customers')\n              field: customer_id\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#data-tests-customizados","title":"Data tests (customizados)","text":"<pre><code>-- tests/assert_positive_amounts.sql\nselect *\nfrom {{ ref('stg_orders') }}\nwhere total_amount &lt; 0\n</code></pre> <p>Retornar linhas = falha.</p>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#singular-tests-por-modelo","title":"Singular tests por modelo","text":"<pre><code>-- tests/stg_orders_no_future_dates.sql\nselect *\nfrom {{ ref('stg_orders') }}\nwhere ordered_at &gt; current_timestamp\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#macros","title":"Macros","text":"<p>Fun\u00e7\u00f5es SQL reutiliz\u00e1veis:</p> <pre><code>-- macros/cents_to_dollars.sql\n{% macro cents_to_dollars(column_name) %}\n    ({{ column_name }} / 100.0)\n{% endmacro %}\n</code></pre> <p>Uso:</p> <pre><code>select\n    order_id,\n    {{ cents_to_dollars('total_cents') }} as total_amount\nfrom {{ source('raw', 'orders') }}\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#macro-com-logica","title":"Macro com l\u00f3gica","text":"<pre><code>-- macros/generate_schema_name.sql\n{% macro generate_schema_name(custom_schema_name, node) %}\n    {% if custom_schema_name is none %}\n        {{ target.schema }}\n    {% else %}\n        {{ target.schema }}_{{ custom_schema_name }}\n    {% endif %}\n{% endmacro %}\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#seeds","title":"Seeds","text":"<p>CSVs carregados como tabelas:</p> <pre><code>seeds/\n\u2514\u2500\u2500 country_codes.csv\n</code></pre> <pre><code>code,name\nBR,Brazil\nUS,United States\n</code></pre> <pre><code>dbt seed\n</code></pre> <p>Uso: <code>{{ ref('country_codes') }}</code></p>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#snapshots","title":"Snapshots","text":"<p>SCD Type 2 autom\u00e1tico:</p> <pre><code>-- snapshots/customers_snapshot.sql\n{% snapshot customers_snapshot %}\n\n{{\n    config(\n        target_schema='snapshots',\n        unique_key='customer_id',\n        strategy='timestamp',\n        updated_at='updated_at'\n    )\n}}\n\nselect * from {{ source('raw', 'customers') }}\n\n{% endsnapshot %}\n</code></pre> <pre><code>dbt snapshot\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#documentacao","title":"Documenta\u00e7\u00e3o","text":"<pre><code># models/marts/_schema.yml\nversion: 2\n\nmodels:\n  - name: dim_customers\n    description: |\n      Dimens\u00e3o de clientes com m\u00e9tricas agregadas.\n      Atualizado diariamente.\n    columns:\n      - name: customer_id\n        description: ID \u00fanico do cliente\n      - name: lifetime_value\n        description: Valor total gasto pelo cliente\n</code></pre> <p>Markdown em <code>models/marts/dim_customers.md</code>:</p> <pre><code>{% docs dim_customers %}\n\n## Dimens\u00e3o de Clientes\n\nCont\u00e9m todos os clientes com m\u00e9tricas de pedidos.\n\n### Fontes\n- `stg_customers`\n- `stg_orders`\n\n{% enddocs %}\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#cli","title":"CLI","text":"<pre><code># Executar modelos\ndbt run                           # todos\ndbt run --select stg_orders       # espec\u00edfico\ndbt run --select staging.*        # pasta\ndbt run --select +dim_customers   # modelo + upstream\ndbt run --select dim_customers+   # modelo + downstream\ndbt run --select tag:daily        # por tag\n\n# Testes\ndbt test                          # todos\ndbt test --select stg_orders      # por modelo\n\n# Build (run + test)\ndbt build\ndbt build --select staging.*\n\n# Documenta\u00e7\u00e3o\ndbt docs generate\ndbt docs serve\n\n# Outros\ndbt compile              # compilar SQL sem executar\ndbt debug                # verificar conex\u00e3o\ndbt deps                 # instalar pacotes\ndbt seed                 # carregar seeds\ndbt snapshot             # executar snapshots\ndbt source freshness     # verificar freshness\ndbt clean                # limpar artefatos\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#seletores","title":"Seletores","text":"<pre><code># Por nome\ndbt run --select model_name\n\n# Por caminho\ndbt run --select models/staging/\n\n# Upstream (+) e downstream (+)\ndbt run --select +model_name      # modelo e depend\u00eancias\ndbt run --select model_name+      # modelo e dependentes\ndbt run --select +model_name+     # ambos\n\n# Por tag\ndbt run --select tag:daily\n\n# Por source\ndbt run --select source:raw.orders\n\n# Exclus\u00e3o\ndbt run --exclude stg_legacy\n\n# Combina\u00e7\u00e3o\ndbt run --select staging.* --exclude stg_legacy\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#packages","title":"Packages","text":"<pre><code># packages.yml\npackages:\n  - package: dbt-labs/dbt_utils\n    version: 1.1.1\n  - package: dbt-labs/codegen\n    version: 0.12.1\n  - package: calogica/dbt_expectations\n    version: 0.10.3\n</code></pre> <pre><code>dbt deps\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#dbt_utils","title":"dbt_utils","text":"<pre><code>-- Surrogate key\n{{ dbt_utils.generate_surrogate_key(['customer_id', 'order_id']) }}\n\n-- Pivot\n{{ dbt_utils.pivot(\n    'status',\n    dbt_utils.get_column_values(ref('stg_orders'), 'status')\n) }}\n\n-- Date spine\n{{ dbt_utils.date_spine(\n    datepart=\"day\",\n    start_date=\"cast('2020-01-01' as date)\",\n    end_date=\"current_date\"\n) }}\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#hooks","title":"Hooks","text":"<p>Executar SQL antes/depois:</p> <pre><code># dbt_project.yml\nmodels:\n  meu_projeto:\n    marts:\n      +post-hook:\n        - \"GRANT SELECT ON {{ this }} TO ROLE analyst\"\n</code></pre> <pre><code>-- No modelo\n{{ config(\n    post_hook=\"ANALYZE TABLE {{ this }}\"\n) }}\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#variaveis","title":"Vari\u00e1veis","text":"<pre><code># dbt_project.yml\nvars:\n  start_date: '2020-01-01'\n  enable_feature_x: true\n</code></pre> <pre><code>select *\nfrom {{ ref('stg_orders') }}\nwhere ordered_at &gt;= '{{ var(\"start_date\") }}'\n</code></pre> <pre><code>dbt run --vars '{\"start_date\": \"2023-01-01\"}'\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#exposures","title":"Exposures","text":"<p>Documentar uso downstream:</p> <pre><code># models/_exposures.yml\nversion: 2\n\nexposures:\n  - name: weekly_sales_dashboard\n    type: dashboard\n    maturity: high\n    url: https://bi.company.com/dashboard/123\n    description: Dashboard de vendas semanais\n    depends_on:\n      - ref('fct_orders')\n      - ref('dim_customers')\n    owner:\n      name: Data Team\n      email: data@company.com\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#metricas","title":"M\u00e9tricas","text":"<pre><code># models/_metrics.yml\nversion: 2\n\nmetrics:\n  - name: total_revenue\n    label: Total Revenue\n    model: ref('fct_orders')\n    description: Receita total\n    calculation_method: sum\n    expression: total_amount\n    timestamp: ordered_at\n    time_grains: [day, week, month]\n    dimensions:\n      - customer_segment\n      - product_category\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#ambiente-de-execucao","title":"Ambiente de execu\u00e7\u00e3o","text":"<pre><code>-- Acessar target\n{{ target.name }}      -- dev, prod\n{{ target.schema }}    -- schema atual\n{{ target.database }}  -- database atual\n\n-- Condicional por ambiente\n{% if target.name == 'prod' %}\n    -- l\u00f3gica de produ\u00e7\u00e3o\n{% endif %}\n</code></pre>"},{"location":"2025/08/20/dbt-refer%C3%AAncia/#links","title":"Links","text":"<ul> <li>dbt Docs</li> <li>dbt Learn</li> <li>dbt Hub</li> <li>dbt Utils</li> </ul>"},{"location":"2025/03/10/docker-no-mac-sem-docker-desktop/","title":"Docker no Mac sem Docker Desktop","text":"<p>Colima \u00e9 uma alternativa open source ao Docker Desktop. Gratuito, leve e funciona igual.</p>"},{"location":"2025/03/10/docker-no-mac-sem-docker-desktop/#instalacao","title":"Instala\u00e7\u00e3o","text":"<pre><code>brew install colima docker docker-compose\n\ncolima start\ndocker ps  # verificar se est\u00e1 funcionando\n</code></pre> <p>Por padr\u00e3o: 2 CPUs, 2GB RAM, 60GB disco.</p>"},{"location":"2025/03/10/docker-no-mac-sem-docker-desktop/#configuracao","title":"Configura\u00e7\u00e3o","text":"<pre><code># Mais recursos\ncolima start --cpu 4 --memory 8 --disk 100\n\n# Editar config permanente\ncolima start --edit\n</code></pre>"},{"location":"2025/03/10/docker-no-mac-sem-docker-desktop/#docker-socket","title":"Docker socket","text":"<p>Colima configura automaticamente. Se precisar definir manualmente:</p> <pre><code># Fish\nset -gx DOCKER_HOST \"unix://$HOME/.colima/default/docker.sock\"\n</code></pre> <pre><code># Bash/Zsh\nexport DOCKER_HOST=\"unix://${HOME}/.colima/default/docker.sock\"\n</code></pre>"},{"location":"2025/03/10/docker-no-mac-sem-docker-desktop/#uso-diario","title":"Uso di\u00e1rio","text":"<pre><code>colima start\ncolima stop\ncolima status\n</code></pre> <p>Colima n\u00e3o inicia com o Mac. Iniciar manualmente quando precisar.</p>"},{"location":"2025/03/10/docker-no-mac-sem-docker-desktop/#docker-compose","title":"docker compose","text":"<pre><code>docker compose up -d\ndocker compose logs -f\ndocker compose down\n</code></pre>"},{"location":"2025/03/10/docker-no-mac-sem-docker-desktop/#kubernetes-opcional","title":"Kubernetes (opcional)","text":"<pre><code>colima start --kubernetes\n</code></pre> <p>Cluster single-node acess\u00edvel via <code>kubectl</code>.</p>"},{"location":"2025/03/10/docker-no-mac-sem-docker-desktop/#troubleshooting","title":"Troubleshooting","text":"<pre><code># Verificar status\ncolima status\n\n# Reiniciar\ncolima restart\n\n# Verificar socket\nls -la ~/.colima/default/docker.sock\n\n# Deletar VM e come\u00e7ar do zero\ncolima delete\n\n# Limpar imagens/containers\ndocker system prune -a\n</code></pre>"},{"location":"2025/03/10/docker-no-mac-sem-docker-desktop/#multiplos-profiles","title":"M\u00faltiplos profiles","text":"<pre><code>colima start --profile work\nexport DOCKER_HOST=\"unix://${HOME}/.colima/work/docker.sock\"\n</code></pre>"},{"location":"2025/03/10/docker-no-mac-sem-docker-desktop/#links","title":"Links","text":"<ul> <li>Colima</li> <li>Lima</li> </ul>"},{"location":"2025/02/09/fish-shell-configura%C3%A7%C3%A3o-m%C3%ADnima/","title":"Fish shell: configura\u00e7\u00e3o m\u00ednima","text":"<p>Fish \u00e9 um shell com autosuggestions e syntax highlighting nativos. N\u00e3o \u00e9 POSIX-compliant, mas na pr\u00e1tica isso raramente \u00e9 problema.</p>"},{"location":"2025/02/09/fish-shell-configura%C3%A7%C3%A3o-m%C3%ADnima/#instalacao","title":"Instala\u00e7\u00e3o","text":"<pre><code># macOS\nbrew install fish\n\n# Ubuntu/Debian (incluindo WSL)\nsudo apt install fish\n\n# Arch Linux\nsudo pacman -S fish\n</code></pre> <p>Definir como shell padr\u00e3o:</p> <pre><code>echo $(which fish) | sudo tee -a /etc/shells\nchsh -s $(which fish)\n</code></pre> <p>Nota: Fish n\u00e3o roda nativamente no Windows. Uso via WSL.</p>"},{"location":"2025/02/09/fish-shell-configura%C3%A7%C3%A3o-m%C3%ADnima/#configuracao-basica","title":"Configura\u00e7\u00e3o b\u00e1sica","text":"<pre><code># ~/.config/fish/config.fish\n\n# Sem greeting\nset -g fish_greeting\n\n# Editor\nset -gx EDITOR nvim\n\n# Path\nfish_add_path ~/.local/bin\n\n# Abbreviations (expandem ao digitar, melhor que aliases)\nabbr -a g git\nabbr -a k kubectl\nabbr -a gs \"git status\"\nabbr -a gc \"git commit\"\nabbr -a gp \"git push\"\n\n# Aliases (para comandos que n\u00e3o quero expandir)\nalias ll \"ls -la\"\n</code></pre>"},{"location":"2025/02/09/fish-shell-configura%C3%A7%C3%A3o-m%C3%ADnima/#configuracao-via-browser","title":"Configura\u00e7\u00e3o via browser","text":"<pre><code>fish_config\n</code></pre> <p>Abre interface web para configurar cores, prompt, fun\u00e7\u00f5es e abbreviations.</p>"},{"location":"2025/02/09/fish-shell-configura%C3%A7%C3%A3o-m%C3%ADnima/#funcoes","title":"Fun\u00e7\u00f5es","text":"<p>Fun\u00e7\u00f5es ficam em <code>~/.config/fish/functions/</code>:</p> <pre><code># ~/.config/fish/functions/mkcd.fish\nfunction mkcd\n    mkdir -p $argv[1] &amp;&amp; cd $argv[1]\nend\n</code></pre> <pre><code># ~/.config/fish/functions/serve.fish\nfunction serve\n    python -m http.server $argv[1]\nend\n</code></pre>"},{"location":"2025/02/09/fish-shell-configura%C3%A7%C3%A3o-m%C3%ADnima/#links","title":"Links","text":"<ul> <li>Fish Shell</li> </ul>"},{"location":"2025/02/23/git-worktrees/","title":"Git worktrees","text":"<p>Git worktrees permite ter m\u00faltiplas branches em diret\u00f3rios separados, compartilhando o mesmo <code>.git</code>. \u00datil para reviews, hotfixes ou experimentos sem interromper o trabalho atual.</p>"},{"location":"2025/02/23/git-worktrees/#conceito","title":"Conceito","text":"<p>Um worktree \u00e9 um diret\u00f3rio adicional linkado ao mesmo reposit\u00f3rio. Cada um pode estar em uma branch diferente.</p> <pre><code># Criar worktree para revisar PR\ngit worktree add ../meu-repo-review feature/nova-api\n\n# Resultado:\n# ~/projetos/meu-repo/         (branch: sua-feature)\n# ~/projetos/meu-repo-review/  (branch: feature/nova-api)\n</code></pre> <p>Ambos compartilham o <code>.git</code>: commits e branches ficam sincronizados.</p>"},{"location":"2025/02/23/git-worktrees/#comandos","title":"Comandos","text":"<pre><code># Criar worktree de branch existente\ngit worktree add ../path branch-name\n\n# Criar worktree com nova branch\ngit worktree add -b nova-branch ../path main\n\n# Listar worktrees\ngit worktree list\n\n# Remover worktree\ngit worktree remove ../path\n\n# For\u00e7ar remo\u00e7\u00e3o (se tiver mudan\u00e7as)\ngit worktree remove --force ../path\n\n# Limpar worktrees \u00f3rf\u00e3os\ngit worktree prune\n</code></pre>"},{"location":"2025/02/23/git-worktrees/#exemplo-revisao-de-pr","title":"Exemplo: revis\u00e3o de PR","text":"<pre><code>git fetch origin\ngit worktree add ../projeto-review origin/feature-x\n\ncd ../projeto-review\n# revisar, testar\n\ncd ../projeto\ngit worktree remove ../projeto-review\n</code></pre>"},{"location":"2025/02/23/git-worktrees/#exemplo-hotfix","title":"Exemplo: hotfix","text":"<pre><code>git worktree add -b hotfix/bug-123 ../projeto-hotfix main\n\ncd ../projeto-hotfix\n# corrigir\ngit commit -am \"fix: corrige bug 123\"\ngit push -u origin hotfix/bug-123\n\ncd ../projeto\ngit worktree remove ../projeto-hotfix\n</code></pre>"},{"location":"2025/02/23/git-worktrees/#dicas","title":"Dicas","text":"<ul> <li>Use sufixos consistentes: <code>-review</code>, <code>-hotfix</code>, <code>-experiment</code></li> <li>Mantenha worktrees no mesmo n\u00edvel do repo principal</li> <li>Remova worktrees quando terminar</li> <li>Cada worktree pode ser projeto separado na IDE</li> </ul>"},{"location":"2025/02/23/git-worktrees/#limitacoes","title":"Limita\u00e7\u00f5es","text":"<p>Uma branch s\u00f3 pode estar em um worktree por vez. Submodules precisam de aten\u00e7\u00e3o extra.</p>"},{"location":"2025/02/23/git-worktrees/#links","title":"Links","text":"<ul> <li>Documenta\u00e7\u00e3o</li> </ul>"},{"location":"2025/01/12/mkdocs-material-para-blog-pessoal/","title":"MkDocs Material para blog pessoal","text":"<p>MkDocs com tema Material \u00e9 uma op\u00e7\u00e3o simples para blogs t\u00e9cnicos.</p>"},{"location":"2025/01/12/mkdocs-material-para-blog-pessoal/#setup","title":"Setup","text":"<pre><code>uv init meu-blog &amp;&amp; cd meu-blog\nuv add mkdocs-material\n</code></pre>"},{"location":"2025/01/12/mkdocs-material-para-blog-pessoal/#estrutura","title":"Estrutura","text":"<pre><code>meu-blog/\n\u251c\u2500\u2500 docs/\n\u2502   \u251c\u2500\u2500 index.md          # p\u00e1gina inicial\n\u2502   \u2514\u2500\u2500 posts/\n\u2502       \u2514\u2500\u2500 meu-post.md   # posts do blog\n\u251c\u2500\u2500 mkdocs.yml\n\u2514\u2500\u2500 pyproject.toml\n</code></pre>"},{"location":"2025/01/12/mkdocs-material-para-blog-pessoal/#configuracao","title":"Configura\u00e7\u00e3o","text":"<pre><code># mkdocs.yml\nsite_name: Meu Blog\nsite_url: https://meublog.com\n\ntheme:\n  name: material\n  features:\n    - navigation.instant\n    - navigation.tracking\n    - search.suggest\n    - content.code.copy\n  palette:\n    - scheme: default\n      primary: black\n      toggle:\n        icon: material/brightness-7\n        name: Modo escuro\n    - scheme: slate\n      primary: black\n      toggle:\n        icon: material/brightness-4\n        name: Modo claro\n\nplugins:\n  - search:\n      lang: pt\n  - blog:\n      blog_dir: .              # posts na raiz (n\u00e3o em /blog/)\n      post_date_format: long\n      archive_name: Arquivo\n      categories_name: Categorias\n\nmarkdown_extensions:\n  - pymdownx.highlight:\n      anchor_linenums: true\n  - pymdownx.inlinehilite\n  - pymdownx.superfences\n  - admonition\n  - toc:\n      permalink: true\n  - tables\n</code></pre>"},{"location":"2025/01/12/mkdocs-material-para-blog-pessoal/#posts","title":"Posts","text":"<p>Cada post precisa de frontmatter com data:</p> <pre><code>---\ndate: 2025-01-12\ncategories:\n  - Tutorial\n---\n\n# T\u00edtulo do Post\n\nPrimeiro par\u00e1grafo aparece como resumo na listagem.\n\n&lt;!-- more --&gt;\n\nResto do conte\u00fado...\n</code></pre> <p>O <code>&lt;!-- more --&gt;</code> controla onde corta o excerpt na p\u00e1gina inicial.</p>"},{"location":"2025/01/12/mkdocs-material-para-blog-pessoal/#desenvolvimento-local","title":"Desenvolvimento local","text":"<pre><code>uv run mkdocs serve\n# Abre em http://localhost:8000\n</code></pre>"},{"location":"2025/01/12/mkdocs-material-para-blog-pessoal/#deploy-github-pages","title":"Deploy GitHub Pages","text":"<pre><code># .github/workflows/ci.yml\nname: ci\non:\n  push:\n    branches: [main]\n\npermissions:\n  contents: write\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: astral-sh/setup-uv@v5\n      - run: uv sync\n      - run: uv run mkdocs gh-deploy --force\n</code></pre>"},{"location":"2025/01/12/mkdocs-material-para-blog-pessoal/#dominio-customizado","title":"Dom\u00ednio customizado","text":"<p>Criar arquivo <code>docs/CNAME</code>:</p> <pre><code>meublog.com\n</code></pre>"},{"location":"2025/01/12/mkdocs-material-para-blog-pessoal/#links","title":"Links","text":"<ul> <li>MkDocs</li> <li>Material for MkDocs</li> <li>Blog plugin</li> </ul>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/","title":"Modelagem dimensional com SQL Server","text":"<p>Conceitos b\u00e1sicos de modelagem dimensional usando a stack Microsoft: SQL Server, SSIS e SSAS.</p>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#o-que-e-modelagem-dimensional","title":"O que \u00e9 modelagem dimensional?","text":"<p>T\u00e9cnica de organiza\u00e7\u00e3o de dados otimizada para an\u00e1lises. Diferente do modelo relacional (normalizado), prioriza:</p> <ul> <li>Facilidade de entendimento</li> <li>Performance de queries</li> <li>Flexibilidade para an\u00e1lises</li> </ul>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#conceitos-fundamentais","title":"Conceitos fundamentais","text":""},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#fatos-facts","title":"Fatos (Facts)","text":"<p>Tabelas que armazenam eventos e m\u00e9tricas. Centro do modelo.</p> <ul> <li>Registram eventos no tempo</li> <li>Cont\u00eam m\u00e9tricas num\u00e9ricas (quantidade, valor)</li> <li>T\u00eam muitas linhas</li> <li>Chaves estrangeiras para dimens\u00f5es</li> </ul>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#dimensoes-dimensions","title":"Dimens\u00f5es (Dimensions)","text":"<p>Tabelas que descrevem o contexto dos fatos. O \"quem, o qu\u00ea, onde, quando\".</p> <ul> <li>Atributos descritivos</li> <li>Relativamente poucas linhas</li> <li>Permitem filtrar e agrupar fatos</li> </ul>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#surrogate-keys","title":"Surrogate Keys","text":"<p>Chaves artificiais (INT, sequenciais) em vez de chaves naturais:</p> <pre><code>-- Chave natural\ncustomer_id VARCHAR(10)  -- \"C001\"\n\n-- Surrogate key (preferir)\ncustomer_key INT  -- 101\n</code></pre> <p>Vantagens: performance em JOINs, suporte a hist\u00f3rico, independ\u00eancia do sistema fonte.</p>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#star-schema","title":"Star Schema","text":"<p>Padr\u00e3o mais comum. Fato no centro, dimens\u00f5es ao redor.</p> <pre><code>                    dim_date\n                       \u2502\n                       \u2502\n    dim_customer \u2500\u2500\u2500\u2500 fact_orders \u2500\u2500\u2500\u2500 dim_product\n                       \u2502\n                       \u2502\n                    dim_store\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#criando-o-modelo-no-sql-server","title":"Criando o modelo no SQL Server","text":""},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#dimensao-de-data","title":"Dimens\u00e3o de data","text":"<pre><code>CREATE TABLE dbo.dim_date (\n    date_key INT PRIMARY KEY,  -- YYYYMMDD\n    full_date DATE NOT NULL,\n    day_of_week TINYINT,\n    day_name VARCHAR(10),\n    day_of_month TINYINT,\n    day_of_year SMALLINT,\n    week_of_year TINYINT,\n    month_num TINYINT,\n    month_name VARCHAR(10),\n    quarter TINYINT,\n    year SMALLINT,\n    is_weekend BIT,\n    is_holiday BIT\n);\nGO\n\n-- Popular dimens\u00e3o de data (2020-2030)\nDECLARE @start DATE = '2020-01-01';\nDECLARE @end DATE = '2030-12-31';\n\nWITH dates AS (\n    SELECT @start AS dt\n    UNION ALL\n    SELECT DATEADD(DAY, 1, dt) FROM dates WHERE dt &lt; @end\n)\nINSERT INTO dbo.dim_date\nSELECT\n    CONVERT(INT, FORMAT(dt, 'yyyyMMdd')) AS date_key,\n    dt AS full_date,\n    DATEPART(WEEKDAY, dt) AS day_of_week,\n    DATENAME(WEEKDAY, dt) AS day_name,\n    DAY(dt) AS day_of_month,\n    DATEPART(DAYOFYEAR, dt) AS day_of_year,\n    DATEPART(WEEK, dt) AS week_of_year,\n    MONTH(dt) AS month_num,\n    DATENAME(MONTH, dt) AS month_name,\n    DATEPART(QUARTER, dt) AS quarter,\n    YEAR(dt) AS year,\n    CASE WHEN DATEPART(WEEKDAY, dt) IN (1, 7) THEN 1 ELSE 0 END AS is_weekend,\n    0 AS is_holiday\nFROM dates\nOPTION (MAXRECURSION 0);\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#dimensao-de-cliente","title":"Dimens\u00e3o de cliente","text":"<pre><code>CREATE TABLE dbo.dim_customer (\n    customer_key INT IDENTITY(1,1) PRIMARY KEY,\n    customer_id VARCHAR(50) NOT NULL,\n    name VARCHAR(100),\n    email VARCHAR(100),\n    city VARCHAR(50),\n    state VARCHAR(2),\n    segment VARCHAR(20),\n    created_at DATETIME2,\n    -- SCD Type 2\n    valid_from DATE NOT NULL,\n    valid_to DATE NOT NULL,\n    is_current BIT NOT NULL DEFAULT 1\n);\nGO\n\nCREATE INDEX IX_dim_customer_id ON dbo.dim_customer(customer_id);\nCREATE INDEX IX_dim_customer_current ON dbo.dim_customer(is_current) WHERE is_current = 1;\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#dimensao-de-produto","title":"Dimens\u00e3o de produto","text":"<pre><code>CREATE TABLE dbo.dim_product (\n    product_key INT IDENTITY(1,1) PRIMARY KEY,\n    product_id VARCHAR(50) NOT NULL,\n    name VARCHAR(100),\n    category VARCHAR(50),\n    subcategory VARCHAR(50),\n    brand VARCHAR(50),\n    unit_price DECIMAL(10,2),\n    valid_from DATE NOT NULL,\n    valid_to DATE NOT NULL,\n    is_current BIT NOT NULL DEFAULT 1\n);\nGO\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#tabela-de-fatos","title":"Tabela de fatos","text":"<pre><code>CREATE TABLE dbo.fact_sales (\n    sale_key BIGINT IDENTITY(1,1) PRIMARY KEY,\n    order_id VARCHAR(50) NOT NULL,  -- degenerate dimension\n    customer_key INT NOT NULL REFERENCES dbo.dim_customer(customer_key),\n    product_key INT NOT NULL REFERENCES dbo.dim_product(product_key),\n    date_key INT NOT NULL REFERENCES dbo.dim_date(date_key),\n    quantity INT NOT NULL,\n    unit_price DECIMAL(10,2) NOT NULL,\n    discount_amount DECIMAL(10,2) DEFAULT 0,\n    total_amount DECIMAL(10,2) NOT NULL\n);\nGO\n\n-- \u00cdndices para performance\nCREATE INDEX IX_fact_sales_date ON dbo.fact_sales(date_key);\nCREATE INDEX IX_fact_sales_customer ON dbo.fact_sales(customer_key);\nCREATE INDEX IX_fact_sales_product ON dbo.fact_sales(product_key);\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#etl-com-ssis","title":"ETL com SSIS","text":"<p>SSIS (SQL Server Integration Services) para extrair, transformar e carregar dados.</p>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#estrutura-do-pacote","title":"Estrutura do pacote","text":"<pre><code>Package.dtsx\n\u251c\u2500\u2500 Connection Managers\n\u2502   \u251c\u2500\u2500 Source_OLTP (conex\u00e3o com sistema transacional)\n\u2502   \u2514\u2500\u2500 DW (conex\u00e3o com data warehouse)\n\u2502\n\u251c\u2500\u2500 Control Flow\n\u2502   \u251c\u2500\u2500 Sequence: Load Dimensions\n\u2502   \u2502   \u251c\u2500\u2500 Data Flow: Load dim_customer\n\u2502   \u2502   \u2514\u2500\u2500 Data Flow: Load dim_product\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 Sequence: Load Facts\n\u2502       \u2514\u2500\u2500 Data Flow: Load fact_sales\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#data-flow-carga-de-dimensao-scd-type-2","title":"Data Flow: Carga de dimens\u00e3o (SCD Type 2)","text":"<pre><code>[OLE DB Source] \u2192 [Lookup] \u2192 [Conditional Split] \u2192 [OLE DB Destination]\n    (OLTP)         (DW)         (novo/alterado)       (INSERT)\n                                      \u2502\n                                      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192 [OLE DB Command]\n                                                      (UPDATE is_current=0)\n</code></pre> <p>Componente SCD no SSIS</p> <p>Use o componente Slowly Changing Dimension do SSIS para automatizar a l\u00f3gica de SCD Type 1, 2 ou 3.</p>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#script-carga-incremental-de-fatos","title":"Script: Carga incremental de fatos","text":"<pre><code>-- Procedure para carga incremental\nCREATE PROCEDURE dbo.usp_load_fact_sales\n    @date_from DATE,\n    @date_to DATE\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    INSERT INTO dbo.fact_sales (\n        order_id, customer_key, product_key, date_key,\n        quantity, unit_price, discount_amount, total_amount\n    )\n    SELECT\n        s.order_id,\n        COALESCE(c.customer_key, -1) AS customer_key,  -- -1 = n\u00e3o encontrado\n        COALESCE(p.product_key, -1) AS product_key,\n        CONVERT(INT, FORMAT(s.order_date, 'yyyyMMdd')) AS date_key,\n        s.quantity,\n        s.unit_price,\n        s.discount_amount,\n        s.quantity * s.unit_price - s.discount_amount AS total_amount\n    FROM staging.sales s\n    LEFT JOIN dbo.dim_customer c\n        ON s.customer_id = c.customer_id\n        AND c.is_current = 1\n    LEFT JOIN dbo.dim_product p\n        ON s.product_id = p.product_id\n        AND p.is_current = 1\n    WHERE s.order_date BETWEEN @date_from AND @date_to\n      AND NOT EXISTS (\n          SELECT 1 FROM dbo.fact_sales f\n          WHERE f.order_id = s.order_id\n      );\nEND;\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#sql-server-agent-job","title":"SQL Server Agent Job","text":"<p>Agendar execu\u00e7\u00e3o di\u00e1ria:</p> <pre><code>-- Criar job para carga di\u00e1ria\nEXEC msdb.dbo.sp_add_job\n    @job_name = N'DW_Daily_Load';\n\nEXEC msdb.dbo.sp_add_jobstep\n    @job_name = N'DW_Daily_Load',\n    @step_name = N'Execute SSIS Package',\n    @subsystem = N'SSIS',\n    @command = N'/FILE \"C:\\SSIS\\DW_Load.dtsx\"';\n\nEXEC msdb.dbo.sp_add_schedule\n    @schedule_name = N'Daily_2AM',\n    @freq_type = 4,  -- daily\n    @active_start_time = 020000;  -- 02:00\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#cubo-olap-com-ssas","title":"Cubo OLAP com SSAS","text":"<p>SSAS (SQL Server Analysis Services) para criar cubos multidimensionais.</p>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#estrutura-do-projeto-ssas","title":"Estrutura do projeto SSAS","text":"<pre><code>Projeto.dwproj\n\u251c\u2500\u2500 Data Sources\n\u2502   \u2514\u2500\u2500 DW.ds\n\u251c\u2500\u2500 Data Source Views\n\u2502   \u2514\u2500\u2500 DW.dsv\n\u251c\u2500\u2500 Cubes\n\u2502   \u2514\u2500\u2500 Sales.cube\n\u251c\u2500\u2500 Dimensions\n\u2502   \u251c\u2500\u2500 Date.dim\n\u2502   \u251c\u2500\u2500 Customer.dim\n\u2502   \u2514\u2500\u2500 Product.dim\n\u2514\u2500\u2500 Mining Structures (opcional)\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#definindo-dimensoes-no-ssas","title":"Definindo dimens\u00f5es no SSAS","text":"<p>No Data Source View, arraste as tabelas de dimens\u00e3o e fato. O SSAS detecta relacionamentos automaticamente.</p> <p>Dimens\u00e3o de data (configura\u00e7\u00e3o):</p> Propriedade Valor KeyColumn date_key NameColumn full_date Type Time Hierarchies Year \u2192 Quarter \u2192 Month \u2192 Date <p>Dimens\u00e3o de cliente:</p> Propriedade Valor KeyColumn customer_key NameColumn name Hierarchies State \u2192 City \u2192 Customer"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#medidas-do-cubo","title":"Medidas do cubo","text":"<pre><code>Measure Group: fact_sales\n\u251c\u2500\u2500 Sum of quantity\n\u251c\u2500\u2500 Sum of total_amount\n\u251c\u2500\u2500 Count of sale_key (distinct count)\n\u2514\u2500\u2500 Average unit_price\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#mdx-basico","title":"MDX b\u00e1sico","text":"<pre><code>-- Total de vendas por ano\nSELECT\n    [Measures].[Total Amount] ON COLUMNS,\n    [Date].[Year].Members ON ROWS\nFROM [Sales];\n\n-- Top 10 clientes\nSELECT\n    [Measures].[Total Amount] ON COLUMNS,\n    TOPCOUNT(\n        [Customer].[Name].Members,\n        10,\n        [Measures].[Total Amount]\n    ) ON ROWS\nFROM [Sales];\n\n-- Vendas do ano atual vs ano anterior\nWITH\n    MEMBER [Measures].[PY Amount] AS\n        ([Measures].[Total Amount], [Date].[Year].CurrentMember.PrevMember)\n    MEMBER [Measures].[YoY Growth] AS\n        ([Measures].[Total Amount] - [Measures].[PY Amount]) / [Measures].[PY Amount]\nSELECT\n    {[Measures].[Total Amount], [Measures].[PY Amount], [Measures].[YoY Growth]} ON COLUMNS,\n    [Date].[Year].Members ON ROWS\nFROM [Sales];\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#slowly-changing-dimensions-scd","title":"Slowly Changing Dimensions (SCD)","text":"<p>SCD (Slowly Changing Dimension) \u00e9 a t\u00e9cnica para lidar com mudan\u00e7as em atributos de dimens\u00f5es ao longo do tempo. Por exemplo, quando um cliente muda de cidade ou um produto muda de categoria.</p> Tipo O que faz Hist\u00f3rico Type 1 Sobrescreve o valor antigo N\u00e3o mant\u00e9m Type 2 Cria nova linha com vers\u00e3o Mant\u00e9m completo Type 3 Adiciona coluna para valor anterior Limitado (s\u00f3 1 vers\u00e3o) <p>Type 2 \u00e9 o mais usado quando voc\u00ea precisa analisar dados hist\u00f3ricos com o contexto correto (ex: \"vendas por regi\u00e3o do cliente na \u00e9poca da venda\").</p>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#type-1-sobrescrever","title":"Type 1: Sobrescrever","text":"<p>Atualiza o registro. Perde hist\u00f3rico.</p> <pre><code>UPDATE dbo.dim_customer\nSET city = 'Rio de Janeiro'\nWHERE customer_id = 'C001' AND is_current = 1;\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#type-2-nova-linha","title":"Type 2: Nova linha","text":"<p>Cria novo registro. Mant\u00e9m hist\u00f3rico completo.</p> <pre><code>-- 1. Fechar registro atual\nUPDATE dbo.dim_customer\nSET valid_to = CAST(GETDATE() AS DATE),\n    is_current = 0\nWHERE customer_id = 'C001' AND is_current = 1;\n\n-- 2. Inserir novo registro\nINSERT INTO dbo.dim_customer (customer_id, name, city, valid_from, valid_to, is_current)\nVALUES ('C001', 'Jo\u00e3o', 'Rio de Janeiro', CAST(GETDATE() AS DATE), '9999-12-31', 1);\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#merge-para-scd-type-2","title":"Merge para SCD Type 2","text":"<pre><code>-- Procedure gen\u00e9rica para SCD Type 2\nCREATE PROCEDURE dbo.usp_scd2_customer\nAS\nBEGIN\n    -- Fechar registros alterados\n    UPDATE dim\n    SET valid_to = CAST(GETDATE() AS DATE),\n        is_current = 0\n    FROM dbo.dim_customer dim\n    INNER JOIN staging.customer stg ON dim.customer_id = stg.customer_id\n    WHERE dim.is_current = 1\n      AND (dim.name &lt;&gt; stg.name OR dim.city &lt;&gt; stg.city OR dim.segment &lt;&gt; stg.segment);\n\n    -- Inserir novos e alterados\n    INSERT INTO dbo.dim_customer (customer_id, name, email, city, state, segment, valid_from, valid_to, is_current)\n    SELECT\n        stg.customer_id, stg.name, stg.email, stg.city, stg.state, stg.segment,\n        CAST(GETDATE() AS DATE), '9999-12-31', 1\n    FROM staging.customer stg\n    LEFT JOIN dbo.dim_customer dim\n        ON stg.customer_id = dim.customer_id AND dim.is_current = 1\n    WHERE dim.customer_key IS NULL;  -- novo ou foi fechado acima\nEND;\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#query-analitica","title":"Query anal\u00edtica","text":"<pre><code>-- Vendas por categoria e m\u00eas\nSELECT\n    p.category,\n    d.month_name,\n    d.year,\n    SUM(f.quantity) AS total_quantity,\n    SUM(f.total_amount) AS total_revenue,\n    COUNT(DISTINCT f.order_id) AS total_orders\nFROM dbo.fact_sales f\nINNER JOIN dbo.dim_product p ON f.product_key = p.product_key\nINNER JOIN dbo.dim_date d ON f.date_key = d.date_key\nWHERE d.year = 2025\nGROUP BY p.category, d.month_name, d.year, d.month_num\nORDER BY d.month_num, total_revenue DESC;\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#boas-praticas","title":"Boas pr\u00e1ticas","text":""},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#indices","title":"\u00cdndices","text":"<pre><code>-- Columnstore para fatos (SQL Server 2016+)\nCREATE CLUSTERED COLUMNSTORE INDEX CCI_fact_sales ON dbo.fact_sales;\n\n-- Ou \u00edndice columnstore n\u00e3o-clusterizado\nCREATE NONCLUSTERED COLUMNSTORE INDEX NCCI_fact_sales\nON dbo.fact_sales (customer_key, product_key, date_key, quantity, total_amount);\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#particionamento","title":"Particionamento","text":"<pre><code>-- Particionar fato por ano\nCREATE PARTITION FUNCTION pf_year (INT)\nAS RANGE RIGHT FOR VALUES (20210101, 20220101, 20230101, 20240101, 20250101);\n\nCREATE PARTITION SCHEME ps_year\nAS PARTITION pf_year ALL TO ([PRIMARY]);\n\nCREATE TABLE dbo.fact_sales (\n    -- colunas\n) ON ps_year(date_key);\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#registro-desconhecido-nas-dimensoes","title":"Registro \"desconhecido\" nas dimens\u00f5es","text":"<pre><code>-- Inserir registro para chaves n\u00e3o encontradas\nSET IDENTITY_INSERT dbo.dim_customer ON;\nINSERT INTO dbo.dim_customer (customer_key, customer_id, name, valid_from, valid_to, is_current)\nVALUES (-1, 'UNKNOWN', 'Unknown Customer', '1900-01-01', '9999-12-31', 1);\nSET IDENTITY_INSERT dbo.dim_customer OFF;\n</code></pre>"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#ferramentas-complementares","title":"Ferramentas complementares","text":"Ferramenta Uso SSIS ETL (extra\u00e7\u00e3o, transforma\u00e7\u00e3o, carga) SSAS Cubos OLAP e modelos tabulares SSRS Relat\u00f3rios Power BI Dashboards e self-service BI"},{"location":"2025/10/26/modelagem-dimensional-com-sql-server/#links","title":"Links","text":"<ul> <li>Kimball Group</li> <li>SSIS Docs</li> <li>SSAS Docs</li> </ul>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/","title":"Pandas: refer\u00eancia","text":"<p>Comandos e padr\u00f5es para manipula\u00e7\u00e3o de dados com Pandas.</p>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#instalacao","title":"Instala\u00e7\u00e3o","text":"<pre><code>uv add pandas\n# ou com todas as depend\u00eancias opcionais\nuv add \"pandas[all]\"\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#importacao","title":"Importa\u00e7\u00e3o","text":"<pre><code>import pandas as pd\nimport numpy as np\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#criando-dataframes","title":"Criando DataFrames","text":"<pre><code># De dicion\u00e1rio\ndf = pd.DataFrame({\n    'nome': ['Ana', 'Bruno', 'Carla'],\n    'idade': [25, 30, 28],\n    'cidade': ['SP', 'RJ', 'BH']\n})\n\n# De lista de dicion\u00e1rios\ndf = pd.DataFrame([\n    {'nome': 'Ana', 'idade': 25},\n    {'nome': 'Bruno', 'idade': 30}\n])\n\n# De NumPy array\ndf = pd.DataFrame(\n    np.random.randn(5, 3),\n    columns=['A', 'B', 'C']\n)\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#lendo-dados","title":"Lendo dados","text":"<pre><code># CSV\ndf = pd.read_csv('dados.csv')\ndf = pd.read_csv('dados.csv', sep=';', encoding='utf-8')\ndf = pd.read_csv('dados.csv', usecols=['col1', 'col2'])\ndf = pd.read_csv('dados.csv', dtype={'id': str})\ndf = pd.read_csv('dados.csv', parse_dates=['data'])\ndf = pd.read_csv('dados.csv', nrows=1000)  # primeiras N linhas\n\n# Excel\ndf = pd.read_excel('dados.xlsx', sheet_name='Plan1')\n\n# JSON\ndf = pd.read_json('dados.json')\ndf = pd.read_json('dados.json', lines=True)  # JSON Lines\n\n# Parquet\ndf = pd.read_parquet('dados.parquet')\n\n# SQL\nfrom sqlalchemy import create_engine\nengine = create_engine('postgresql://user:pass@host/db')\ndf = pd.read_sql('SELECT * FROM tabela', engine)\ndf = pd.read_sql_table('tabela', engine)\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#salvando-dados","title":"Salvando dados","text":"<pre><code># CSV\ndf.to_csv('saida.csv', index=False)\ndf.to_csv('saida.csv', index=False, sep=';')\n\n# Excel\ndf.to_excel('saida.xlsx', index=False, sheet_name='Dados')\n\n# JSON\ndf.to_json('saida.json', orient='records')\ndf.to_json('saida.json', orient='records', lines=True)\n\n# Parquet\ndf.to_parquet('saida.parquet', index=False)\n\n# SQL\ndf.to_sql('tabela', engine, if_exists='replace', index=False)\ndf.to_sql('tabela', engine, if_exists='append', index=False)\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#explorando-dados","title":"Explorando dados","text":"<pre><code>df.head()          # primeiras 5 linhas\ndf.head(10)        # primeiras 10 linhas\ndf.tail()          # \u00faltimas 5 linhas\ndf.sample(5)       # 5 linhas aleat\u00f3rias\n\ndf.shape           # (linhas, colunas)\ndf.columns         # nomes das colunas\ndf.dtypes          # tipos de cada coluna\ndf.info()          # resumo (tipos, n\u00e3o-nulos, mem\u00f3ria)\ndf.describe()      # estat\u00edsticas num\u00e9ricas\n\ndf['coluna'].value_counts()           # contagem de valores\ndf['coluna'].value_counts(normalize=True)  # percentual\ndf['coluna'].unique()                 # valores \u00fanicos\ndf['coluna'].nunique()                # quantidade de \u00fanicos\n\ndf.isnull().sum()       # nulos por coluna\ndf.duplicated().sum()   # linhas duplicadas\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#selecionando-dados","title":"Selecionando dados","text":"<pre><code># Colunas\ndf['coluna']              # Series\ndf[['col1', 'col2']]      # DataFrame\n\n# Linhas por \u00edndice\ndf.loc[0]                 # linha pelo label\ndf.loc[0:5]               # linhas 0 a 5 (inclusive)\ndf.loc[0:5, 'coluna']     # linhas e coluna\n\ndf.iloc[0]                # linha pela posi\u00e7\u00e3o\ndf.iloc[0:5]              # linhas 0 a 4\ndf.iloc[0:5, 0:2]         # linhas e colunas por posi\u00e7\u00e3o\n\n# Filtros\ndf[df['idade'] &gt; 25]\ndf[df['cidade'] == 'SP']\ndf[df['cidade'].isin(['SP', 'RJ'])]\ndf[df['nome'].str.contains('Ana')]\ndf[df['coluna'].notna()]\ndf[(df['idade'] &gt; 25) &amp; (df['cidade'] == 'SP')]\ndf[(df['idade'] &gt; 25) | (df['cidade'] == 'RJ')]\n\n# Query (mais leg\u00edvel)\ndf.query('idade &gt; 25')\ndf.query('cidade == \"SP\"')\ndf.query('idade &gt; 25 and cidade == \"SP\"')\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#modificando-dados","title":"Modificando dados","text":"<pre><code># Adicionar coluna\ndf['nova'] = df['col1'] + df['col2']\ndf['constante'] = 100\ndf['calculada'] = df['valor'] * 1.1\n\n# Renomear colunas\ndf.rename(columns={'old': 'new'}, inplace=True)\ndf.columns = ['col1', 'col2', 'col3']\n\n# Alterar tipos\ndf['coluna'] = df['coluna'].astype(int)\ndf['coluna'] = df['coluna'].astype(str)\ndf['data'] = pd.to_datetime(df['data'])\ndf['categoria'] = df['categoria'].astype('category')\n\n# Alterar valores\ndf.loc[df['idade'] &gt; 30, 'categoria'] = 'senior'\ndf['coluna'] = df['coluna'].replace({'old': 'new'})\ndf['coluna'] = df['coluna'].str.upper()\ndf['coluna'] = df['coluna'].str.strip()\n\n# Apply\ndf['nova'] = df['coluna'].apply(lambda x: x * 2)\ndf['nova'] = df.apply(lambda row: row['a'] + row['b'], axis=1)\n\n# Map\ndf['status_texto'] = df['status'].map({0: 'Inativo', 1: 'Ativo'})\n\n# Dropar colunas\ndf.drop(columns=['col1', 'col2'], inplace=True)\n\n# Dropar linhas\ndf.drop(index=[0, 1, 2], inplace=True)\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#lidando-com-nulos","title":"Lidando com nulos","text":"<pre><code># Verificar\ndf.isnull()\ndf.isnull().sum()\ndf.isnull().any()\n\n# Remover\ndf.dropna()                    # remove linhas com qualquer nulo\ndf.dropna(subset=['col1'])     # remove se col1 for nulo\ndf.dropna(how='all')           # remove se todas forem nulas\n\n# Preencher\ndf.fillna(0)\ndf.fillna({'col1': 0, 'col2': 'N/A'})\ndf['coluna'].fillna(df['coluna'].mean())\ndf['coluna'].fillna(method='ffill')  # forward fill\ndf['coluna'].fillna(method='bfill')  # backward fill\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#duplicados","title":"Duplicados","text":"<pre><code># Verificar\ndf.duplicated()\ndf.duplicated(subset=['col1', 'col2'])\n\n# Remover\ndf.drop_duplicates()\ndf.drop_duplicates(subset=['col1'], keep='first')\ndf.drop_duplicates(subset=['col1'], keep='last')\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#ordenacao","title":"Ordena\u00e7\u00e3o","text":"<pre><code>df.sort_values('coluna')\ndf.sort_values('coluna', ascending=False)\ndf.sort_values(['col1', 'col2'], ascending=[True, False])\ndf.sort_index()\n\n# Rank\ndf['rank'] = df['valor'].rank()\ndf['rank'] = df['valor'].rank(ascending=False)\ndf['rank'] = df.groupby('grupo')['valor'].rank()\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#agregacoes","title":"Agrega\u00e7\u00f5es","text":"<pre><code># B\u00e1sicas\ndf['coluna'].sum()\ndf['coluna'].mean()\ndf['coluna'].median()\ndf['coluna'].min()\ndf['coluna'].max()\ndf['coluna'].std()\ndf['coluna'].count()\n\n# M\u00faltiplas\ndf.agg({'col1': 'sum', 'col2': 'mean'})\ndf.agg({'col1': ['sum', 'mean'], 'col2': 'count'})\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#groupby","title":"GroupBy","text":"<pre><code># B\u00e1sico\ndf.groupby('categoria')['valor'].sum()\ndf.groupby('categoria')['valor'].mean()\ndf.groupby('categoria').size()\n\n# M\u00faltiplas colunas\ndf.groupby(['cat1', 'cat2'])['valor'].sum()\n\n# M\u00faltiplas agrega\u00e7\u00f5es\ndf.groupby('categoria').agg({\n    'valor': 'sum',\n    'quantidade': 'mean',\n    'id': 'count'\n})\n\n# Named aggregations\ndf.groupby('categoria').agg(\n    total=('valor', 'sum'),\n    media=('valor', 'mean'),\n    contagem=('id', 'count')\n)\n\n# Transform (mant\u00e9m shape original)\ndf['valor_normalizado'] = df.groupby('grupo')['valor'].transform(\n    lambda x: (x - x.mean()) / x.std()\n)\n\n# Filter\ndf.groupby('grupo').filter(lambda x: x['valor'].sum() &gt; 1000)\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#pivot-e-melt","title":"Pivot e Melt","text":"<pre><code># Pivot (long to wide)\ndf.pivot(index='data', columns='produto', values='vendas')\n\n# Pivot table (com agrega\u00e7\u00e3o)\ndf.pivot_table(\n    index='data',\n    columns='produto',\n    values='vendas',\n    aggfunc='sum',\n    fill_value=0\n)\n\n# Melt (wide to long)\ndf.melt(\n    id_vars=['data'],\n    value_vars=['prod_a', 'prod_b'],\n    var_name='produto',\n    value_name='vendas'\n)\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#joins","title":"Joins","text":"<pre><code># Merge (SQL-like)\npd.merge(df1, df2, on='id')\npd.merge(df1, df2, on='id', how='left')\npd.merge(df1, df2, on='id', how='right')\npd.merge(df1, df2, on='id', how='outer')\npd.merge(df1, df2, left_on='id1', right_on='id2')\npd.merge(df1, df2, on=['col1', 'col2'])\n\n# Join (por \u00edndice)\ndf1.join(df2, how='left')\n\n# Concat\npd.concat([df1, df2])                    # empilhar linhas\npd.concat([df1, df2], ignore_index=True)\npd.concat([df1, df2], axis=1)            # lado a lado\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#datas","title":"Datas","text":"<pre><code># Converter\ndf['data'] = pd.to_datetime(df['data'])\ndf['data'] = pd.to_datetime(df['data'], format='%d/%m/%Y')\n\n# Extrair componentes\ndf['ano'] = df['data'].dt.year\ndf['mes'] = df['data'].dt.month\ndf['dia'] = df['data'].dt.day\ndf['dia_semana'] = df['data'].dt.dayofweek\ndf['nome_dia'] = df['data'].dt.day_name()\ndf['trimestre'] = df['data'].dt.quarter\n\n# Aritm\u00e9tica\ndf['data'] + pd.Timedelta(days=7)\ndf['data'] - pd.Timedelta(hours=1)\n(df['data_fim'] - df['data_inicio']).dt.days\n\n# Filtrar\ndf[df['data'] &gt; '2025-01-01']\ndf[df['data'].between('2025-01-01', '2025-12-31')]\n\n# Resample (s\u00e9ries temporais)\ndf.set_index('data').resample('M')['valor'].sum()   # mensal\ndf.set_index('data').resample('W')['valor'].mean()  # semanal\ndf.set_index('data').resample('D')['valor'].sum()   # di\u00e1rio\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#strings","title":"Strings","text":"<pre><code># Acessar via .str\ndf['nome'].str.lower()\ndf['nome'].str.upper()\ndf['nome'].str.title()\ndf['nome'].str.strip()\ndf['nome'].str.replace('old', 'new')\ndf['nome'].str.contains('texto')\ndf['nome'].str.startswith('A')\ndf['nome'].str.endswith('a')\ndf['nome'].str.len()\ndf['nome'].str.split(',')\ndf['nome'].str.split(',').str[0]  # primeiro elemento\n\n# Regex\ndf['nome'].str.extract(r'(\\d+)')\ndf['nome'].str.findall(r'\\d+')\ndf['nome'].str.replace(r'\\s+', ' ', regex=True)\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#window-functions","title":"Window functions","text":"<pre><code># Rolling (janela m\u00f3vel)\ndf['media_movel'] = df['valor'].rolling(window=7).mean()\ndf['soma_movel'] = df['valor'].rolling(window=7).sum()\n\n# Expanding (acumulado)\ndf['acumulado'] = df['valor'].expanding().sum()\ndf['max_ate_aqui'] = df['valor'].expanding().max()\n\n# Shift (lag/lead)\ndf['valor_anterior'] = df['valor'].shift(1)   # lag\ndf['valor_proximo'] = df['valor'].shift(-1)   # lead\n\n# Diff\ndf['variacao'] = df['valor'].diff()\n\n# Pct change\ndf['variacao_pct'] = df['valor'].pct_change()\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#categorias","title":"Categorias","text":"<pre><code># Criar categoria\ndf['categoria'] = df['categoria'].astype('category')\n\n# Ordenar categorias\ndf['tamanho'] = pd.Categorical(\n    df['tamanho'],\n    categories=['P', 'M', 'G', 'GG'],\n    ordered=True\n)\n\n# Cut (bins)\ndf['faixa'] = pd.cut(df['idade'], bins=[0, 18, 30, 50, 100])\ndf['faixa'] = pd.cut(\n    df['idade'],\n    bins=[0, 18, 30, 50, 100],\n    labels=['Menor', 'Jovem', 'Adulto', 'Senior']\n)\n\n# Qcut (quantis)\ndf['quartil'] = pd.qcut(df['valor'], q=4)\ndf['quartil'] = pd.qcut(df['valor'], q=4, labels=['Q1', 'Q2', 'Q3', 'Q4'])\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#performance","title":"Performance","text":"<pre><code># Usar tipos eficientes\ndf['inteiro'] = df['inteiro'].astype('int32')\ndf['categoria'] = df['categoria'].astype('category')\n\n# Ler s\u00f3 colunas necess\u00e1rias\ndf = pd.read_csv('dados.csv', usecols=['col1', 'col2'])\n\n# Processar em chunks\nchunks = pd.read_csv('grande.csv', chunksize=10000)\nfor chunk in chunks:\n    processar(chunk)\n\n# Usar query() para filtros complexos\ndf.query('col1 &gt; 100 and col2 == \"A\"')  # mais r\u00e1pido que &amp;\n\n# Vetorizar opera\u00e7\u00f5es (evitar apply quando poss\u00edvel)\n# Ruim:\ndf['nova'] = df['col'].apply(lambda x: x * 2)\n# Bom:\ndf['nova'] = df['col'] * 2\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#method-chaining","title":"Method chaining","text":"<pre><code># Encadear opera\u00e7\u00f5es\nresultado = (\n    df\n    .query('idade &gt; 18')\n    .assign(idade_meses=lambda x: x['idade'] * 12)\n    .groupby('cidade')\n    .agg(\n        total=('valor', 'sum'),\n        media_idade=('idade', 'mean')\n    )\n    .sort_values('total', ascending=False)\n    .head(10)\n)\n</code></pre>"},{"location":"2025/07/20/pandas-refer%C3%AAncia/#links","title":"Links","text":"<ul> <li>Pandas Docs</li> <li>Pandas User Guide</li> <li>10 Minutes to Pandas</li> </ul>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/","title":"PostgreSQL: refer\u00eancia","text":"<p>Comandos e padr\u00f5es \u00fateis para PostgreSQL.</p> Script para criar tabelas usadas nos exemplos <pre><code>-- Departamentos\nCREATE TABLE departamentos (\n    id SERIAL PRIMARY KEY,\n    nome VARCHAR(100) NOT NULL\n);\n\nINSERT INTO departamentos (nome) VALUES\n('Engenharia'), ('Vendas'), ('RH'), ('Financeiro');\n\n-- Funcion\u00e1rios\nCREATE TABLE funcionarios (\n    id SERIAL PRIMARY KEY,\n    nome VARCHAR(100) NOT NULL,\n    email VARCHAR(100),\n    departamento_id INT REFERENCES departamentos(id),\n    gerente_id INT REFERENCES funcionarios(id),\n    salario NUMERIC(10,2),\n    data_contratacao DATE\n);\n\nINSERT INTO funcionarios (nome, email, departamento_id, gerente_id, salario, data_contratacao) VALUES\n('Ana Silva', 'ana@empresa.com', 1, NULL, 15000.00, '2020-01-15'),\n('Bruno Costa', 'bruno@empresa.com', 1, 1, 8000.00, '2021-03-10'),\n('Carla Santos', 'carla@empresa.com', 1, 1, 9500.00, '2020-06-20'),\n('Daniel Oliveira', 'daniel@empresa.com', 2, NULL, 12000.00, '2019-11-01'),\n('Eva Lima', 'eva@empresa.com', 2, 4, 7500.00, '2022-02-14'),\n('Fernando Dias', 'fernando@empresa.com', 3, NULL, 10000.00, '2021-08-30'),\n('Gisele Ramos', 'gisele@empresa.com', 4, NULL, 11000.00, '2020-04-25');\n\n-- Clientes\nCREATE TABLE clientes (\n    id SERIAL PRIMARY KEY,\n    nome VARCHAR(100) NOT NULL,\n    email VARCHAR(100),\n    cidade VARCHAR(50),\n    metadata JSONB DEFAULT '{}'\n);\n\nINSERT INTO clientes (nome, email, cidade, metadata) VALUES\n('Tech Solutions', 'contato@techsol.com', 'S\u00e3o Paulo', '{\"plano\": \"enterprise\", \"ativo\": true}'),\n('Data Corp', 'info@datacorp.com', 'Rio de Janeiro', '{\"plano\": \"pro\", \"ativo\": true}'),\n('Cloud Services', 'hello@cloudserv.com', 'Belo Horizonte', '{\"plano\": \"starter\", \"ativo\": false}'),\n('Digital Labs', 'contact@digilabs.com', 'S\u00e3o Paulo', '{\"plano\": \"pro\", \"ativo\": true}');\n\n-- Produtos\nCREATE TABLE produtos (\n    id SERIAL PRIMARY KEY,\n    nome VARCHAR(100) NOT NULL,\n    preco NUMERIC(10,2),\n    estoque INT DEFAULT 0,\n    tags TEXT[]\n);\n\nINSERT INTO produtos (nome, preco, estoque, tags) VALUES\n('Licen\u00e7a Software A', 500.00, 100, ARRAY['software', 'licen\u00e7a']),\n('Licen\u00e7a Software B', 1200.00, 50, ARRAY['software', 'licen\u00e7a', 'premium']),\n('Consultoria (hora)', 250.00, 999, ARRAY['servi\u00e7o', 'consultoria']),\n('Suporte Anual', 3000.00, 999, ARRAY['servi\u00e7o', 'suporte']);\n\n-- Pedidos\nCREATE TABLE pedidos (\n    id SERIAL PRIMARY KEY,\n    cliente_id INT REFERENCES clientes(id),\n    data DATE NOT NULL,\n    status VARCHAR(20) DEFAULT 'pendente'\n);\n\nINSERT INTO pedidos (cliente_id, data, status) VALUES\n(1, '2025-01-05', 'concluido'),\n(1, '2025-01-10', 'concluido'),\n(2, '2025-01-12', 'pendente'),\n(3, '2025-01-15', 'pendente'),\n(4, '2025-01-16', 'cancelado');\n\n-- Itens do pedido\nCREATE TABLE itens_pedido (\n    id SERIAL PRIMARY KEY,\n    pedido_id INT REFERENCES pedidos(id),\n    produto_id INT REFERENCES produtos(id),\n    quantidade INT,\n    valor_unitario NUMERIC(10,2)\n);\n\nINSERT INTO itens_pedido (pedido_id, produto_id, quantidade, valor_unitario) VALUES\n(1, 1, 10, 500.00),\n(1, 4, 1, 3000.00),\n(2, 2, 5, 1200.00),\n(2, 3, 8, 250.00),\n(3, 1, 20, 500.00),\n(4, 2, 3, 1200.00),\n(5, 3, 4, 250.00);\n\n-- Transa\u00e7\u00f5es\nCREATE TABLE transacoes (\n    id SERIAL PRIMARY KEY,\n    data DATE,\n    valor NUMERIC(10,2)\n);\n\nINSERT INTO transacoes (data, valor) VALUES\n('2025-01-01', 1000.00),\n('2025-01-02', -200.00),\n('2025-01-03', 500.00),\n('2025-01-04', -100.00),\n('2025-01-05', 800.00);\n\n-- Contas\nCREATE TABLE contas (\n    id INT PRIMARY KEY,\n    titular VARCHAR(100),\n    saldo NUMERIC(10,2)\n);\n\nINSERT INTO contas (id, titular, saldo) VALUES\n(1, 'Conta A', 5000.00),\n(2, 'Conta B', 3000.00);\n\n-- Logs (para particionamento)\nCREATE TABLE logs (\n    id SERIAL,\n    created_at TIMESTAMP NOT NULL,\n    nivel VARCHAR(10),\n    mensagem TEXT\n) PARTITION BY RANGE (created_at);\n\nCREATE TABLE logs_2025_01 PARTITION OF logs\n    FOR VALUES FROM ('2025-01-01') TO ('2025-02-01');\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#tipos-de-dados","title":"Tipos de dados","text":"<pre><code>-- Strings\nCHAR(10)          -- fixo\nVARCHAR(100)      -- vari\u00e1vel\nTEXT              -- ilimitado\n\n-- N\u00fameros\nINT / INTEGER     -- -2bi a 2bi\nBIGINT            -- muito grande\nNUMERIC(10,2)     -- precis\u00e3o exata (dinheiro)\nREAL / FLOAT      -- aproximado\n\n-- Data/hora\nDATE              -- s\u00f3 data\nTIME              -- s\u00f3 hora\nTIMESTAMP         -- data + hora\nTIMESTAMPTZ       -- com timezone (preferir)\nINTERVAL          -- dura\u00e7\u00e3o\n\n-- Outros\nBOOLEAN           -- true/false\nUUID              -- identificador \u00fanico\nJSONB             -- JSON bin\u00e1rio (preferir sobre JSON)\nTEXT[]            -- array de texto\nINT[]             -- array de inteiros\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#ctes","title":"CTEs","text":"<pre><code>WITH vendas_mes AS (\n    SELECT\n        cliente_id,\n        SUM(i.quantidade * i.valor_unitario) AS total\n    FROM pedidos p\n    JOIN itens_pedido i ON i.pedido_id = p.id\n    WHERE p.data &gt;= CURRENT_DATE - INTERVAL '1 month'\n    GROUP BY cliente_id\n)\nSELECT * FROM vendas_mes WHERE total &gt; 1000;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#cte-recursiva","title":"CTE recursiva","text":"<pre><code>WITH RECURSIVE hierarquia AS (\n    -- \u00c2ncora\n    SELECT id, nome, gerente_id, 0 AS nivel\n    FROM funcionarios\n    WHERE gerente_id IS NULL\n\n    UNION ALL\n\n    -- Recurs\u00e3o\n    SELECT f.id, f.nome, f.gerente_id, h.nivel + 1\n    FROM funcionarios f\n    INNER JOIN hierarquia h ON f.gerente_id = h.id\n)\nSELECT * FROM hierarquia;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#window-functions","title":"Window functions","text":"<pre><code>SELECT\n    nome,\n    departamento_id,\n    salario,\n    ROW_NUMBER() OVER (ORDER BY salario DESC) AS ranking,\n    RANK() OVER (ORDER BY salario DESC) AS rank_com_gaps,\n    DENSE_RANK() OVER (ORDER BY salario DESC) AS rank_sem_gaps,\n    SUM(salario) OVER (PARTITION BY departamento_id) AS total_dept,\n    AVG(salario) OVER () AS media_geral,\n    LAG(salario) OVER (ORDER BY data_contratacao) AS salario_anterior,\n    LEAD(salario) OVER (ORDER BY data_contratacao) AS salario_proximo\nFROM funcionarios;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#running-total","title":"Running total","text":"<pre><code>SELECT\n    data,\n    valor,\n    SUM(valor) OVER (ORDER BY data ROWS UNBOUNDED PRECEDING) AS acumulado\nFROM transacoes;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#upsert-insert-on-conflict","title":"UPSERT (INSERT ON CONFLICT)","text":"<pre><code>INSERT INTO clientes (id, nome, email)\nVALUES (1, 'Tech Solutions Ltda', 'novo@techsol.com')\nON CONFLICT (id) DO UPDATE SET\n    nome = EXCLUDED.nome,\n    email = EXCLUDED.email;\n\n-- Ignorar conflito\nINSERT INTO clientes (id, nome, email)\nVALUES (1, 'Tech Solutions', 'contato@techsol.com')\nON CONFLICT DO NOTHING;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#returning","title":"RETURNING","text":"<pre><code>-- Retorna dados ap\u00f3s INSERT/UPDATE/DELETE\nINSERT INTO clientes (nome, email)\nVALUES ('Nova Empresa', 'contato@nova.com')\nRETURNING id, nome;\n\nUPDATE produtos\nSET preco = preco * 1.1\nWHERE estoque &lt; 10\nRETURNING id, nome, preco;\n\nDELETE FROM pedidos\nWHERE status = 'cancelado'\nRETURNING *;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#jsonb","title":"JSONB","text":"<pre><code>-- Criar\nSELECT '{\"nome\": \"Jo\u00e3o\", \"idade\": 30}'::JSONB;\n\n-- Acessar campo\nSELECT metadata-&gt;&gt;'plano' FROM clientes;          -- como texto\nSELECT metadata-&gt;'plano' FROM clientes;           -- como jsonb\n\n-- Acessar nested\nSELECT metadata-&gt;'endereco'-&gt;&gt;'cidade' FROM clientes;\n\n-- Filtrar\nSELECT * FROM clientes\nWHERE metadata-&gt;&gt;'plano' = 'enterprise';\n\nSELECT * FROM clientes\nWHERE metadata @&gt; '{\"ativo\": true}';  -- cont\u00e9m\n\n-- Atualizar campo\nUPDATE clientes\nSET metadata = jsonb_set(metadata, '{plano}', '\"pro\"')\nWHERE id = 1;\n\n-- Adicionar campo\nUPDATE clientes\nSET metadata = metadata || '{\"desconto\": 10}'\nWHERE id = 1;\n\n-- Remover campo\nUPDATE clientes\nSET metadata = metadata - 'desconto'\nWHERE id = 1;\n\n-- Agregar em JSON\nSELECT jsonb_agg(nome) FROM clientes;\nSELECT jsonb_object_agg(id, nome) FROM clientes;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#arrays","title":"Arrays","text":"<pre><code>-- Criar\nSELECT ARRAY['a', 'b', 'c'];\nSELECT '{a,b,c}'::TEXT[];\n\n-- Acessar (1-indexed)\nSELECT tags[1] FROM produtos;\n\n-- Cont\u00e9m\nSELECT * FROM produtos WHERE 'premium' = ANY(tags);\nSELECT * FROM produtos WHERE tags @&gt; ARRAY['software'];\n\n-- Adicionar\nUPDATE produtos\nSET tags = array_append(tags, 'novo')\nWHERE id = 1;\n\n-- Remover\nUPDATE produtos\nSET tags = array_remove(tags, 'novo')\nWHERE id = 1;\n\n-- Expandir (unnest)\nSELECT id, unnest(tags) AS tag FROM produtos;\n\n-- Agregar\nSELECT array_agg(nome) FROM clientes;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#string_agg","title":"STRING_AGG","text":"<pre><code>SELECT\n    departamento_id,\n    STRING_AGG(nome, ', ' ORDER BY nome) AS funcionarios\nFROM funcionarios\nGROUP BY departamento_id;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#funcoes-de-data","title":"Fun\u00e7\u00f5es de data","text":"<pre><code>NOW()                                    -- timestamp atual\nCURRENT_DATE                             -- s\u00f3 data\nCURRENT_TIMESTAMP                        -- com timezone\n\n-- Aritm\u00e9tica\nCURRENT_DATE + INTERVAL '7 days'\nCURRENT_DATE - INTERVAL '1 month'\n\n-- Diferen\u00e7a\nAGE(data_fim, data_inicio)               -- retorna interval\nDATE_PART('day', AGE(data_fim, data_inicio))  -- em dias\n\n-- Extrair\nEXTRACT(YEAR FROM data)\nEXTRACT(MONTH FROM data)\nDATE_TRUNC('month', data)                -- truncar para in\u00edcio do m\u00eas\n\n-- Construir\nMAKE_DATE(2025, 1, 15)\nTO_DATE('15/01/2025', 'DD/MM/YYYY')\nTO_TIMESTAMP('2025-01-15 10:30', 'YYYY-MM-DD HH24:MI')\n\n-- Formatar\nTO_CHAR(NOW(), 'DD/MM/YYYY HH24:MI')\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#coalesce-nullif-case","title":"COALESCE / NULLIF / CASE","text":"<pre><code>COALESCE(a, b, c)      -- primeiro n\u00e3o-nulo\nNULLIF(a, b)           -- se a = b, retorna null\n\nCASE\n    WHEN nota &gt;= 9 THEN 'A'\n    WHEN nota &gt;= 7 THEN 'B'\n    WHEN nota &gt;= 5 THEN 'C'\n    ELSE 'F'\nEND\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#limit-offset-paginacao","title":"LIMIT / OFFSET (pagina\u00e7\u00e3o)","text":"<pre><code>SELECT *\nFROM produtos\nORDER BY nome\nLIMIT 10 OFFSET 20;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#lateral-join","title":"LATERAL JOIN","text":"<pre><code>-- Subquery correlacionada como JOIN\nSELECT c.nome, ultimos.*\nFROM clientes c\nCROSS JOIN LATERAL (\n    SELECT p.data, p.status\n    FROM pedidos p\n    WHERE p.cliente_id = c.id\n    ORDER BY p.data DESC\n    LIMIT 3\n) ultimos;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#filter","title":"FILTER","text":"<pre><code>SELECT\n    COUNT(*) AS total,\n    COUNT(*) FILTER (WHERE status = 'concluido') AS concluidos,\n    COUNT(*) FILTER (WHERE status = 'pendente') AS pendentes,\n    SUM(valor) FILTER (WHERE valor &gt; 0) AS entradas\nFROM pedidos p\nJOIN itens_pedido i ON i.pedido_id = p.id;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#distinct-on","title":"DISTINCT ON","text":"<pre><code>-- Primeiro registro de cada grupo\nSELECT DISTINCT ON (cliente_id)\n    cliente_id, data, status\nFROM pedidos\nORDER BY cliente_id, data DESC;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#transacoes","title":"Transa\u00e7\u00f5es","text":"<pre><code>BEGIN;\n\nUPDATE contas SET saldo = saldo - 100 WHERE id = 1;\nUPDATE contas SET saldo = saldo + 100 WHERE id = 2;\n\n-- Se tudo ok\nCOMMIT;\n\n-- Se erro\nROLLBACK;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#savepoints","title":"Savepoints","text":"<pre><code>BEGIN;\nUPDATE contas SET saldo = saldo - 100 WHERE id = 1;\n\nSAVEPOINT antes_transferencia;\n\nUPDATE contas SET saldo = saldo + 100 WHERE id = 2;\n\n-- Desfaz s\u00f3 at\u00e9 o savepoint\nROLLBACK TO antes_transferencia;\n\nCOMMIT;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#indices","title":"\u00cdndices","text":"<pre><code>-- B-tree (padr\u00e3o)\nCREATE INDEX idx_pedidos_cliente ON pedidos(cliente_id);\n\n-- Composto\nCREATE INDEX idx_pedidos_data_cliente ON pedidos(data, cliente_id);\n\n-- Parcial\nCREATE INDEX idx_pedidos_pendentes ON pedidos(data)\nWHERE status = 'pendente';\n\n-- JSONB\nCREATE INDEX idx_clientes_metadata ON clientes USING GIN(metadata);\n\n-- Array\nCREATE INDEX idx_produtos_tags ON produtos USING GIN(tags);\n\n-- Texto (busca)\nCREATE INDEX idx_clientes_nome ON clientes USING GIN(nome gin_trgm_ops);\n\n-- Unique\nCREATE UNIQUE INDEX idx_clientes_email ON clientes(email);\n\n-- Concurrent (n\u00e3o bloqueia)\nCREATE INDEX CONCURRENTLY idx_nome ON tabela(coluna);\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#explain","title":"EXPLAIN","text":"<pre><code>-- Plano estimado\nEXPLAIN SELECT * FROM pedidos WHERE cliente_id = 1;\n\n-- Plano real com execu\u00e7\u00e3o\nEXPLAIN ANALYZE SELECT * FROM pedidos WHERE cliente_id = 1;\n\n-- Com buffers e timing\nEXPLAIN (ANALYZE, BUFFERS, TIMING)\nSELECT * FROM pedidos WHERE cliente_id = 1;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#queries-uteis","title":"Queries \u00fateis","text":""},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#tabelas-e-tamanhos","title":"Tabelas e tamanhos","text":"<pre><code>SELECT\n    relname AS tabela,\n    n_live_tup AS linhas,\n    pg_size_pretty(pg_total_relation_size(relid)) AS tamanho\nFROM pg_stat_user_tables\nORDER BY pg_total_relation_size(relid) DESC;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#indices-nao-utilizados","title":"\u00cdndices n\u00e3o utilizados","text":"<pre><code>SELECT\n    indexrelname AS indice,\n    relname AS tabela,\n    idx_scan AS scans,\n    pg_size_pretty(pg_relation_size(indexrelid)) AS tamanho\nFROM pg_stat_user_indexes\nWHERE idx_scan = 0\nORDER BY pg_relation_size(indexrelid) DESC;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#queries-lentas-requer-pg_stat_statements","title":"Queries lentas (requer pg_stat_statements)","text":"<pre><code>SELECT\n    calls,\n    mean_exec_time::INT AS avg_ms,\n    SUBSTRING(query, 1, 100) AS query\nFROM pg_stat_statements\nORDER BY mean_exec_time DESC\nLIMIT 10;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#locks-ativos","title":"Locks ativos","text":"<pre><code>SELECT\n    pid,\n    mode,\n    relation::regclass,\n    query\nFROM pg_locks l\nJOIN pg_stat_activity a ON l.pid = a.pid\nWHERE relation IS NOT NULL;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#conexoes-ativas","title":"Conex\u00f5es ativas","text":"<pre><code>SELECT\n    state,\n    COUNT(*) AS conexoes,\n    MAX(NOW() - state_change) AS mais_antiga\nFROM pg_stat_activity\nWHERE datname = current_database()\nGROUP BY state;\n</code></pre>"},{"location":"2025/04/06/postgresql-refer%C3%AAncia/#links","title":"Links","text":"<ul> <li>PostgreSQL Docs</li> <li>PostgreSQL Tutorial</li> <li>Explain Visualizer</li> </ul>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/","title":"PowerShell: refer\u00eancia","text":"<p>Refer\u00eancia completa de PowerShell para uso no dia-a-dia. Cobre desde conceitos b\u00e1sicos at\u00e9 fun\u00e7\u00f5es avan\u00e7adas.</p>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#conceitos-basicos","title":"Conceitos b\u00e1sicos","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#variaveis","title":"Vari\u00e1veis","text":"<pre><code># Vari\u00e1veis come\u00e7am com $\n$nome = \"Jo\u00e3o\"\n$idade = 30\n$ativo = $true\n\n# Tipos expl\u00edcitos\n[string]$texto = \"Hello\"\n[int]$numero = 42\n[bool]$flag = $false\n[datetime]$data = Get-Date\n\n# Constantes (n\u00e3o podem ser alteradas)\nSet-Variable -Name PI -Value 3.14159 -Option Constant\n\n# Vari\u00e1veis de ambiente\n$env:PATH\n$env:HOME\n$env:USERNAME\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#tipos-de-dados","title":"Tipos de dados","text":"<pre><code># Strings\n$str = \"texto\"\n$str = 'texto literal (sem interpola\u00e7\u00e3o)'\n\n# N\u00fameros\n$int = 42\n$float = 3.14\n$decimal = 19.99d\n\n# Boolean\n$verdadeiro = $true\n$falso = $false\n\n# Array\n$arr = @(1, 2, 3)\n$arr = 1, 2, 3  # sintaxe alternativa\n\n# Hashtable\n$hash = @{\n    Nome = \"Jo\u00e3o\"\n    Idade = 30\n}\n\n# Null\n$nulo = $null\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#variaveis-automaticas","title":"Vari\u00e1veis autom\u00e1ticas","text":"<pre><code>$_              # objeto atual no pipeline\n$PSVersionTable # informa\u00e7\u00f5es da vers\u00e3o do PowerShell\n$HOME           # diret\u00f3rio home do usu\u00e1rio\n$PWD            # diret\u00f3rio atual\n$PROFILE        # caminho do arquivo de perfil\n$?              # status do \u00faltimo comando (True/False)\n$LASTEXITCODE   # c\u00f3digo de sa\u00edda do \u00faltimo programa nativo\n$args           # argumentos passados para script/fun\u00e7\u00e3o\n$input          # entrada do pipeline em fun\u00e7\u00f5es\n$Error          # array de erros recentes\n$null           # valor nulo\n$true           # booleano verdadeiro\n$false          # booleano falso\n</code></pre> <p>Verificar vers\u00e3o do PowerShell</p> <p>Use <code>$PSVersionTable.PSVersion</code> para ver a vers\u00e3o instalada. PowerShell 7+ \u00e9 cross-platform (Windows, Linux, macOS).</p>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#comandos-de-descoberta","title":"Comandos de descoberta","text":"<pre><code># Descobrir comandos dispon\u00edveis\nGet-Command                          # todos os comandos\nGet-Command -Name *process*          # comandos com \"process\"\nGet-Command -Module Microsoft.PowerShell.Management\n\n# Ajuda detalhada\nGet-Help Get-Process                 # ajuda b\u00e1sica\nGet-Help Get-Process -Detailed       # com exemplos\nGet-Help Get-Process -Full           # completa\nGet-Help Get-Process -Online         # abre no browser\nGet-Help about_*                     # t\u00f3picos conceituais\n\n# Inspecionar objetos\nGet-Process | Get-Member             # propriedades e m\u00e9todos\nGet-Process | Get-Member -MemberType Property\nGet-Process | Get-Member -MemberType Method\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#aliases-comuns","title":"Aliases comuns","text":"<pre><code># Navega\u00e7\u00e3o\ncd      # Set-Location\npwd     # Get-Location\nls      # Get-ChildItem\ndir     # Get-ChildItem\n\n# Arquivos\ncp      # Copy-Item\nmv      # Move-Item\nrm      # Remove-Item\ncat     # Get-Content\nmkdir   # New-Item -ItemType Directory\n\n# Outros\necho    # Write-Output\ncls     # Clear-Host\nwhere   # Where-Object\nselect  # Select-Object\nforeach # ForEach-Object\n%       # ForEach-Object\n?       # Where-Object\n</code></pre> <p>Descobrir alias</p> <p>Use <code>Get-Alias -Name ls</code> para ver o cmdlet por tr\u00e1s de um alias, ou <code>Get-Alias -Definition Get-ChildItem</code> para ver todos os aliases de um cmdlet.</p>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#sistema-de-arquivos","title":"Sistema de arquivos","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#navegacao","title":"Navega\u00e7\u00e3o","text":"<pre><code># Localiza\u00e7\u00e3o atual\nGet-Location           # pwd\nSet-Location C:\\Users  # cd\n\n# Voltar ao diret\u00f3rio anterior\nPush-Location C:\\Temp  # salva atual e vai para C:\\Temp\nPop-Location           # volta ao diret\u00f3rio salvo\n\n# Home do usu\u00e1rio\nSet-Location ~\nSet-Location $HOME\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#listar-arquivos","title":"Listar arquivos","text":"<pre><code># Listar conte\u00fado\nGet-ChildItem                        # ls\nGet-ChildItem -Force                 # incluir ocultos\nGet-ChildItem -Recurse               # recursivo\nGet-ChildItem -File                  # s\u00f3 arquivos\nGet-ChildItem -Directory             # s\u00f3 diret\u00f3rios\n\n# Filtrar por padr\u00e3o\nGet-ChildItem *.txt\nGet-ChildItem -Filter *.log\nGet-ChildItem -Include *.txt, *.md -Recurse\nGet-ChildItem -Exclude *.tmp -Recurse\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#manipular-arquivos","title":"Manipular arquivos","text":"<pre><code># Criar\nNew-Item -Path arquivo.txt -ItemType File\nNew-Item -Path pasta -ItemType Directory\nNew-Item arquivo.txt -Value \"conte\u00fado inicial\"\n\n# Copiar\nCopy-Item origem.txt destino.txt\nCopy-Item pasta -Destination nova-pasta -Recurse\n\n# Mover/Renomear\nMove-Item arquivo.txt nova-pasta/\nRename-Item arquivo.txt novo-nome.txt\n\n# Remover\nRemove-Item arquivo.txt\nRemove-Item pasta -Recurse              # diret\u00f3rio com conte\u00fado\nRemove-Item pasta -Recurse -Force       # for\u00e7ar remo\u00e7\u00e3o\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#conteudo-de-arquivos","title":"Conte\u00fado de arquivos","text":"<pre><code># Ler\nGet-Content arquivo.txt\nGet-Content arquivo.txt -Head 10        # primeiras 10 linhas\nGet-Content arquivo.txt -Tail 10        # \u00faltimas 10 linhas\nGet-Content arquivo.txt -Tail 10 -Wait  # como tail -f\n\n# Escrever (sobrescreve)\nSet-Content arquivo.txt -Value \"novo conte\u00fado\"\n\"texto\" | Set-Content arquivo.txt\n\n# Adicionar (append)\nAdd-Content arquivo.txt -Value \"mais uma linha\"\n\"texto\" | Add-Content arquivo.txt\n\n# Limpar conte\u00fado\nClear-Content arquivo.txt\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#paths","title":"Paths","text":"<pre><code># Construir paths\nJoin-Path -Path \"C:\\Users\" -ChildPath \"Jo\u00e3o\"\nJoin-Path \"C:\\Users\" \"Jo\u00e3o\" \"Documents\"  # m\u00faltiplos segmentos\n\n# Separar paths\nSplit-Path \"C:\\Users\\Jo\u00e3o\\arquivo.txt\"              # C:\\Users\\Jo\u00e3o\nSplit-Path \"C:\\Users\\Jo\u00e3o\\arquivo.txt\" -Leaf        # arquivo.txt\nSplit-Path \"C:\\Users\\Jo\u00e3o\\arquivo.txt\" -Extension   # .txt (PS 6+)\n\n# Verificar exist\u00eancia\nTest-Path arquivo.txt\nTest-Path pasta -PathType Container     # \u00e9 diret\u00f3rio?\nTest-Path arquivo.txt -PathType Leaf    # \u00e9 arquivo?\n\n# Resolver path\nResolve-Path *.txt                      # paths completos que batem\nResolve-Path ~                          # expande ~\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#strings","title":"Strings","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#interpolacao","title":"Interpola\u00e7\u00e3o","text":"<pre><code>$nome = \"Jo\u00e3o\"\n$idade = 30\n\n# Aspas duplas: interpola vari\u00e1veis\n\"Ol\u00e1, $nome!\"                           # Ol\u00e1, Jo\u00e3o!\n\"Idade: $($idade + 1)\"                  # Idade: 31 (express\u00e3o)\n\"Home: $($env:HOME)\"                    # vari\u00e1vel de ambiente\n\n# Aspas simples: literal\n'Ol\u00e1, $nome!'                           # Ol\u00e1, $nome! (literal)\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#here-strings","title":"Here-strings","text":"<pre><code># Here-string com interpola\u00e7\u00e3o\n$json = @\"\n{\n    \"nome\": \"$nome\",\n    \"idade\": $idade\n}\n\"@\n\n# Here-string literal\n$template = @'\nTexto com $vari\u00e1veis que n\u00e3o ser\u00e3o interpoladas.\n\u00datil para templates ou regex.\n'@\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#metodos-de-string","title":"M\u00e9todos de string","text":"<pre><code>$str = \"  Hello, World!  \"\n\n# Transforma\u00e7\u00e3o\n$str.ToUpper()                          # \"  HELLO, WORLD!  \"\n$str.ToLower()                          # \"  hello, world!  \"\n$str.Trim()                             # \"Hello, World!\"\n$str.TrimStart()                        # \"Hello, World!  \"\n$str.TrimEnd()                          # \"  Hello, World!\"\n\n# Busca\n$str.Contains(\"World\")                  # True\n$str.StartsWith(\"  Hello\")              # True\n$str.EndsWith(\"!  \")                    # True\n$str.IndexOf(\"World\")                   # 9\n\n# Manipula\u00e7\u00e3o\n$str.Replace(\"World\", \"PowerShell\")     # \"  Hello, PowerShell!  \"\n$str.Substring(2, 5)                    # \"Hello\"\n$str.Split(\",\")                         # @(\"  Hello\", \" World!  \")\n\"a,b,c\".Split(\",\")                      # @(\"a\", \"b\", \"c\")\n\n# Juntar array em string\n$arr = @(\"a\", \"b\", \"c\")\n$arr -join \", \"                         # \"a, b, c\"\n[string]::Join(\"-\", $arr)               # \"a-b-c\"\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#operadores-de-string","title":"Operadores de string","text":"<pre><code># -like (wildcard)\n\"PowerShell\" -like \"Power*\"             # True\n\"PowerShell\" -like \"*Shell\"             # True\n\"PowerShell\" -like \"*wer*\"              # True\n\n# -match (regex)\n\"PowerShell 7.4\" -match \"\\d+\\.\\d+\"      # True\n$Matches[0]                             # \"7.4\"\n\n# -replace (regex)\n\"Hello World\" -replace \"World\", \"PS\"    # \"Hello PS\"\n\"abc123\" -replace \"\\d+\", \"XXX\"          # \"abcXXX\"\n\n# -split\n\"a,b,c\" -split \",\"                      # @(\"a\", \"b\", \"c\")\n\"a1b2c3\" -split \"\\d\"                    # @(\"a\", \"b\", \"c\", \"\")\n</code></pre> <p>Case sensitivity</p> <p>Por padr\u00e3o, operadores de string s\u00e3o case-insensitive. Use vers\u00f5es com 'c' para case-sensitive: <code>-clike</code>, <code>-cmatch</code>, <code>-creplace</code>.</p>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#arrays-e-hashtables","title":"Arrays e Hashtables","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#arrays","title":"Arrays","text":"<pre><code># Criar\n$arr = @(1, 2, 3)\n$arr = 1, 2, 3                          # sintaxe simplificada\n$arr = @()                              # array vazio\n$arr = 1..10                            # range: 1 a 10\n\n# Acessar\n$arr[0]                                 # primeiro elemento\n$arr[-1]                                # \u00faltimo elemento\n$arr[0..2]                              # slice: primeiros 3\n$arr[-3..-1]                            # \u00faltimos 3\n\n# Modificar\n$arr += 4                               # adicionar (cria novo array!)\n$arr[0] = 99                            # alterar elemento\n\n# Propriedades\n$arr.Count                              # quantidade de elementos\n$arr.Length                             # mesmo que Count\n\n# Verificar conte\u00fado\n$arr -contains 2                        # True\n2 -in $arr                              # True (PS 3+)\n$arr -notcontains 99                    # True\n</code></pre> <p>Performance com arrays</p> <p><code>$arr += item</code> cria um novo array a cada adi\u00e7\u00e3o. Para muitas inser\u00e7\u00f5es, use <code>[System.Collections.ArrayList]</code> ou <code>[System.Collections.Generic.List[object]]</code>.</p>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#arraylist-mutavel","title":"ArrayList (mut\u00e1vel)","text":"<pre><code>$list = [System.Collections.ArrayList]@()\n$list.Add(\"item\")                       # retorna \u00edndice\n[void]$list.Add(\"item2\")                # suprime retorno\n$list.Remove(\"item\")\n$list.RemoveAt(0)\n$list.Clear()\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#hashtables","title":"Hashtables","text":"<pre><code># Criar\n$hash = @{\n    Nome = \"Jo\u00e3o\"\n    Idade = 30\n    Ativo = $true\n}\n$hash = @{}                             # hashtable vazia\n\n# Acessar\n$hash[\"Nome\"]                           # \"Jo\u00e3o\"\n$hash.Nome                              # \"Jo\u00e3o\" (sintaxe de propriedade)\n$hash.Keys                              # todas as chaves\n$hash.Values                            # todos os valores\n\n# Modificar\n$hash[\"Email\"] = \"joao@email.com\"       # adicionar/atualizar\n$hash.Cidade = \"S\u00e3o Paulo\"              # sintaxe alternativa\n$hash.Remove(\"Idade\")                   # remover\n\n# Verificar\n$hash.ContainsKey(\"Nome\")               # True\n$hash.ContainsValue(\"Jo\u00e3o\")             # True\n$hash.Count                             # quantidade de pares\n\n# Iterar\nforeach ($key in $hash.Keys) {\n    \"$key = $($hash[$key])\"\n}\n\n$hash.GetEnumerator() | ForEach-Object {\n    \"$($_.Key) = $($_.Value)\"\n}\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#ordered-hashtable","title":"Ordered hashtable","text":"<pre><code># Mant\u00e9m ordem de inser\u00e7\u00e3o\n$ordered = [ordered]@{\n    Primeiro = 1\n    Segundo = 2\n    Terceiro = 3\n}\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#pipeline-e-objetos","title":"Pipeline e objetos","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#pipeline-basico","title":"Pipeline b\u00e1sico","text":"<pre><code># Passar objetos entre comandos\nGet-Process | Sort-Object CPU -Descending | Select-Object -First 5\n\n# $_ representa o objeto atual\nGet-Process | Where-Object { $_.CPU -gt 100 }\n\n# Sintaxe simplificada (PS 3+)\nGet-Process | Where-Object CPU -gt 100\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#where-object-filtrar","title":"Where-Object (filtrar)","text":"<pre><code># Filtrar com script block\nGet-Process | Where-Object { $_.CPU -gt 100 }\nGet-Process | Where-Object { $_.Name -like \"*chrome*\" }\nGet-Process | Where-Object { $_.WorkingSet -gt 100MB }\n\n# Sintaxe simplificada\nGet-Process | Where-Object CPU -gt 100\nGet-Process | Where-Object Name -like \"*chrome*\"\n\n# M\u00faltiplas condi\u00e7\u00f5es\nGet-Process | Where-Object { $_.CPU -gt 100 -and $_.Name -ne \"Idle\" }\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#select-object-projetar","title":"Select-Object (projetar)","text":"<pre><code># Selecionar propriedades\nGet-Process | Select-Object Name, CPU, WorkingSet\nGet-Process | Select-Object -Property Name, CPU\n\n# Limitar resultados\nGet-Process | Select-Object -First 5\nGet-Process | Select-Object -Last 3\nGet-Process | Select-Object -Skip 10 -First 5\n\n# Propriedades calculadas\nGet-Process | Select-Object Name, @{\n    Name = \"MemoriaMB\"\n    Expression = { [math]::Round($_.WorkingSet / 1MB, 2) }\n}\n\n# Expandir propriedade (extrair valor)\nGet-Process | Select-Object -ExpandProperty Name    # retorna strings, n\u00e3o objetos\n\n# Propriedades \u00fanicas\nGet-Process | Select-Object Name -Unique\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#foreach-object-transformar","title":"ForEach-Object (transformar)","text":"<pre><code># Executar a\u00e7\u00e3o em cada item\nGet-Process | ForEach-Object { $_.Name.ToUpper() }\n1..5 | ForEach-Object { $_ * 2 }        # 2, 4, 6, 8, 10\n\n# Sintaxe simplificada\nGet-Process | ForEach-Object Name       # extrai propriedade\n\n# M\u00faltiplos script blocks\n1..3 | ForEach-Object -Begin { \"In\u00edcio\" } -Process { \"Item: $_\" } -End { \"Fim\" }\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#sort-object-ordenar","title":"Sort-Object (ordenar)","text":"<pre><code>Get-Process | Sort-Object CPU\nGet-Process | Sort-Object CPU -Descending\nGet-Process | Sort-Object CPU, Name                 # m\u00faltiplas propriedades\nGet-Process | Sort-Object { $_.WorkingSet } -Descending\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#group-object-agrupar","title":"Group-Object (agrupar)","text":"<pre><code>Get-Process | Group-Object ProcessName\nGet-Service | Group-Object Status\n\n# Acessar grupos\n$grupos = Get-Process | Group-Object ProcessName\n$grupos[0].Name                         # nome do grupo\n$grupos[0].Count                        # quantidade no grupo\n$grupos[0].Group                        # itens do grupo\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#measure-object-estatisticas","title":"Measure-Object (estat\u00edsticas)","text":"<pre><code># Contar\nGet-Process | Measure-Object            # Count\nGet-ChildItem | Measure-Object\n\n# Estat\u00edsticas num\u00e9ricas\nGet-Process | Measure-Object CPU -Sum -Average -Maximum -Minimum\n(Get-Content arquivo.txt | Measure-Object -Line -Word -Character)\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#outros-cmdlets-uteis","title":"Outros cmdlets \u00fateis","text":"<pre><code># Comparar\nCompare-Object $array1 $array2\n\n# Tee (bifurcar output)\nGet-Process | Tee-Object -Variable processos | Where-Object CPU -gt 100\n\n# Out-Null (descartar output)\nRemove-Item arquivo.txt | Out-Null\n$null = Remove-Item arquivo.txt         # alternativa\n</code></pre> <p>Pipeline vs ForEach</p> <p>Para opera\u00e7\u00f5es simples, pipeline \u00e9 mais idiom\u00e1tico. Para l\u00f3gica complexa ou quando precisa de \u00edndice, use <code>foreach</code> statement.</p>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#condicionais","title":"Condicionais","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#ifelseifelse","title":"if/elseif/else","text":"<pre><code>$idade = 25\n\nif ($idade -lt 18) {\n    \"Menor de idade\"\n}\nelseif ($idade -lt 65) {\n    \"Adulto\"\n}\nelse {\n    \"Idoso\"\n}\n\n# Uma linha\nif ($valor) { \"Verdadeiro\" } else { \"Falso\" }\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#operadores-de-comparacao","title":"Operadores de compara\u00e7\u00e3o","text":"<pre><code># Igualdade\n$a -eq $b                               # igual\n$a -ne $b                               # diferente\n\n# Num\u00e9ricos\n$a -gt $b                               # maior que\n$a -ge $b                               # maior ou igual\n$a -lt $b                               # menor que\n$a -le $b                               # menor ou igual\n\n# String (case-insensitive por padr\u00e3o)\n$str -like \"padr*\"                      # wildcard\n$str -notlike \"padr*\"\n$str -match \"regex\"                     # regex\n$str -notmatch \"regex\"\n\n# Vers\u00f5es case-sensitive\n$str -ceq \"Texto\"                       # igual case-sensitive\n$str -clike \"Pad*\"\n$str -cmatch \"Regex\"\n\n# Cole\u00e7\u00f5es\n$arr -contains \"item\"                   # cont\u00e9m\n\"item\" -in $arr                         # est\u00e1 em\n$arr -notcontains \"item\"\n\"item\" -notin $arr\n\n# Tipo\n$obj -is [string]                       # \u00e9 do tipo\n$obj -isnot [int]\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#operadores-logicos","title":"Operadores l\u00f3gicos","text":"<pre><code>$a -and $b                              # E\n$a -or $b                               # OU\n-not $a                                 # N\u00c3O\n!$a                                     # N\u00c3O (alternativa)\n$a -xor $b                              # OU exclusivo\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#switch","title":"switch","text":"<pre><code>$dia = \"segunda\"\n\nswitch ($dia) {\n    \"segunda\" { \"In\u00edcio da semana\" }\n    \"sexta\" { \"Quase fim de semana!\" }\n    \"s\u00e1bado\" { \"Fim de semana!\" }\n    \"domingo\" { \"Fim de semana!\" }\n    default { \"Dia comum\" }\n}\n\n# Com wildcard\nswitch -Wildcard ($arquivo) {\n    \"*.txt\" { \"Arquivo de texto\" }\n    \"*.ps1\" { \"Script PowerShell\" }\n    default { \"Outro tipo\" }\n}\n\n# Com regex\nswitch -Regex ($texto) {\n    \"^\\d+$\" { \"Apenas n\u00fameros\" }\n    \"^[a-z]+$\" { \"Apenas letras\" }\n    default { \"Misto\" }\n}\n\n# M\u00faltiplos matches (sem break impl\u00edcito)\nswitch ($valor) {\n    { $_ -gt 0 } { \"Positivo\" }\n    { $_ -lt 100 } { \"Menor que 100\" }\n    10 { \"\u00c9 dez!\" }\n}\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#ternario-ps-7","title":"Tern\u00e1rio (PS 7+)","text":"<pre><code>$resultado = $condicao ? \"verdadeiro\" : \"falso\"\n$status = $ativo ? \"Ativo\" : \"Inativo\"\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#null-coalescing-ps-7","title":"Null-coalescing (PS 7+)","text":"<pre><code>$valor = $variavel ?? \"padr\u00e3o\"          # usa \"padr\u00e3o\" se $variavel \u00e9 $null\n$variavel ??= \"padr\u00e3o\"                  # atribui se $null\n</code></pre> <p>PowerShell 7+</p> <p>Operador tern\u00e1rio (<code>?:</code>) e null-coalescing (<code>??</code>, <code>??=</code>) requerem PowerShell 7+.</p>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#loops","title":"Loops","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#foreach","title":"foreach","text":"<pre><code># foreach statement (mais r\u00e1pido)\nforeach ($item in $colecao) {\n    $item\n}\n\n# Com \u00edndice\n$arr = @(\"a\", \"b\", \"c\")\nfor ($i = 0; $i -lt $arr.Count; $i++) {\n    \"$i : $($arr[$i])\"\n}\n\n# ForEach-Object cmdlet (pipeline)\n$colecao | ForEach-Object { $_ }\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#for","title":"for","text":"<pre><code>for ($i = 0; $i -lt 10; $i++) {\n    \"Itera\u00e7\u00e3o $i\"\n}\n\n# Decremento\nfor ($i = 10; $i -gt 0; $i--) {\n    $i\n}\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#while","title":"while","text":"<pre><code>$i = 0\nwhile ($i -lt 5) {\n    $i\n    $i++\n}\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#do-while-do-until","title":"do-while / do-until","text":"<pre><code># do-while: executa enquanto condi\u00e7\u00e3o \u00e9 verdadeira\n$i = 0\ndo {\n    $i\n    $i++\n} while ($i -lt 5)\n\n# do-until: executa at\u00e9 condi\u00e7\u00e3o ser verdadeira\n$i = 0\ndo {\n    $i\n    $i++\n} until ($i -ge 5)\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#controle-de-loop","title":"Controle de loop","text":"<pre><code># break: sai do loop\nforeach ($item in $colecao) {\n    if ($item -eq \"parar\") { break }\n    $item\n}\n\n# continue: pula para pr\u00f3xima itera\u00e7\u00e3o\nforeach ($item in $colecao) {\n    if ($item -eq \"pular\") { continue }\n    $item\n}\n\n# return: sai da fun\u00e7\u00e3o/script (n\u00e3o apenas do loop)\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#ranges","title":"Ranges","text":"<pre><code># Range simples\n1..10                                   # 1 a 10\n10..1                                   # 10 a 1 (decrescente)\n\n# Iterar com range\nforeach ($i in 1..5) {\n    \"N\u00famero: $i\"\n}\n\n# Letras\n[char]'a'..[char]'z' | ForEach-Object { [char]$_ }\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#funcoes","title":"Fun\u00e7\u00f5es","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#sintaxe-basica","title":"Sintaxe b\u00e1sica","text":"<pre><code>function Get-Greeting {\n    \"Hello, World!\"\n}\n\n# Com par\u00e2metros\nfunction Get-Greeting {\n    param (\n        [string]$Nome\n    )\n    \"Hello, $Nome!\"\n}\n\n# Sintaxe alternativa para par\u00e2metros\nfunction Get-Greeting($Nome) {\n    \"Hello, $Nome!\"\n}\n\n# Chamar\nGet-Greeting -Nome \"Jo\u00e3o\"\nGet-Greeting \"Jo\u00e3o\"                     # posicional\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#parametros-avancados","title":"Par\u00e2metros avan\u00e7ados","text":"<pre><code>function Get-UserInfo {\n    [CmdletBinding()]\n    param (\n        # Obrigat\u00f3rio\n        [Parameter(Mandatory)]\n        [string]$Nome,\n\n        # Com valor padr\u00e3o\n        [int]$Idade = 0,\n\n        # Valida\u00e7\u00e3o\n        [ValidateRange(1, 150)]\n        [int]$Anos,\n\n        [ValidateSet(\"Ativo\", \"Inativo\")]\n        [string]$Status = \"Ativo\",\n\n        [ValidateNotNullOrEmpty()]\n        [string]$Email,\n\n        [ValidateScript({ Test-Path $_ })]\n        [string]$Caminho,\n\n        # Switch (booleano)\n        [switch]$Detalhado,\n\n        # Aceita m\u00faltiplos valores\n        [string[]]$Tags\n    )\n\n    # Corpo da fun\u00e7\u00e3o\n    if ($Detalhado) {\n        \"Nome: $Nome, Idade: $Idade, Status: $Status\"\n    }\n    else {\n        $Nome\n    }\n}\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#pipeline-input","title":"Pipeline input","text":"<pre><code>function Process-Item {\n    [CmdletBinding()]\n    param (\n        [Parameter(ValueFromPipeline)]\n        [string]$Item\n    )\n\n    begin {\n        \"Iniciando processamento\"\n    }\n\n    process {\n        \"Processando: $Item\"\n    }\n\n    end {\n        \"Finalizado\"\n    }\n}\n\n# Uso\n\"a\", \"b\", \"c\" | Process-Item\n\n# ValueFromPipelineByPropertyName\nfunction Get-FileName {\n    param (\n        [Parameter(ValueFromPipelineByPropertyName)]\n        [Alias(\"FullName\")]\n        [string]$Path\n    )\n\n    process {\n        Split-Path $Path -Leaf\n    }\n}\n\nGet-ChildItem | Get-FileName\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#retorno-de-valores","title":"Retorno de valores","text":"<pre><code>function Get-Dobro {\n    param ([int]$Numero)\n\n    # Qualquer output vai para o retorno\n    $Numero * 2\n}\n\nfunction Get-Info {\n    param ([string]$Nome)\n\n    # Retorno expl\u00edcito\n    return @{\n        Nome = $Nome\n        Data = Get-Date\n    }\n}\n\n# M\u00faltiplos valores\nfunction Get-Numeros {\n    1\n    2\n    3\n    # ou: return 1, 2, 3\n    # ou: 1, 2, 3\n}\n\n$resultado = Get-Numeros  # @(1, 2, 3)\n</code></pre> <p>Output n\u00e3o intencional</p> <p>Qualquer express\u00e3o n\u00e3o atribu\u00edda a vari\u00e1vel vai para o output. Use <code>[void]</code>, <code>$null =</code> ou <code>| Out-Null</code> para suprimir.</p>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#escopo","title":"Escopo","text":"<pre><code>$global:var = \"global\"                  # acess\u00edvel em todo lugar\n$script:var = \"script\"                  # acess\u00edvel no script\n$local:var = \"local\"                    # padr\u00e3o, escopo atual\n$private:var = \"private\"                # n\u00e3o vis\u00edvel em escopos filhos\n\nfunction Test-Escopo {\n    $var = \"local na fun\u00e7\u00e3o\"\n    $script:var = \"alterando script\"\n}\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#tratamento-de-erros","title":"Tratamento de erros","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#trycatchfinally","title":"try/catch/finally","text":"<pre><code>try {\n    # C\u00f3digo que pode falhar\n    $resultado = Get-Content \"arquivo-inexistente.txt\" -ErrorAction Stop\n}\ncatch [System.IO.FileNotFoundException] {\n    # Erro espec\u00edfico\n    Write-Warning \"Arquivo n\u00e3o encontrado: $_\"\n}\ncatch {\n    # Qualquer outro erro\n    Write-Error \"Erro: $_\"\n    Write-Error $_.Exception.Message\n}\nfinally {\n    # Sempre executa\n    \"Limpeza\"\n}\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#erroraction","title":"ErrorAction","text":"<pre><code># Por comando\nGet-Content arquivo.txt -ErrorAction SilentlyContinue\nGet-Content arquivo.txt -ErrorAction Stop\nGet-Content arquivo.txt -ErrorAction Continue  # padr\u00e3o\n\n# Valores de ErrorAction:\n# - Continue: mostra erro, continua (padr\u00e3o)\n# - SilentlyContinue: ignora erro silenciosamente\n# - Stop: converte em exce\u00e7\u00e3o terminadora\n# - Inquire: pergunta ao usu\u00e1rio\n# - Ignore: ignora completamente (nem vai para $Error)\n\n# Vari\u00e1vel de prefer\u00eancia (para todo o script)\n$ErrorActionPreference = \"Stop\"\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#variavel-error","title":"Vari\u00e1vel $Error","text":"<pre><code>$Error                                  # lista de erros recentes\n$Error[0]                               # erro mais recente\n$Error[0].Exception.Message\n$Error.Clear()                          # limpar hist\u00f3rico\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#throw","title":"throw","text":"<pre><code>function Test-Valor {\n    param ([int]$Valor)\n\n    if ($Valor -lt 0) {\n        throw \"Valor n\u00e3o pode ser negativo\"\n    }\n\n    $Valor\n}\n\n# Com tipo de exce\u00e7\u00e3o\nthrow [System.ArgumentException]::new(\"Argumento inv\u00e1lido\")\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#write-error-vs-throw","title":"Write-Error vs throw","text":"<pre><code># Write-Error: erro n\u00e3o-terminador\nWrite-Error \"Algo deu errado\"\n\"Esta linha executa\"\n\n# throw: erro terminador\nthrow \"Erro fatal\"\n\"Esta linha n\u00e3o executa\"\n</code></pre> <p>Quando usar cada um</p> <p>Use <code>throw</code> para erros que devem parar a execu\u00e7\u00e3o. Use <code>Write-Error</code> para reportar problemas mas continuar processando outros itens.</p>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#modulos","title":"M\u00f3dulos","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#gerenciar-modulos","title":"Gerenciar m\u00f3dulos","text":"<pre><code># Listar m\u00f3dulos dispon\u00edveis\nGet-Module -ListAvailable\n\n# Listar m\u00f3dulos carregados\nGet-Module\n\n# Importar m\u00f3dulo\nImport-Module NomeM\u00f3dulo\n\n# Remover m\u00f3dulo\nRemove-Module NomeM\u00f3dulo\n\n# Encontrar no PSGallery\nFind-Module -Name \"*Azure*\"\n\n# Instalar do PSGallery\nInstall-Module -Name Az -Scope CurrentUser\nInstall-Module -Name Pester -Force\n\n# Atualizar m\u00f3dulo\nUpdate-Module -Name Az\n\n# Desinstalar\nUninstall-Module -Name NomeM\u00f3dulo\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#modulos-uteis","title":"M\u00f3dulos \u00fateis","text":"<pre><code># Pester - framework de testes\nInstall-Module Pester -Scope CurrentUser\n\n# PSReadLine - melhorias no console (j\u00e1 inclu\u00eddo no PS 5.1+)\n# Configura\u00e7\u00f5es \u00fateis:\nSet-PSReadLineOption -PredictionSource History\nSet-PSReadLineOption -EditMode Emacs\n\n# Terminal-Icons - \u00edcones no terminal\nInstall-Module Terminal-Icons -Scope CurrentUser\nImport-Module Terminal-Icons\n\n# Az - Azure PowerShell\nInstall-Module Az -Scope CurrentUser\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#criar-modulo-simples","title":"Criar m\u00f3dulo simples","text":"<pre><code># Arquivo: MeuModulo.psm1\nfunction Get-Saudacao {\n    param ([string]$Nome)\n    \"Ol\u00e1, $Nome!\"\n}\n\nfunction Get-DataFormatada {\n    (Get-Date).ToString(\"dd/MM/yyyy\")\n}\n\n# Exportar fun\u00e7\u00f5es\nExport-ModuleMember -Function Get-Saudacao, Get-DataFormatada\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#perfil","title":"Perfil","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#caminhos-do-perfil","title":"Caminhos do perfil","text":"<pre><code>$PROFILE                                # perfil do usu\u00e1rio atual, host atual\n$PROFILE.CurrentUserCurrentHost         # mesmo que $PROFILE\n$PROFILE.CurrentUserAllHosts            # usu\u00e1rio atual, todos os hosts\n$PROFILE.AllUsersCurrentHost            # todos os usu\u00e1rios, host atual\n$PROFILE.AllUsersAllHosts               # todos os usu\u00e1rios, todos os hosts\n\n# Verificar se existe\nTest-Path $PROFILE\n\n# Criar se n\u00e3o existir\nif (!(Test-Path $PROFILE)) {\n    New-Item $PROFILE -ItemType File -Force\n}\n\n# Editar\ncode $PROFILE                           # VS Code\nnotepad $PROFILE                        # Notepad\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#exemplo-de-perfil","title":"Exemplo de perfil","text":"<pre><code># ~/.config/powershell/Microsoft.PowerShell_profile.ps1 (PS 7+ Linux/Mac)\n# ~/Documents/PowerShell/Microsoft.PowerShell_profile.ps1 (PS 7+ Windows)\n# ~/Documents/WindowsPowerShell/Microsoft.PowerShell_profile.ps1 (PS 5.1)\n\n# M\u00f3dulos\nImport-Module Terminal-Icons\nImport-Module PSReadLine\n\n# PSReadLine\nSet-PSReadLineOption -PredictionSource History\nSet-PSReadLineOption -PredictionViewStyle ListView\nSet-PSReadLineKeyHandler -Key Tab -Function MenuComplete\n\n# Aliases/Fun\u00e7\u00f5es\nfunction ll { Get-ChildItem -Force $args }\nfunction .. { Set-Location .. }\nfunction ... { Set-Location ../.. }\n\n# Alias para editor\nSet-Alias -Name vim -Value nvim\nSet-Alias -Name code -Value \"code-insiders\"\n\n# Vari\u00e1veis de ambiente\n$env:EDITOR = \"nvim\"\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#comandos-uteis","title":"Comandos \u00fateis","text":""},{"location":"2026/01/20/powershell-refer%C3%AAncia/#saida-e-formatacao","title":"Sa\u00edda e formata\u00e7\u00e3o","text":"<pre><code># Formatar como tabela\nGet-Process | Format-Table Name, CPU, WorkingSet -AutoSize\n\n# Formatar como lista\nGet-Process | Format-List *\n\n# Sa\u00edda para arquivo\nGet-Process | Out-File processos.txt\nGet-Process | Out-File processos.txt -Append\n\n# Exportar CSV\nGet-Process | Export-Csv processos.csv -NoTypeInformation\nImport-Csv processos.csv\n\n# JSON\nGet-Process | ConvertTo-Json | Out-File processos.json\nGet-Content processos.json | ConvertFrom-Json\n\n# XML\nGet-Process | Export-Clixml processos.xml\nImport-Clixml processos.xml\n\n# Clipboard\nGet-Process | clip                      # Windows\nGet-Process | Set-Clipboard             # PS 5.1+\nGet-Clipboard\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#web-requests","title":"Web requests","text":"<pre><code># Download simples\nInvoke-WebRequest -Uri \"https://example.com\" -OutFile pagina.html\n\n# GET com headers\n$response = Invoke-WebRequest -Uri \"https://api.example.com/data\" -Headers @{\n    \"Authorization\" = \"Bearer $token\"\n}\n$response.Content\n$response.StatusCode\n\n# REST API (retorna objetos)\n$dados = Invoke-RestMethod -Uri \"https://api.example.com/users\"\n$dados.name\n\n# POST JSON\n$body = @{\n    nome = \"Jo\u00e3o\"\n    email = \"joao@email.com\"\n} | ConvertTo-Json\n\nInvoke-RestMethod -Uri \"https://api.example.com/users\" `\n    -Method Post `\n    -Body $body `\n    -ContentType \"application/json\"\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#processos-e-servicos","title":"Processos e servi\u00e7os","text":"<pre><code># Processos\nGet-Process\nGet-Process -Name chrome\nGet-Process | Where-Object CPU -gt 100\nStop-Process -Name notepad\nStop-Process -Id 1234\nStart-Process notepad\nStart-Process \"https://google.com\"      # abre no browser\n\n# Servi\u00e7os (requer eleva\u00e7\u00e3o no Windows)\nGet-Service\nGet-Service -Name wuauserv\nStart-Service -Name wuauserv\nStop-Service -Name wuauserv\nRestart-Service -Name wuauserv\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#jobs-background","title":"Jobs (background)","text":"<pre><code># Iniciar job\n$job = Start-Job -ScriptBlock { Get-Process }\n\n# Verificar status\nGet-Job\n\n# Aguardar conclus\u00e3o\nWait-Job -Id $job.Id\n\n# Obter resultado\nReceive-Job -Id $job.Id\n\n# Remover job\nRemove-Job -Id $job.Id\n\n# Job com par\u00e2metros\nStart-Job -ScriptBlock { param($nome) \"Ol\u00e1, $nome\" } -ArgumentList \"Jo\u00e3o\"\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#remoting-se-habilitado","title":"Remoting (se habilitado)","text":"<pre><code># Sess\u00e3o interativa\nEnter-PSSession -ComputerName servidor\n\n# Executar comando remoto\nInvoke-Command -ComputerName servidor -ScriptBlock { Get-Process }\n\n# Em m\u00faltiplas m\u00e1quinas\nInvoke-Command -ComputerName srv1, srv2, srv3 -ScriptBlock { hostname }\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#data-e-hora","title":"Data e hora","text":"<pre><code>Get-Date\nGet-Date -Format \"dd/MM/yyyy HH:mm:ss\"\nGet-Date -Format \"yyyy-MM-dd\"\n(Get-Date).AddDays(7)\n(Get-Date).AddHours(-2)\n\n# Diferen\u00e7a entre datas\n$inicio = Get-Date \"2024-01-01\"\n$fim = Get-Date\n($fim - $inicio).Days\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#matematica","title":"Matem\u00e1tica","text":"<pre><code>[math]::Round(3.14159, 2)               # 3.14\n[math]::Floor(3.9)                      # 3\n[math]::Ceiling(3.1)                    # 4\n[math]::Abs(-5)                         # 5\n[math]::Max(1, 5)                       # 5\n[math]::Min(1, 5)                       # 1\n[math]::Pow(2, 8)                       # 256\n[math]::Sqrt(16)                        # 4\n</code></pre>"},{"location":"2026/01/20/powershell-refer%C3%AAncia/#links","title":"Links","text":"<ul> <li>Documenta\u00e7\u00e3o PowerShell</li> <li>PowerShell Gallery</li> <li>Oh-My-Posh</li> </ul>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/","title":"Terraform: refer\u00eancia","text":"<p>Comandos, sintaxe e padr\u00f5es para Terraform com exemplos para AWS, GCP e Azure.</p>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#instalacao","title":"Instala\u00e7\u00e3o","text":"<pre><code># macOS\nbrew install terraform\n\n# Linux\ncurl -fsSL https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\necho \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list\nsudo apt update &amp;&amp; sudo apt install terraform\n\n# Windows\nwinget install HashiCorp.Terraform\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#comandos-essenciais","title":"Comandos essenciais","text":"<pre><code>terraform init          # Inicializa, baixa providers\nterraform plan          # Mostra mudan\u00e7as\nterraform apply         # Aplica mudan\u00e7as\nterraform destroy       # Remove tudo\n\nterraform fmt           # Formata c\u00f3digo\nterraform validate      # Valida sintaxe\nterraform output        # Mostra outputs\nterraform state list    # Lista recursos no state\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#opcoes-uteis","title":"Op\u00e7\u00f5es \u00fateis","text":"<pre><code>terraform plan -out=plan.tfplan    # Salva plano\nterraform apply plan.tfplan        # Aplica plano salvo\nterraform apply -auto-approve      # Sem confirma\u00e7\u00e3o\nterraform apply -target=aws_instance.web  # S\u00f3 um recurso\nterraform destroy -target=aws_instance.web\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#estrutura-de-projeto","title":"Estrutura de projeto","text":"<pre><code>projeto/\n\u251c\u2500\u2500 main.tf           # Recursos principais\n\u251c\u2500\u2500 variables.tf      # Declara\u00e7\u00e3o de vari\u00e1veis\n\u251c\u2500\u2500 outputs.tf        # Outputs\n\u251c\u2500\u2500 providers.tf      # Configura\u00e7\u00e3o de providers\n\u251c\u2500\u2500 terraform.tfvars  # Valores das vari\u00e1veis (n\u00e3o commitar)\n\u2514\u2500\u2500 versions.tf       # Vers\u00f5es de providers\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#providers","title":"Providers","text":"AWSGCPAzure <pre><code>terraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~&gt; 5.0\"\n    }\n  }\n}\n\nprovider \"aws\" {\n  region = \"us-east-1\"\n\n  default_tags {\n    tags = {\n      ManagedBy = \"terraform\"\n    }\n  }\n}\n</code></pre> <pre><code>terraform {\n  required_providers {\n    google = {\n      source  = \"hashicorp/google\"\n      version = \"~&gt; 5.0\"\n    }\n  }\n}\n\nprovider \"google\" {\n  project = \"meu-projeto\"\n  region  = \"us-central1\"\n}\n</code></pre> <pre><code>terraform {\n  required_providers {\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \"~&gt; 3.0\"\n    }\n  }\n}\n\nprovider \"azurerm\" {\n  features {}\n  subscription_id = \"xxx-xxx-xxx\"\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#variaveis","title":"Vari\u00e1veis","text":""},{"location":"2025/05/11/terraform-refer%C3%AAncia/#declaracao","title":"Declara\u00e7\u00e3o","text":"<pre><code>variable \"environment\" {\n  type        = string\n  description = \"Ambiente (dev, staging, prod)\"\n  default     = \"dev\"\n}\n\nvariable \"instance_count\" {\n  type    = number\n  default = 1\n}\n\nvariable \"enable_monitoring\" {\n  type    = bool\n  default = true\n}\n\nvariable \"allowed_cidrs\" {\n  type    = list(string)\n  default = [\"10.0.0.0/8\"]\n}\n\nvariable \"tags\" {\n  type = map(string)\n  default = {\n    Team = \"platform\"\n  }\n}\n\nvariable \"config\" {\n  type = object({\n    name     = string\n    size     = number\n    enabled  = optional(bool, true)\n  })\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#validacao","title":"Valida\u00e7\u00e3o","text":"<pre><code>variable \"environment\" {\n  type = string\n  validation {\n    condition     = contains([\"dev\", \"staging\", \"prod\"], var.environment)\n    error_message = \"Deve ser dev, staging ou prod.\"\n  }\n}\n\nvariable \"instance_type\" {\n  type = string\n  validation {\n    condition     = can(regex(\"^t3\\\\.\", var.instance_type))\n    error_message = \"Deve ser da fam\u00edlia t3.\"\n  }\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#passando-valores","title":"Passando valores","text":"<pre><code># terraform.tfvars (autom\u00e1tico)\nenvironment = \"prod\"\ninstance_count = 3\n\n# Linha de comando\nterraform apply -var=\"environment=prod\"\nterraform apply -var-file=\"prod.tfvars\"\n\n# Vari\u00e1vel de ambiente\nexport TF_VAR_environment=prod\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#locals","title":"Locals","text":"<pre><code>locals {\n  name_prefix = \"${var.project}-${var.environment}\"\n\n  common_tags = {\n    Project     = var.project\n    Environment = var.environment\n    ManagedBy   = \"terraform\"\n  }\n\n  is_prod = var.environment == \"prod\"\n}\n\nresource \"aws_instance\" \"web\" {\n  tags = merge(local.common_tags, {\n    Name = \"${local.name_prefix}-web\"\n  })\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#recursos-basicos","title":"Recursos b\u00e1sicos","text":"AWSGCPAzure <pre><code># VPC\nresource \"aws_vpc\" \"main\" {\n  cidr_block           = \"10.0.0.0/16\"\n  enable_dns_hostnames = true\n  tags = { Name = \"main\" }\n}\n\n# Subnet\nresource \"aws_subnet\" \"public\" {\n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = \"10.0.1.0/24\"\n  map_public_ip_on_launch = true\n  availability_zone       = \"us-east-1a\"\n}\n\n# Security Group\nresource \"aws_security_group\" \"web\" {\n  vpc_id = aws_vpc.main.id\n\n  ingress {\n    from_port   = 443\n    to_port     = 443\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n}\n\n# EC2\nresource \"aws_instance\" \"web\" {\n  ami           = \"ami-0c55b159cbfafe1f0\"\n  instance_type = \"t3.micro\"\n  subnet_id     = aws_subnet.public.id\n\n  tags = { Name = \"web-server\" }\n}\n\n# S3\nresource \"aws_s3_bucket\" \"data\" {\n  bucket = \"meu-bucket-unico\"\n}\n\nresource \"aws_s3_bucket_versioning\" \"data\" {\n  bucket = aws_s3_bucket.data.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n</code></pre> <pre><code># VPC\nresource \"google_compute_network\" \"main\" {\n  name                    = \"main\"\n  auto_create_subnetworks = false\n}\n\n# Subnet\nresource \"google_compute_subnetwork\" \"public\" {\n  name          = \"public\"\n  network       = google_compute_network.main.id\n  ip_cidr_range = \"10.0.1.0/24\"\n  region        = \"us-central1\"\n}\n\n# Firewall\nresource \"google_compute_firewall\" \"web\" {\n  name    = \"allow-https\"\n  network = google_compute_network.main.name\n\n  allow {\n    protocol = \"tcp\"\n    ports    = [\"443\"]\n  }\n\n  source_ranges = [\"0.0.0.0/0\"]\n}\n\n# VM\nresource \"google_compute_instance\" \"web\" {\n  name         = \"web-server\"\n  machine_type = \"e2-micro\"\n  zone         = \"us-central1-a\"\n\n  boot_disk {\n    initialize_params {\n      image = \"debian-cloud/debian-11\"\n    }\n  }\n\n  network_interface {\n    subnetwork = google_compute_subnetwork.public.id\n    access_config {}  # IP p\u00fablico\n  }\n}\n\n# Cloud Storage\nresource \"google_storage_bucket\" \"data\" {\n  name     = \"meu-bucket-unico\"\n  location = \"US\"\n\n  versioning {\n    enabled = true\n  }\n}\n</code></pre> <pre><code># Resource Group\nresource \"azurerm_resource_group\" \"main\" {\n  name     = \"main-rg\"\n  location = \"East US\"\n}\n\n# VNet\nresource \"azurerm_virtual_network\" \"main\" {\n  name                = \"main-vnet\"\n  resource_group_name = azurerm_resource_group.main.name\n  location            = azurerm_resource_group.main.location\n  address_space       = [\"10.0.0.0/16\"]\n}\n\n# Subnet\nresource \"azurerm_subnet\" \"public\" {\n  name                 = \"public\"\n  resource_group_name  = azurerm_resource_group.main.name\n  virtual_network_name = azurerm_virtual_network.main.name\n  address_prefixes     = [\"10.0.1.0/24\"]\n}\n\n# NSG\nresource \"azurerm_network_security_group\" \"web\" {\n  name                = \"web-nsg\"\n  resource_group_name = azurerm_resource_group.main.name\n  location            = azurerm_resource_group.main.location\n\n  security_rule {\n    name                       = \"HTTPS\"\n    priority                   = 100\n    direction                  = \"Inbound\"\n    access                     = \"Allow\"\n    protocol                   = \"Tcp\"\n    destination_port_range     = \"443\"\n    source_address_prefix      = \"*\"\n    destination_address_prefix = \"*\"\n    source_port_range          = \"*\"\n  }\n}\n\n# Storage\nresource \"azurerm_storage_account\" \"data\" {\n  name                     = \"meustorageaccount\"\n  resource_group_name      = azurerm_resource_group.main.name\n  location                 = azurerm_resource_group.main.location\n  account_tier             = \"Standard\"\n  account_replication_type = \"LRS\"\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#loops-e-condicionais","title":"Loops e condicionais","text":""},{"location":"2025/05/11/terraform-refer%C3%AAncia/#count","title":"count","text":"<pre><code>resource \"aws_instance\" \"web\" {\n  count = var.instance_count\n\n  ami           = \"ami-xxx\"\n  instance_type = \"t3.micro\"\n\n  tags = {\n    Name = \"web-${count.index}\"\n  }\n}\n\n# Acesso\noutput \"instance_ids\" {\n  value = aws_instance.web[*].id\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#for_each-map","title":"for_each (map)","text":"<pre><code>variable \"instances\" {\n  default = {\n    web  = \"t3.micro\"\n    api  = \"t3.small\"\n    worker = \"t3.medium\"\n  }\n}\n\nresource \"aws_instance\" \"app\" {\n  for_each = var.instances\n\n  ami           = \"ami-xxx\"\n  instance_type = each.value\n\n  tags = {\n    Name = each.key\n  }\n}\n\n# Acesso\noutput \"instance_ids\" {\n  value = { for k, v in aws_instance.app : k =&gt; v.id }\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#for_each-set","title":"for_each (set)","text":"<pre><code>resource \"aws_iam_user\" \"users\" {\n  for_each = toset([\"alice\", \"bob\", \"carol\"])\n  name     = each.key\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#condicional","title":"Condicional","text":"<pre><code># Criar ou n\u00e3o\nresource \"aws_instance\" \"bastion\" {\n  count = var.environment == \"prod\" ? 1 : 0\n  # ...\n}\n\n# Valor condicional\nresource \"aws_instance\" \"web\" {\n  instance_type = var.environment == \"prod\" ? \"t3.large\" : \"t3.micro\"\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#for-expression","title":"for expression","text":"<pre><code>locals {\n  # Lista\n  upper_names = [for name in var.names : upper(name)]\n\n  # Filtrada\n  prod_instances = [for i in var.instances : i if i.env == \"prod\"]\n\n  # Map\n  instance_map = { for i in var.instances : i.name =&gt; i.id }\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#data-sources","title":"Data sources","text":"<pre><code># AMI mais recente\ndata \"aws_ami\" \"amazon_linux\" {\n  most_recent = true\n  owners      = [\"amazon\"]\n\n  filter {\n    name   = \"name\"\n    values = [\"amzn2-ami-hvm-*-x86_64-gp2\"]\n  }\n}\n\nresource \"aws_instance\" \"web\" {\n  ami = data.aws_ami.amazon_linux.id\n  # ...\n}\n\n# VPC existente\ndata \"aws_vpc\" \"main\" {\n  tags = { Name = \"main\" }\n}\n\n# Zona do Route53\ndata \"aws_route53_zone\" \"main\" {\n  name = \"exemplo.com.\"\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#outputs","title":"Outputs","text":"<pre><code>output \"instance_ip\" {\n  value       = aws_instance.web.public_ip\n  description = \"IP p\u00fablico da inst\u00e2ncia\"\n}\n\noutput \"sensitive_value\" {\n  value     = aws_db_instance.main.password\n  sensitive = true\n}\n\n# Output estruturado\noutput \"vpc\" {\n  value = {\n    id         = aws_vpc.main.id\n    cidr_block = aws_vpc.main.cidr_block\n    subnet_ids = aws_subnet.public[*].id\n  }\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#modules","title":"Modules","text":""},{"location":"2025/05/11/terraform-refer%C3%AAncia/#estrutura","title":"Estrutura","text":"<pre><code>modules/vpc/\n\u251c\u2500\u2500 main.tf\n\u251c\u2500\u2500 variables.tf\n\u2514\u2500\u2500 outputs.tf\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#usando-modulo-local","title":"Usando m\u00f3dulo local","text":"<pre><code>module \"vpc\" {\n  source = \"./modules/vpc\"\n\n  name = \"main\"\n  cidr = \"10.0.0.0/16\"\n}\n\n# Acessar output\nresource \"aws_instance\" \"web\" {\n  subnet_id = module.vpc.subnet_ids[0]\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#usando-modulo-do-registry","title":"Usando m\u00f3dulo do Registry","text":"<pre><code>module \"vpc\" {\n  source  = \"terraform-aws-modules/vpc/aws\"\n  version = \"~&gt; 5.0\"\n\n  name = \"main\"\n  cidr = \"10.0.0.0/16\"\n  azs  = [\"us-east-1a\", \"us-east-1b\"]\n\n  private_subnets = [\"10.0.1.0/24\", \"10.0.2.0/24\"]\n  public_subnets  = [\"10.0.101.0/24\", \"10.0.102.0/24\"]\n\n  enable_nat_gateway = true\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#modulo-de-git","title":"M\u00f3dulo de Git","text":"<pre><code>module \"vpc\" {\n  source = \"git::https://github.com/empresa/terraform-modules.git//vpc?ref=v1.2.0\"\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#remote-state","title":"Remote state","text":"AWS S3GCP GCSAzure Blob <pre><code>terraform {\n  backend \"s3\" {\n    bucket         = \"empresa-terraform-state\"\n    key            = \"projeto/terraform.tfstate\"\n    region         = \"us-east-1\"\n    dynamodb_table = \"terraform-locks\"\n    encrypt        = true\n  }\n}\n</code></pre> <p>Criar bucket e tabela antes</p> <pre><code>resource \"aws_s3_bucket\" \"state\" {\n  bucket = \"empresa-terraform-state\"\n}\n\nresource \"aws_s3_bucket_versioning\" \"state\" {\n  bucket = aws_s3_bucket.state.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_dynamodb_table\" \"locks\" {\n  name         = \"terraform-locks\"\n  billing_mode = \"PAY_PER_REQUEST\"\n  hash_key     = \"LockID\"\n\n  attribute {\n    name = \"LockID\"\n    type = \"S\"\n  }\n}\n</code></pre> <pre><code>terraform {\n  backend \"gcs\" {\n    bucket = \"empresa-terraform-state\"\n    prefix = \"projeto\"\n  }\n}\n</code></pre> <pre><code>terraform {\n  backend \"azurerm\" {\n    resource_group_name  = \"terraform-state-rg\"\n    storage_account_name = \"empresatfstate\"\n    container_name       = \"tfstate\"\n    key                  = \"projeto.tfstate\"\n  }\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#acessar-remote-state-de-outro-projeto","title":"Acessar remote state de outro projeto","text":"<pre><code>data \"terraform_remote_state\" \"network\" {\n  backend = \"s3\"\n  config = {\n    bucket = \"empresa-terraform-state\"\n    key    = \"network/terraform.tfstate\"\n    region = \"us-east-1\"\n  }\n}\n\nresource \"aws_instance\" \"web\" {\n  subnet_id = data.terraform_remote_state.network.outputs.subnet_ids[0]\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#workspaces","title":"Workspaces","text":"<pre><code>terraform workspace new dev\nterraform workspace new prod\nterraform workspace list\nterraform workspace select dev\nterraform workspace show\n</code></pre> <pre><code>locals {\n  env = terraform.workspace\n\n  config = {\n    dev  = { instance_type = \"t3.micro\", count = 1 }\n    prod = { instance_type = \"t3.large\", count = 3 }\n  }\n}\n\nresource \"aws_instance\" \"web\" {\n  count         = local.config[local.env].count\n  instance_type = local.config[local.env].instance_type\n}\n</code></pre> <p>Quando usar workspaces</p> <p>Bom para ambientes similares (dev/staging). Para ambientes muito diferentes, prefira diret\u00f3rios separados.</p>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#state-management","title":"State management","text":"<pre><code># Listar recursos\nterraform state list\n\n# Ver detalhes\nterraform state show aws_instance.web\n\n# Mover recurso\nterraform state mv aws_instance.web aws_instance.app\n\n# Remover do state (n\u00e3o destr\u00f3i)\nterraform state rm aws_instance.web\n\n# Importar recurso existente\nterraform import aws_instance.web i-1234567890abcdef0\n\n# Pull/push state\nterraform state pull &gt; backup.tfstate\nterraform state push backup.tfstate\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#lifecycle","title":"Lifecycle","text":"<pre><code>resource \"aws_instance\" \"web\" {\n  # ...\n\n  lifecycle {\n    create_before_destroy = true   # Cria novo antes de destruir\n    prevent_destroy       = true   # Impede destrui\u00e7\u00e3o\n    ignore_changes        = [tags] # Ignora mudan\u00e7as em tags\n\n    replace_triggered_by = [       # Recria quando mudar\n      aws_security_group.web.id\n    ]\n  }\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#provisioners","title":"Provisioners","text":"<p>Use com modera\u00e7\u00e3o</p> <p>Prefira cloud-init, user_data ou ferramentas como Ansible.</p> <pre><code>resource \"aws_instance\" \"web\" {\n  # ...\n\n  provisioner \"remote-exec\" {\n    inline = [\n      \"sudo apt update\",\n      \"sudo apt install -y nginx\"\n    ]\n\n    connection {\n      type        = \"ssh\"\n      user        = \"ubuntu\"\n      private_key = file(\"~/.ssh/id_rsa\")\n      host        = self.public_ip\n    }\n  }\n\n  provisioner \"local-exec\" {\n    command = \"echo ${self.public_ip} &gt;&gt; inventory.txt\"\n  }\n}\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#funcoes-uteis","title":"Fun\u00e7\u00f5es \u00fateis","text":"<pre><code># Strings\nupper(\"hello\")                    # HELLO\nlower(\"HELLO\")                    # hello\nreplace(\"hello\", \"l\", \"L\")        # heLLo\nsplit(\",\", \"a,b,c\")               # [\"a\", \"b\", \"c\"]\njoin(\"-\", [\"a\", \"b\", \"c\"])        # a-b-c\nformat(\"Hello, %s!\", \"World\")     # Hello, World!\ntrimspace(\"  hello  \")            # hello\n\n# N\u00fameros\nmin(1, 2, 3)                      # 1\nmax(1, 2, 3)                      # 3\nceil(1.5)                         # 2\nfloor(1.5)                        # 1\n\n# Cole\u00e7\u00f5es\nlength([\"a\", \"b\", \"c\"])           # 3\nelement([\"a\", \"b\", \"c\"], 1)       # b\ncontains([\"a\", \"b\"], \"a\")         # true\nconcat([\"a\"], [\"b\"])              # [\"a\", \"b\"]\nflatten([[\"a\"], [\"b\", \"c\"]])      # [\"a\", \"b\", \"c\"]\ndistinct([\"a\", \"a\", \"b\"])         # [\"a\", \"b\"]\nmerge({a=1}, {b=2})               # {a=1, b=2}\nlookup({a=1, b=2}, \"a\", 0)        # 1\nkeys({a=1, b=2})                  # [\"a\", \"b\"]\nvalues({a=1, b=2})                # [1, 2]\n\n# Type conversion\ntostring(123)\ntonumber(\"123\")\ntolist(toset([\"a\", \"a\", \"b\"]))    # [\"a\", \"b\"]\ntoset([\"a\", \"a\", \"b\"])            # [\"a\", \"b\"] (set)\ntomap({a = \"b\"})\n\n# Encoding\njsonencode({a = 1})               # {\"a\":1}\njsondecode(\"{\\\"a\\\":1}\")           # {a = 1}\nbase64encode(\"hello\")\nbase64decode(\"aGVsbG8=\")\nyamlencode({a = 1})\n\n# Files\nfile(\"script.sh\")                 # Conte\u00fado do arquivo\nfilebase64(\"image.png\")           # Base64 do arquivo\ntemplatefile(\"script.tpl\", {name = \"web\"})\n\n# Network\ncidrsubnet(\"10.0.0.0/16\", 8, 1)   # 10.0.1.0/24\ncidrhost(\"10.0.1.0/24\", 5)        # 10.0.1.5\n\n# Crypto\nmd5(\"hello\")\nsha256(\"hello\")\nuuid()\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#gitignore","title":".gitignore","text":"<pre><code>*.tfstate\n*.tfstate.*\n.terraform/\n.terraform.lock.hcl\n*.tfvars\n!example.tfvars\ncrash.log\noverride.tf\noverride.tf.json\n*_override.tf\n*_override.tf.json\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#ferramentas-complementares","title":"Ferramentas complementares","text":"Ferramenta Descri\u00e7\u00e3o tflint Linter terraform-docs Gera documenta\u00e7\u00e3o terragrunt DRY para m\u00faltiplos ambientes atlantis GitOps para Terraform infracost Estimativa de custos checkov Security scanning <pre><code># tflint\nbrew install tflint\ntflint\n\n# terraform-docs\nbrew install terraform-docs\nterraform-docs markdown . &gt; README.md\n\n# infracost\nbrew install infracost\ninfracost breakdown --path .\n</code></pre>"},{"location":"2025/05/11/terraform-refer%C3%AAncia/#links","title":"Links","text":"<ul> <li>Terraform Docs</li> <li>Terraform Registry</li> <li>Terraform Best Practices</li> </ul>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/","title":"T-SQL: refer\u00eancia","text":"<p>Comandos e padr\u00f5es \u00fateis para SQL Server.</p> Script para criar tabelas usadas nos exemplos <pre><code>-- Departamentos\nCREATE TABLE departamentos (\n    id INT PRIMARY KEY IDENTITY(1,1),\n    nome VARCHAR(100) NOT NULL\n);\n\nINSERT INTO departamentos (nome) VALUES\n('Engenharia'), ('Vendas'), ('RH'), ('Financeiro');\n\n-- Funcion\u00e1rios\nCREATE TABLE funcionarios (\n    id INT PRIMARY KEY IDENTITY(1,1),\n    nome VARCHAR(100) NOT NULL,\n    email VARCHAR(100),\n    departamento_id INT REFERENCES departamentos(id),\n    gerente_id INT REFERENCES funcionarios(id),\n    salario DECIMAL(10,2),\n    data_contratacao DATE\n);\n\nINSERT INTO funcionarios (nome, email, departamento_id, gerente_id, salario, data_contratacao) VALUES\n('Ana Silva', 'ana@empresa.com', 1, NULL, 15000.00, '2020-01-15'),\n('Bruno Costa', 'bruno@empresa.com', 1, 1, 8000.00, '2021-03-10'),\n('Carla Santos', 'carla@empresa.com', 1, 1, 9500.00, '2020-06-20'),\n('Daniel Oliveira', 'daniel@empresa.com', 2, NULL, 12000.00, '2019-11-01'),\n('Eva Lima', 'eva@empresa.com', 2, 4, 7500.00, '2022-02-14'),\n('Fernando Dias', 'fernando@empresa.com', 3, NULL, 10000.00, '2021-08-30'),\n('Gisele Ramos', 'gisele@empresa.com', 4, NULL, 11000.00, '2020-04-25');\n\n-- Clientes\nCREATE TABLE clientes (\n    id INT PRIMARY KEY IDENTITY(1,1),\n    nome VARCHAR(100) NOT NULL,\n    email VARCHAR(100),\n    cidade VARCHAR(50)\n);\n\nINSERT INTO clientes (nome, email, cidade) VALUES\n('Tech Solutions', 'contato@techsol.com', 'S\u00e3o Paulo'),\n('Data Corp', 'info@datacorp.com', 'Rio de Janeiro'),\n('Cloud Services', 'hello@cloudserv.com', 'Belo Horizonte'),\n('Digital Labs', 'contact@digilabs.com', 'S\u00e3o Paulo');\n\n-- Produtos\nCREATE TABLE produtos (\n    id INT PRIMARY KEY IDENTITY(1,1),\n    nome VARCHAR(100) NOT NULL,\n    preco DECIMAL(10,2),\n    estoque INT DEFAULT 0\n);\n\nINSERT INTO produtos (nome, preco, estoque) VALUES\n('Licen\u00e7a Software A', 500.00, 100),\n('Licen\u00e7a Software B', 1200.00, 50),\n('Consultoria (hora)', 250.00, 999),\n('Suporte Anual', 3000.00, 999);\n\n-- Pedidos\nCREATE TABLE pedidos (\n    id INT PRIMARY KEY IDENTITY(1,1),\n    cliente_id INT REFERENCES clientes(id),\n    data DATE NOT NULL,\n    status VARCHAR(20) DEFAULT 'pendente'\n);\n\nINSERT INTO pedidos (cliente_id, data, status) VALUES\n(1, '2025-01-05', 'concluido'),\n(1, '2025-01-10', 'concluido'),\n(2, '2025-01-12', 'pendente'),\n(3, '2025-01-15', 'pendente'),\n(4, '2025-01-16', 'cancelado');\n\n-- Itens do pedido\nCREATE TABLE itens_pedido (\n    id INT PRIMARY KEY IDENTITY(1,1),\n    pedido_id INT REFERENCES pedidos(id),\n    produto_id INT REFERENCES produtos(id),\n    quantidade INT,\n    valor_unitario DECIMAL(10,2)\n);\n\nINSERT INTO itens_pedido (pedido_id, produto_id, quantidade, valor_unitario) VALUES\n(1, 1, 10, 500.00),\n(1, 4, 1, 3000.00),\n(2, 2, 5, 1200.00),\n(2, 3, 8, 250.00),\n(3, 1, 20, 500.00),\n(4, 2, 3, 1200.00),\n(5, 3, 4, 250.00);\n\n-- Transa\u00e7\u00f5es (para exemplos de running total)\nCREATE TABLE transacoes (\n    id INT PRIMARY KEY IDENTITY(1,1),\n    data DATE,\n    valor DECIMAL(10,2)\n);\n\nINSERT INTO transacoes (data, valor) VALUES\n('2025-01-01', 1000.00),\n('2025-01-02', -200.00),\n('2025-01-03', 500.00),\n('2025-01-04', -100.00),\n('2025-01-05', 800.00);\n\n-- Contas (para exemplo de transa\u00e7\u00e3o)\nCREATE TABLE contas (\n    id INT PRIMARY KEY,\n    titular VARCHAR(100),\n    saldo DECIMAL(10,2)\n);\n\nINSERT INTO contas (id, titular, saldo) VALUES\n(1, 'Conta A', 5000.00),\n(2, 'Conta B', 3000.00);\n\n-- Vendas (para PIVOT)\nCREATE TABLE vendas (\n    id INT PRIMARY KEY IDENTITY(1,1),\n    produto VARCHAR(50),\n    mes VARCHAR(3),\n    quantidade INT\n);\n\nINSERT INTO vendas (produto, mes, quantidade) VALUES\n('Produto X', 'Jan', 100),\n('Produto X', 'Fev', 150),\n('Produto X', 'Mar', 120),\n('Produto Y', 'Jan', 80),\n('Produto Y', 'Fev', 90),\n('Produto Y', 'Mar', 110);\n\n-- Staging clientes (para MERGE)\nCREATE TABLE staging_clientes (\n    id INT PRIMARY KEY,\n    nome VARCHAR(100),\n    email VARCHAR(100)\n);\n\nINSERT INTO staging_clientes (id, nome, email) VALUES\n(1, 'Tech Solutions Ltda', 'novo@techsol.com'),  -- update\n(5, 'New Company', 'hello@newco.com');            -- insert\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#tipos-de-dados","title":"Tipos de dados","text":"<pre><code>-- Strings\nCHAR(10)          -- fixo, 10 caracteres\nVARCHAR(100)      -- vari\u00e1vel, at\u00e9 100\nVARCHAR(MAX)      -- at\u00e9 2GB\nNVARCHAR(100)     -- unicode\n\n-- N\u00fameros\nINT               -- -2bi a 2bi\nBIGINT            -- muito grande\nDECIMAL(10,2)     -- precis\u00e3o exata (dinheiro)\nFLOAT             -- aproximado\n\n-- Data/hora\nDATE              -- s\u00f3 data\nTIME              -- s\u00f3 hora\nDATETIME2         -- data + hora (preferir sobre DATETIME)\nDATETIMEOFFSET    -- com timezone\n\n-- Outros\nBIT               -- boolean (0/1)\nUNIQUEIDENTIFIER  -- GUID\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#ctes","title":"CTEs","text":"<pre><code>WITH vendas_mes AS (\n    SELECT\n        cliente_id,\n        SUM(valor) AS total\n    FROM pedidos\n    WHERE data &gt;= DATEADD(MONTH, -1, GETDATE())\n    GROUP BY cliente_id\n)\nSELECT * FROM vendas_mes WHERE total &gt; 1000;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#cte-recursiva","title":"CTE recursiva","text":"<pre><code>WITH hierarquia AS (\n    -- \u00c2ncora\n    SELECT id, nome, gerente_id, 0 AS nivel\n    FROM funcionarios\n    WHERE gerente_id IS NULL\n\n    UNION ALL\n\n    -- Recurs\u00e3o\n    SELECT f.id, f.nome, f.gerente_id, h.nivel + 1\n    FROM funcionarios f\n    INNER JOIN hierarquia h ON f.gerente_id = h.id\n)\nSELECT * FROM hierarquia;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#window-functions","title":"Window functions","text":"<pre><code>SELECT\n    nome,\n    departamento,\n    salario,\n    ROW_NUMBER() OVER (ORDER BY salario DESC) AS ranking,\n    RANK() OVER (ORDER BY salario DESC) AS rank_com_gaps,\n    DENSE_RANK() OVER (ORDER BY salario DESC) AS rank_sem_gaps,\n    SUM(salario) OVER (PARTITION BY departamento) AS total_dept,\n    AVG(salario) OVER () AS media_geral,\n    LAG(salario) OVER (ORDER BY data_contratacao) AS salario_anterior,\n    LEAD(salario) OVER (ORDER BY data_contratacao) AS salario_proximo\nFROM funcionarios;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#running-total","title":"Running total","text":"<pre><code>SELECT\n    data,\n    valor,\n    SUM(valor) OVER (ORDER BY data ROWS UNBOUNDED PRECEDING) AS acumulado\nFROM transacoes;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#merge-upsert","title":"MERGE (upsert)","text":"<pre><code>MERGE INTO clientes AS target\nUSING staging_clientes AS source\nON target.id = source.id\nWHEN MATCHED THEN\n    UPDATE SET\n        nome = source.nome,\n        email = source.email,\n        atualizado_em = GETDATE()\nWHEN NOT MATCHED THEN\n    INSERT (id, nome, email, criado_em)\n    VALUES (source.id, source.nome, source.email, GETDATE())\nWHEN NOT MATCHED BY SOURCE THEN\n    DELETE;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#pivot-unpivot","title":"PIVOT / UNPIVOT","text":"<pre><code>-- Linhas para colunas\nSELECT *\nFROM (\n    SELECT produto, mes, quantidade\n    FROM vendas\n) AS src\nPIVOT (\n    SUM(quantidade)\n    FOR mes IN ([Jan], [Fev], [Mar])\n) AS pvt;\n\n-- Colunas para linhas\nSELECT produto, mes, quantidade\nFROM vendas_pivot\nUNPIVOT (\n    quantidade FOR mes IN ([Jan], [Fev], [Mar])\n) AS unpvt;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#string_agg","title":"STRING_AGG","text":"<pre><code>-- Concatenar valores em uma string\nSELECT\n    departamento,\n    STRING_AGG(nome, ', ') AS funcionarios\nFROM funcionarios\nGROUP BY departamento;\n\n-- Com ordena\u00e7\u00e3o\nSELECT\n    pedido_id,\n    STRING_AGG(produto, ', ') WITHIN GROUP (ORDER BY produto) AS produtos\nFROM itens_pedido\nGROUP BY pedido_id;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#json","title":"JSON","text":"<pre><code>-- Gerar JSON\nSELECT id, nome, email\nFROM clientes\nFOR JSON PATH;\n\n-- Ler JSON\nSELECT *\nFROM OPENJSON(@json)\nWITH (\n    id INT '$.id',\n    nome VARCHAR(100) '$.nome',\n    email VARCHAR(100) '$.email'\n);\n\n-- Extrair valor\nSELECT JSON_VALUE(@json, '$.nome');\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#funcoes-de-data","title":"Fun\u00e7\u00f5es de data","text":"<pre><code>GETDATE()                              -- agora\nGETUTCDATE()                           -- agora UTC\nDATEADD(DAY, 7, GETDATE())             -- +7 dias\nDATEDIFF(DAY, data_inicio, data_fim)   -- diferen\u00e7a em dias\nEOMONTH(GETDATE())                     -- \u00faltimo dia do m\u00eas\nDATEFROMPARTS(2025, 1, 15)             -- construir data\nFORMAT(GETDATE(), 'yyyy-MM-dd')        -- formatar\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#try_cast-try_convert","title":"TRY_CAST / TRY_CONVERT","text":"<pre><code>-- Retorna NULL em vez de erro\nSELECT TRY_CAST('abc' AS INT);  -- NULL\nSELECT TRY_CAST('123' AS INT);  -- 123\n\nSELECT TRY_CONVERT(DATE, '2025-01-15');  -- funciona\nSELECT TRY_CONVERT(DATE, 'invalid');     -- NULL\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#coalesce-isnull-nullif","title":"COALESCE / ISNULL / NULLIF","text":"<pre><code>COALESCE(a, b, c)      -- primeiro n\u00e3o-nulo\nISNULL(a, b)           -- se a \u00e9 null, retorna b\nNULLIF(a, b)           -- se a = b, retorna null\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#iif-case","title":"IIF / CASE","text":"<pre><code>-- IIF (tern\u00e1rio)\nSELECT IIF(quantidade &gt; 0, 'Em estoque', 'Esgotado') AS status;\n\n-- CASE\nSELECT\n    CASE\n        WHEN nota &gt;= 9 THEN 'A'\n        WHEN nota &gt;= 7 THEN 'B'\n        WHEN nota &gt;= 5 THEN 'C'\n        ELSE 'F'\n    END AS conceito\nFROM alunos;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#offsetfetch-paginacao","title":"OFFSET/FETCH (pagina\u00e7\u00e3o)","text":"<pre><code>SELECT *\nFROM produtos\nORDER BY nome\nOFFSET 20 ROWS\nFETCH NEXT 10 ROWS ONLY;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#tabelas-temporarias","title":"Tabelas tempor\u00e1rias","text":"<pre><code>-- Local (s\u00f3 na sess\u00e3o)\nCREATE TABLE #temp (\n    id INT,\n    nome VARCHAR(100)\n);\n\n-- Global (todas as sess\u00f5es)\nCREATE TABLE ##temp_global (\n    id INT\n);\n\n-- Vari\u00e1vel de tabela\nDECLARE @tabela TABLE (\n    id INT,\n    nome VARCHAR(100)\n);\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#transacoes","title":"Transa\u00e7\u00f5es","text":"<pre><code>BEGIN TRY\n    BEGIN TRANSACTION;\n\n    UPDATE contas SET saldo = saldo - 100 WHERE id = 1;\n    UPDATE contas SET saldo = saldo + 100 WHERE id = 2;\n\n    COMMIT;\nEND TRY\nBEGIN CATCH\n    ROLLBACK;\n    THROW;\nEND CATCH;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#indices","title":"\u00cdndices","text":"<pre><code>-- \u00cdndice simples\nCREATE INDEX IX_pedidos_cliente ON pedidos(cliente_id);\n\n-- \u00cdndice composto\nCREATE INDEX IX_pedidos_data_cliente ON pedidos(data, cliente_id);\n\n-- \u00cdndice com INCLUDE\nCREATE INDEX IX_pedidos_cliente_inc\nON pedidos(cliente_id)\nINCLUDE (valor, status);\n\n-- \u00cdndice filtrado\nCREATE INDEX IX_pedidos_pendentes\nON pedidos(data)\nWHERE status = 'pendente';\n\n-- Ver fragmenta\u00e7\u00e3o\nSELECT\n    index_id,\n    avg_fragmentation_in_percent\nFROM sys.dm_db_index_physical_stats(DB_ID(), OBJECT_ID('pedidos'), NULL, NULL, 'LIMITED');\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#execution-plan","title":"Execution plan","text":"<pre><code>-- Ver plano estimado\nSET SHOWPLAN_TEXT ON;\nGO\nSELECT * FROM pedidos WHERE cliente_id = 1;\nGO\nSET SHOWPLAN_TEXT OFF;\n\n-- Ver plano real com estat\u00edsticas\nSET STATISTICS IO ON;\nSET STATISTICS TIME ON;\nSELECT * FROM pedidos WHERE cliente_id = 1;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#queries-uteis","title":"Queries \u00fateis","text":""},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#tabelas-e-tamanhos","title":"Tabelas e tamanhos","text":"<pre><code>SELECT\n    t.name AS tabela,\n    SUM(p.rows) AS linhas,\n    SUM(a.total_pages) * 8 / 1024 AS tamanho_mb\nFROM sys.tables t\nINNER JOIN sys.partitions p ON t.object_id = p.object_id\nINNER JOIN sys.allocation_units a ON p.partition_id = a.container_id\nWHERE p.index_id IN (0, 1)\nGROUP BY t.name\nORDER BY tamanho_mb DESC;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#queries-lentas","title":"Queries lentas","text":"<pre><code>SELECT TOP 10\n    total_worker_time / execution_count AS avg_cpu,\n    execution_count,\n    SUBSTRING(st.text, 1, 200) AS query\nFROM sys.dm_exec_query_stats qs\nCROSS APPLY sys.dm_exec_sql_text(qs.sql_handle) st\nORDER BY avg_cpu DESC;\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#locks-ativos","title":"Locks ativos","text":"<pre><code>SELECT\n    l.request_session_id,\n    l.resource_type,\n    l.request_mode,\n    l.request_status,\n    OBJECT_NAME(p.object_id) AS tabela\nFROM sys.dm_tran_locks l\nLEFT JOIN sys.partitions p ON l.resource_associated_entity_id = p.hobt_id\nWHERE l.resource_database_id = DB_ID();\n</code></pre>"},{"location":"2025/01/18/t-sql-refer%C3%AAncia/#links","title":"Links","text":"<ul> <li>T-SQL Reference</li> <li>Query Store</li> </ul>"},{"location":"2024/12/08/uv-gerenciador-de-pacotes-python/","title":"uv: gerenciador de pacotes Python","text":"<p>uv \u00e9 um gerenciador de pacotes e projetos Python da Astral (mesma do Ruff). Escrito em Rust, substitui pyenv + pip + venv + poetry numa ferramenta s\u00f3.</p>"},{"location":"2024/12/08/uv-gerenciador-de-pacotes-python/#instalacao","title":"Instala\u00e7\u00e3o","text":"<pre><code># macOS\nbrew install uv\n</code></pre> <pre><code># Linux/macOS (script)\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre> <pre><code># Windows\nwinget install astral-sh.uv\n# Ou: irm https://astral.sh/uv/install.ps1 | iex\n</code></pre> <p>Se instalar via script, adicionar ao PATH:</p> <pre><code># Fish\nfish_add_path ~/.local/bin\n</code></pre> <pre><code># Bash/Zsh\nexport PATH=\"${HOME}/.local/bin:$PATH\"\n</code></pre>"},{"location":"2024/12/08/uv-gerenciador-de-pacotes-python/#comandos-essenciais","title":"Comandos essenciais","text":"<pre><code># Novo projeto\nuv init meu-projeto &amp;&amp; cd meu-projeto\n\n# Depend\u00eancias\nuv add requests\nuv add pytest --dev\n\n# Sincronizar ambiente\nuv sync\n\n# Executar no venv (sem ativar)\nuv run python script.py\nuv run pytest\n\n# Gerenciar vers\u00f5es Python\nuv python install 3.12\nuv python list\n</code></pre>"},{"location":"2024/12/08/uv-gerenciador-de-pacotes-python/#clis-globais-substitui-pipx","title":"CLIs globais (substitui pipx)","text":"<pre><code>uv tool install ruff\n</code></pre>"},{"location":"2024/12/08/uv-gerenciador-de-pacotes-python/#migracao","title":"Migra\u00e7\u00e3o","text":"<pre><code># De requirements.txt\nuv init\nuv add -r requirements.txt\n\n# De poetry - uv l\u00ea pyproject.toml direto\nuv sync\n</code></pre>"},{"location":"2024/12/08/uv-gerenciador-de-pacotes-python/#compatibilidade-pip","title":"Compatibilidade pip","text":"<pre><code># Quando precisar de comandos pip tradicionais\nuv pip install pacote\nuv pip freeze\n</code></pre>"},{"location":"2024/12/08/uv-gerenciador-de-pacotes-python/#links","title":"Links","text":"<ul> <li>Documenta\u00e7\u00e3o</li> <li>GitHub</li> </ul>"},{"location":"archive/2026/","title":"2026","text":""},{"location":"archive/2025/","title":"2025","text":""},{"location":"archive/2024/","title":"2024","text":""},{"location":"category/devops/","title":"DevOps","text":""},{"location":"category/terminal/","title":"Terminal","text":""},{"location":"category/programa%C3%A7%C3%A3o/","title":"Programa\u00e7\u00e3o","text":""},{"location":"category/c/","title":"C","text":""},{"location":"category/engenharia-de-dados/","title":"Engenharia de Dados","text":""},{"location":"category/sql/","title":"SQL","text":""},{"location":"category/python/","title":"Python","text":""},{"location":"category/terraform/","title":"Terraform","text":""},{"location":"category/banco-de-dados/","title":"Banco de Dados","text":""},{"location":"category/docker/","title":"Docker","text":""},{"location":"category/git/","title":"Git","text":""},{"location":"page/2/","title":"Bem-vindo","text":""},{"location":"archive/2025/page/2/","title":"2025","text":""}]}